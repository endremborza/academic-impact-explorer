import{s as ke,e as x,i as O,v as se,d as _,o as Ae,f as V,a as F,l as d,g as T,J as Le,c as J,h as W,m as p,j as g,w as u,n as j,k as Z,y as Pe,W as ie,x as oe,z as Re}from"./scheduler.2d1c82f4.js";import{S as we,i as Ie,a as X,g as Ee,t as B,c as Ne,b as Se,d as Me,m as Oe,e as He}from"./index.bf293594.js";import{f as Q}from"./text-format-util.e81a9716.js";import{g as De}from"./metric-calculation.caa987db.js";import{e as ae}from"./each.66af19a5.js";import{I as ee}from"./constants.405bf6bd.js";/* empty css                                                       */function re(s,e,t){const l=s.slice();return l[13]=e[t],l}function fe(s){let e,t='<h4 class="hover-l svelte-1ocso3e">Most Cited Paper</h4>',l,i,a,o,c,k,E,w,S,m,N,f,n=Q(s[0][1],0)+"",r,I,v,L,H,b=s[2]&&ne(s),P=s[4].length>0&&ue(s);return{c(){e=V("div"),e.innerHTML=t,l=F(),i=V("div"),a=V("h3"),o=V("a"),c=d(s[1]),k=d(" ("),E=d(s[3]),w=d(")"),S=F(),m=V("div"),b&&b.c(),N=F(),f=V("span"),r=d(n),I=d(" relevant citations"),v=F(),P&&P.c(),L=F(),H=V("hr"),this.h()},l(h){e=T(h,"DIV",{class:!0,"data-svelte-h":!0}),Le(e)!=="svelte-ot2jqe"&&(e.innerHTML=t),l=J(h),i=T(h,"DIV",{class:!0});var A=W(i);a=T(A,"H3",{class:!0});var D=W(a);o=T(D,"A",{href:!0,target:!0,class:!0});var y=W(o);c=p(y,s[1]),y.forEach(_),k=p(D," ("),E=p(D,s[3]),w=p(D,")"),D.forEach(_),A.forEach(_),S=J(h),m=T(h,"DIV",{class:!0});var K=W(m);b&&b.l(K),N=J(K),f=T(K,"SPAN",{class:!0});var M=W(f);r=p(M,n),I=p(M," relevant citations"),M.forEach(_),K.forEach(_),v=J(h),P&&P.l(h),L=J(h),H=T(h,"HR",{class:!0}),this.h()},h(){g(e,"class","svelte-1ocso3e"),g(o,"href",s[6]),g(o,"target","_blank"),g(o,"class","svelte-1ocso3e"),g(a,"class","hover-xl svelte-1ocso3e"),g(i,"class","svelte-1ocso3e"),g(f,"class","hover-m svelte-1ocso3e"),g(m,"class","svelte-1ocso3e"),g(H,"class","svelte-1ocso3e")},m(h,A){O(h,e,A),O(h,l,A),O(h,i,A),u(i,a),u(a,o),u(o,c),u(a,k),u(a,E),u(a,w),O(h,S,A),O(h,m,A),b&&b.m(m,null),u(m,N),u(m,f),u(f,r),u(f,I),O(h,v,A),P&&P.m(h,A),O(h,L,A),O(h,H,A)},p(h,A){A&2&&j(c,h[1]),A&64&&g(o,"href",h[6]),A&8&&j(E,h[3]),h[2]?b?b.p(h,A):(b=ne(h),b.c(),b.m(m,N)):b&&(b.d(1),b=null),A&1&&n!==(n=Q(h[0][1],0)+"")&&j(r,n),h[4].length>0?P?P.p(h,A):(P=ue(h),P.c(),P.m(L.parentNode,L)):P&&(P.d(1),P=null)},d(h){h&&(_(e),_(l),_(i),_(S),_(m),_(v),_(L),_(H)),b&&b.d(),P&&P.d(h)}}}function ne(s){let e,t,l;return{c(){e=V("span"),t=V("a"),l=d(s[2]),this.h()},l(i){e=T(i,"SPAN",{class:!0});var a=W(e);t=T(a,"A",{href:!0,target:!0,class:!0});var o=W(t);l=p(o,s[2]),o.forEach(_),a.forEach(_),this.h()},h(){g(t,"href",s[2]),g(t,"target","_blank"),g(t,"class","svelte-1ocso3e"),g(e,"class","hover-m svelte-1ocso3e")},m(i,a){O(i,e,a),u(e,t),u(t,l)},p(i,a){a&4&&j(l,i[2]),a&4&&g(t,"href",i[2])},d(i){i&&_(e)}}}function ue(s){let e,t,l=s[4].length+"",i,a,o=s[4].length>1?"s":"",c,k,E,w,S,m=s[5]>0&&ce(s),N=ae(s[4].slice(0,3)),f=[];for(let r=0;r<N.length;r+=1)f[r]=he(re(s,N,r));let n=s[4].length>3&&_e(s);return{c(){e=V("div"),t=V("h3"),i=d(l),a=d(" author"),c=d(o),k=F(),m&&m.c(),E=F(),w=V("al");for(let r=0;r<f.length;r+=1)f[r].c();S=F(),n&&n.c(),this.h()},l(r){e=T(r,"DIV",{class:!0});var I=W(e);t=T(I,"H3",{class:!0,style:!0});var v=W(t);i=p(v,l),a=p(v," author"),c=p(v,o),k=J(v),m&&m.l(v),v.forEach(_),E=J(I),w=T(I,"AL",{class:!0,style:!0});var L=W(w);for(let H=0;H<f.length;H+=1)f[H].l(L);S=J(L),n&&n.l(L),L.forEach(_),I.forEach(_),this.h()},h(){g(t,"class","hover-m svelte-1ocso3e"),Z(t,"flex","3"),g(w,"class","hover-m svelte-1ocso3e"),Z(w,"flex","7"),g(e,"class","svelte-1ocso3e")},m(r,I){O(r,e,I),u(e,t),u(t,i),u(t,a),u(t,c),u(t,k),m&&m.m(t,null),u(e,E),u(e,w);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(w,null);u(w,S),n&&n.m(w,null)},p(r,I){if(I&16&&l!==(l=r[4].length+"")&&j(i,l),I&16&&o!==(o=r[4].length>1?"s":"")&&j(c,o),r[5]>0?m?m.p(r,I):(m=ce(r),m.c(),m.m(t,null)):m&&(m.d(1),m=null),I&16){N=ae(r[4].slice(0,3));let v;for(v=0;v<N.length;v+=1){const L=re(r,N,v);f[v]?f[v].p(L,I):(f[v]=he(L),f[v].c(),f[v].m(w,S))}for(;v<f.length;v+=1)f[v].d(1);f.length=N.length}r[4].length>3?n?n.p(r,I):(n=_e(r),n.c(),n.m(w,null)):n&&(n.d(1),n=null)},d(r){r&&_(e),m&&m.d(),Pe(f,r),n&&n.d()}}}function ce(s){let e,t,l,i,a;return{c(){e=d("("),t=d(s[5]),l=F(),i=d(s[7]),a=d(")")},l(o){e=p(o,"("),t=p(o,s[5]),l=J(o),i=p(o,s[7]),a=p(o,")")},m(o,c){O(o,e,c),O(o,t,c),O(o,l,c),O(o,i,c),O(o,a,c)},p(o,c){c&32&&j(t,o[5]),c&128&&j(i,o[7])},d(o){o&&(_(e),_(t),_(l),_(i),_(a))}}}function he(s){let e,t=s[13].name+"",l,i,a;return{c(){e=V("a"),l=d(t),this.h()},l(o){e=T(o,"A",{href:!0,class:!0,target:!0});var c=W(e);l=p(c,t),c.forEach(_),this.h()},h(){g(e,"href",i=s[13].link),g(e,"class",a=ie(s[13].isOfInst?"bold":"")+" svelte-1ocso3e"),g(e,"target","_blank")},m(o,c){O(o,e,c),u(e,l)},p(o,c){c&16&&t!==(t=o[13].name+"")&&j(l,t),c&16&&i!==(i=o[13].link)&&g(e,"href",i),c&16&&a!==(a=ie(o[13].isOfInst?"bold":"")+" svelte-1ocso3e")&&g(e,"class",a)},d(o){o&&_(e)}}}function _e(s){let e,t=s[4].length-3+"",l,i;return{c(){e=V("a"),l=d(t),i=d(" others"),this.h()},l(a){e=T(a,"A",{href:!0,target:!0,class:!0});var o=W(e);l=p(o,t),i=p(o," others"),o.forEach(_),this.h()},h(){g(e,"href",s[6]),g(e,"target","_blank"),g(e,"class","svelte-1ocso3e")},m(a,o){O(a,e,o),u(e,l),u(e,i)},p(a,o){o&16&&t!==(t=a[4].length-3+"")&&j(l,t),o&64&&g(e,"href",a[6])},d(a){a&&_(e)}}}function Ve(s){let e,t=s[1]&&fe(s);return{c(){t&&t.c(),e=x()},l(l){t&&t.l(l),e=x()},m(l,i){t&&t.m(l,i),O(l,e,i)},p(l,[i]){l[1]?t?t.p(l,i):(t=fe(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:se,o:se,d(l){l&&_(e),t&&t.d(l)}}}function Te(s,e,t){let l,i,a,o,{workArr:c}=e,{attributeLabels:k}=e,{instId:E}=e,w=c[0],S="",m="",N=0,f=[],n=0;return Ae(()=>{if(w==0)return;let r=`https://api.openalex.org/works/W${w}?select=publication_year,title,doi,authorships`,I=`https://openalex.org/I${i}`;fetch(r).then(v=>{v.json().then(L=>{t(2,m=L.doi),t(3,N=L.publication_year);for(let H of L.authorships){let b=!1;for(let P of H.institutions||[])if(P.id==I){b=!0,t(5,n=n+1);break}f.push({name:H.author.display_name,link:H.author.id,isOfInst:b})}t(4,f=f.sort((H,b)=>b.isOfInst-H.isOfInst)),t(1,S=L.title)})})}),s.$$set=r=>{"workArr"in r&&t(0,c=r.workArr),"attributeLabels"in r&&t(8,k=r.attributeLabels),"instId"in r&&t(9,E=r.instId)},s.$$.update=()=>{var r,I;s.$$.dirty&768&&t(10,l=((r=k[ee][E||""])==null?void 0:r.name)||""),s.$$.dirty&768&&(i=((I=k[ee][E||""])==null?void 0:I.meta.oa_id)||""),s.$$.dirty&1024&&t(7,a=l.length>50?"affiliated":`from ${l}`)},t(6,o=`https://openalex.org/works/W${w}`),[c,S,m,N,f,n,o,a,k,E,l]}class je extends we{constructor(e){super(),Ie(this,e,Te,Ve,ke,{workArr:0,attributeLabels:8,instId:9})}}function me(s){let e,t,l,i,a=s[5].name+"",o,c,k,E=ge(s[5].spec.specMetric)+"",w,S,m,N,f,n=Q(s[5].weight||0,0)+"",r,I,v=(s[5].spec.nodeRate*100).toFixed(2)+"",L,H,b,P=Q(s[5].source_count||0,0)+"",h,A,D,y,K,M=s[2]&&ve(s),C=s[4]&&de(s),z=s[5].weight>1&&pe(),U=s[5].source_count>1&&be();return{c(){e=V("div"),M&&M.c(),t=F(),l=V("div"),i=V("h2"),o=d(a),c=F(),k=V("p"),w=d(E),S=d(" Specialization"),m=F(),C&&C.c(),N=F(),f=V("p"),r=d(n),I=d(" ("),L=d(v),H=d("%) citation"),z&&z.c(),b=d(`,
			`),h=d(P),A=d(" paper"),U&&U.c(),this.h()},l(R){e=T(R,"DIV",{class:!0,style:!0});var q=W(e);M&&M.l(q),q.forEach(_),t=J(R),l=T(R,"DIV",{class:!0,style:!0});var G=W(l);i=T(G,"H2",{class:!0});var le=W(i);o=p(le,a),le.forEach(_),c=J(G),k=T(G,"P",{class:!0});var te=W(k);w=p(te,E),S=p(te," Specialization"),te.forEach(_),m=J(G),C&&C.l(G),N=J(G),f=T(G,"P",{class:!0});var Y=W(f);r=p(Y,n),I=p(Y," ("),L=p(Y,v),H=p(Y,"%) citation"),z&&z.l(Y),b=p(Y,`,
			`),h=p(Y,P),A=p(Y," paper"),U&&U.l(Y),Y.forEach(_),G.forEach(_),this.h()},h(){g(e,"class","top-container svelte-i89wiv"),Z(e,"height",(s[2]?$:0)+"%"),g(i,"class","hover-l svelte-i89wiv"),g(k,"class","hover-m svelte-i89wiv"),g(f,"class","hover-m svelte-i89wiv"),g(l,"class","box-container svelte-i89wiv"),Z(l,"height",(s[2]?100-$:100)+"%")},m(R,q){O(R,e,q),M&&M.m(e,null),O(R,t,q),O(R,l,q),u(l,i),u(i,o),u(l,c),u(l,k),u(k,w),u(k,S),u(l,m),C&&C.m(l,null),u(l,N),u(l,f),u(f,r),u(f,I),u(f,L),u(f,H),z&&z.m(f,null),u(f,b),u(f,h),u(f,A),U&&U.m(f,null),D=!0,y||(K=[oe(k,"mouseover",s[10]),oe(k,"mouseleave",s[11])],y=!0)},p(R,q){R[2]?M?(M.p(R,q),q&4&&X(M,1)):(M=ve(R),M.c(),X(M,1),M.m(e,null)):M&&(Ee(),B(M,1,1,()=>{M=null}),Ne()),(!D||q&4)&&Z(e,"height",(R[2]?$:0)+"%"),(!D||q&32)&&a!==(a=R[5].name+"")&&j(o,a),(!D||q&32)&&E!==(E=ge(R[5].spec.specMetric)+"")&&j(w,E),R[4]?C?C.p(R,q):(C=de(R),C.c(),C.m(l,N)):C&&(C.d(1),C=null),(!D||q&32)&&n!==(n=Q(R[5].weight||0,0)+"")&&j(r,n),(!D||q&32)&&v!==(v=(R[5].spec.nodeRate*100).toFixed(2)+"")&&j(L,v),R[5].weight>1?z||(z=pe(),z.c(),z.m(f,b)):z&&(z.d(1),z=null),(!D||q&32)&&P!==(P=Q(R[5].source_count||0,0)+"")&&j(h,P),R[5].source_count>1?U||(U=be(),U.c(),U.m(f,null)):U&&(U.d(1),U=null),(!D||q&4)&&Z(l,"height",(R[2]?100-$:100)+"%")},i(R){D||(X(M),D=!0)},o(R){B(M),D=!1},d(R){R&&(_(e),_(t),_(l)),M&&M.d(),C&&C.d(),z&&z.d(),U&&U.d(),y=!1,Re(K)}}}function ve(s){let e,t;return e=new je({props:{workArr:s[5].top_source,attributeLabels:s[1],instId:s[3]}}),{c(){Se(e.$$.fragment)},l(l){Me(e.$$.fragment,l)},m(l,i){Oe(e,l,i),t=!0},p(l,i){const a={};i&32&&(a.workArr=l[5].top_source),i&2&&(a.attributeLabels=l[1]),i&8&&(a.instId=l[3]),e.$set(a)},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){He(e,l)}}}function de(s){let e,t,l=Q(s[5].spec.specMetric,3)+"",i,a,o=s[5].spec.baselineRate+"",c,k,E=s[5].spec.nodeRate+"",w,S,m=s[5].weight+"",N;return{c(){e=V("span"),t=d("metric = "),i=d(l),a=d("; base = "),c=d(o),k=d(`; nodeRate
				= `),w=d(E),S=d("; childN="),N=d(m),this.h()},l(f){e=T(f,"SPAN",{id:!0,class:!0});var n=W(e);t=p(n,"metric = "),i=p(n,l),a=p(n,"; base = "),c=p(n,o),k=p(n,`; nodeRate
				= `),w=p(n,E),S=p(n,"; childN="),N=p(n,m),n.forEach(_),this.h()},h(){g(e,"id","spec-hover"),g(e,"class","svelte-i89wiv")},m(f,n){O(f,e,n),u(e,t),u(e,i),u(e,a),u(e,c),u(e,k),u(e,w),u(e,S),u(e,N)},p(f,n){n&32&&l!==(l=Q(f[5].spec.specMetric,3)+"")&&j(i,l),n&32&&o!==(o=f[5].spec.baselineRate+"")&&j(c,o),n&32&&E!==(E=f[5].spec.nodeRate+"")&&j(w,E),n&32&&m!==(m=f[5].weight+"")&&j(N,m)},d(f){f&&_(e)}}}function pe(s){let e;return{c(){e=d("s")},l(t){e=p(t,"s")},m(t,l){O(t,e,l)},d(t){t&&_(e)}}}function be(s){let e;return{c(){e=d("s")},l(t){e=p(t,"s")},m(t,l){O(t,e,l)},d(t){t&&_(e)}}}function We(s){let e,t,l=s[0]!=null&&me(s);return{c(){l&&l.c(),e=x()},l(i){l&&l.l(i),e=x()},m(i,a){l&&l.m(i,a),O(i,e,a),t=!0},p(i,[a]){i[0]!=null?l?(l.p(i,a),a&1&&X(l,1)):(l=me(i),l.c(),X(l,1),l.m(e.parentNode,e)):l&&(Ee(),B(l,1,1,()=>{l=null}),Ne())},i(i){t||(X(l),t=!0)},o(i){B(l),t=!1},d(i){i&&_(e),l&&l.d(i)}}}let $=75;function ge(s){let e="Average";return s>2.5?e="Very High":s>1.2?e="High":s<.75&&(e="Low"),e}function qe(s,e,t){let l,i,{path:a}=e,{qcSpec:o}=e,{rootId:c}=e,{attributeLabels:k}=e,{weightedRoot:E}=e,{showPaper:w=!1}=e,S;function m(r,I){var P;if(t(3,S=void 0),(o==null?void 0:o.root_entity_type)===void 0)return[];o.root_entity_type==ee&&t(3,S=c);const v=[{weight:I.weight,source_count:I.source_count,top_source:I.top_source,name:k[o.root_entity_type][c].name,spec:{nodeRate:0,specMetric:0,baselineRate:0}}];let L=I.weight,H=o.bifurcations[0].resolver_id,b=I;for(let h=0;h<r.length;h++){const A=r[h],D=o.bifurcations[h],y=o.bifurcations[h+1],K=D.attribute_kind;S==null&&K==ee&&t(3,S=A);const M=Object.keys(k[K]).length;b=b.children[A]||{weight:0,children:{}},v.push({name:((P=k[K][A])==null?void 0:P.name)||"Unknown",weight:b.weight,source_count:b.source_count,top_source:b.top_source,spec:De(b,L,M,K,k,A,D.description)}),(y==null?void 0:y.resolver_id)!=H&&(H=y==null?void 0:y.resolver_id,L=b.weight)}return v}let N=!1;const f=()=>{t(4,N=!1)},n=()=>{t(4,N=!1)};return s.$$set=r=>{"path"in r&&t(0,a=r.path),"qcSpec"in r&&t(6,o=r.qcSpec),"rootId"in r&&t(7,c=r.rootId),"attributeLabels"in r&&t(1,k=r.attributeLabels),"weightedRoot"in r&&t(8,E=r.weightedRoot),"showPaper"in r&&t(2,w=r.showPaper)},s.$$.update=()=>{s.$$.dirty&257&&t(9,l=m(a||[],E)),s.$$.dirty&512&&t(5,i=l[l.length-1])},[a,k,w,S,N,i,o,c,E,l,f,n]}class Ye extends we{constructor(e){super(),Ie(this,e,qe,We,ke,{path:0,qcSpec:6,rootId:7,attributeLabels:1,weightedRoot:8,showPaper:2})}}export{Ye as P};

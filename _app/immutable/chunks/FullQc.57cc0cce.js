import{s as Ze,e as Oe,i as q,d as p,N as Ft,O as nt,r as Me,a as x,u as He,h as L,c as $,j as _,P as st,Q as lt,w as B,x as pe,R as ut,A as Qe,y as at,z as dt,S as Gt,f as Q,g as V,J as Mt,H as Xe,T as Ut,l as oe,m as ce,n as Fe,k as Wt,U as ot,V as Ht,C as Yt,E as Jt,F as Kt,G as Xt,p as We,D as Ye,v as Zt}from"./scheduler.2d1c82f4.js";import{S as xe,i as $e,g as Ge,c as Ue,a as j,t as G,b as Re,d as Be,m as Ee,h as Pe,e as ze,f as Je}from"./index.bf293594.js";import{e as Te,u as xt,o as $t}from"./each.66af19a5.js";import{g as ct,a as Qt,b as ei}from"./style-util.70c21ca4.js";import{f as je}from"./index.e8025cb1.js";import{g as Vt,D as pt,d as ti,a as ii,b as ri,p as ni,c as si}from"./tree-functions.2607c0ac.js";import{f as tt}from"./text-format-util.e81a9716.js";import{M as it}from"./constants.8d8a1d0f.js";import{B as Nt}from"./BrokenFittedText.2ee271a1.js";import{g as li}from"./visual-util.fb52d494.js";/* empty css                                             */import{P as oi}from"./PathLevelInfoBox.d0ec457a.js";const Vi={"qc-6c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-8":{bifurcations:[{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0}],root_entity_type:"institutions"},"qc-5c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1}],root_entity_type:"countries"},"qc-7":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"0-country-hierarchy-1",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0}],root_entity_type:"institutions"},"qc-2c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-3c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-7c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"0-country-hierarchy-1",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0}],root_entity_type:"countries"},"qc-6":{bifurcations:[{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-8c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0}],root_entity_type:"countries"},"qc-1c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"countries"},"qc-4":{bifurcations:[{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-2":{bifurcations:[{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-4c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1}],root_entity_type:"countries"},"qc-3":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"institutions"},"qc-5":{bifurcations:[{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1}],root_entity_type:"institutions"},"qc-1":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"institutions"}};function Ne(i,e,t,l,o){return()=>{i("ti",{path:t,action:e,topLeftCorner:{x:l,y:o}})}}function gt(i,e,t){const l=i.slice();return l[43]=e[t].id,l[44]=e[t].cachedProps,l[45]=e[t].vizInfo,l[46]=e[t].childNode,l[47]=e[t].textShape,l[48]=e[t].hoverShape,l}function bt(i,e,t){const l=i.slice();return l[51]=e[t][0],l[52]=e[t][1],l}function mt(i){let e,t,l;return{c(){e=Me("stop"),this.h()},l(o){e=He(o,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),L(e).forEach(p),this.h()},h(){_(e,"offset",i[51]+"%"),_(e,"stop-opacity",t=i[46].isSelected?"80%":`${i[52]}%`),_(e,"stop-color",l=i[45].colorStr),_(e,"class","svelte-1cwbp37")},m(o,n){q(o,e,n)},p(o,n){n[0]&8192&&t!==(t=o[46].isSelected?"80%":`${o[52]}%`)&&_(e,"stop-opacity",t),n[0]&8192&&l!==(l=o[45].colorStr)&&_(e,"stop-color",l)},d(o){o&&p(e)}}}function yt(i){let e,t;const l=[i[44],{qcSpec:i[0]},{attributeLabels:i[1]},{visibleTreeInfo:i[2]},{selectionState:i[3]},{levelOutSpecs:i[4]},{treeD2:i[5]},{treeD2Offset:i[9]},{childD1Rate:i[6]},{overHangRate:i[7]},{preStraightRate:i[8]},{childBaseSize:i[10]},{linkSurfaceRate:i[11]},{childrenInternalMargin:i[12]},{parentSideMargin:0}];let o={};for(let n=0;n<l.length;n+=1)o=nt(o,l[n]);return e=new At({props:o}),e.$on("ti",i[33]),{c(){Re(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,r){Ee(e,n,r),t=!0},p(n,r){const s=r[0]&16383?ct(l,[r[0]&8192&&Qt(n[44]),r[0]&1&&{qcSpec:n[0]},r[0]&2&&{attributeLabels:n[1]},r[0]&4&&{visibleTreeInfo:n[2]},r[0]&8&&{selectionState:n[3]},r[0]&16&&{levelOutSpecs:n[4]},r[0]&32&&{treeD2:n[5]},r[0]&512&&{treeD2Offset:n[9]},r[0]&64&&{childD1Rate:n[6]},r[0]&128&&{overHangRate:n[7]},r[0]&256&&{preStraightRate:n[8]},r[0]&1024&&{childBaseSize:n[10]},r[0]&2048&&{linkSurfaceRate:n[11]},r[0]&4096&&{childrenInternalMargin:n[12]},l[14]]):{};e.$set(s)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ze(e,n)}}}function vt(i,e){let t,l,o,n,r,s,c,u,h,g,k,f,y,w,R,ee,te,U=Te([[0,5],[20,15],[50,25]]),I=[];for(let b=0;b<3;b+=1)I[b]=mt(bt(e,U,b));const W=[{text:e[46].name},e[47]];let ie={};for(let b=0;b<W.length;b+=1)ie=nt(ie,W[b]);g=new Nt({props:ie});let le=[e[48],{"fill-opacity":"0"}],K={};for(let b=0;b<le.length;b+=1)K=nt(K,le[b]);let S=e[46].children&&yt(e);return{key:i,first:null,c(){t=Me("defs"),l=Me("linearGradient");for(let b=0;b<3;b+=1)I[b].c();n=x(),r=Me("path"),h=x(),Re(g.$$.fragment),k=x(),f=Me("rect"),y=x(),S&&S.c(),w=Oe(),this.h()},l(b){t=He(b,"defs",{});var O=L(t);l=He(O,"linearGradient",{id:!0,gradientTransform:!0});var P=L(l);for(let E=0;E<3;E+=1)I[E].l(P);P.forEach(p),O.forEach(p),n=$(b),r=He(b,"path",{d:!0,fill:!0,class:!0}),L(r).forEach(p),h=$(b),Be(g.$$.fragment,b),k=$(b),f=He(b,"rect",{"fill-opacity":!0}),L(f).forEach(p),y=$(b),S&&S.l(b),w=Oe(),this.h()},h(){_(l,"id",o="path-grad-"+e[45].strId),_(l,"gradientTransform","rotate(90)"),_(r,"d",s=e[45].linkPath),_(r,"fill",c="url('#path-grad-"+e[45].strId+"')"),_(r,"class","svelte-1cwbp37"),st(f,K),lt(f,"svelte-1cwbp37",!0),this.first=t},m(b,O){q(b,t,O),B(t,l);for(let P=0;P<3;P+=1)I[P]&&I[P].m(l,null);q(b,n,O),q(b,r,O),q(b,h,O),Ee(g,b,O),q(b,k,O),q(b,f,O),q(b,y,O),S&&S.m(b,O),q(b,w,O),R=!0,ee||(te=[pe(f,"mouseover",function(){ut(Ne(e[14],"highlight",e[44].pathInCompleteTree,e[48].x,e[48].y))&&Ne(e[14],"highlight",e[44].pathInCompleteTree,e[48].x,e[48].y).apply(this,arguments)}),pe(f,"mouseleave",function(){ut(Ne(e[14],"de-highlight",e[44].pathInCompleteTree,0,0))&&Ne(e[14],"de-highlight",e[44].pathInCompleteTree,0,0).apply(this,arguments)}),pe(f,"click",function(){ut(Ne(e[14],"toggle-select",e[44].pathInCompleteTree,0,0))&&Ne(e[14],"toggle-select",e[44].pathInCompleteTree,0,0).apply(this,arguments)})],ee=!0)},p(b,O){if(e=b,O[0]&8192){U=Te([[0,5],[20,15],[50,25]]);let E;for(E=0;E<3;E+=1){const X=bt(e,U,E);I[E]?I[E].p(X,O):(I[E]=mt(X),I[E].c(),I[E].m(l,null))}for(;E<3;E+=1)I[E].d(1)}(!R||O[0]&8192&&o!==(o="path-grad-"+e[45].strId))&&_(l,"id",o),(!R||O[0]&8192&&s!==(s=e[45].linkPath))&&_(r,"d",s),(!R||O[0]&8192&&c!==(c="url('#path-grad-"+e[45].strId+"')"))&&_(r,"fill",c);const P=O[0]&8192?ct(W,[{text:e[46].name},Qt(e[47])]):{};g.$set(P),st(f,K=ct(le,[O[0]&8192&&e[48],{"fill-opacity":"0"}])),lt(f,"svelte-1cwbp37",!0),e[46].children?S?(S.p(e,O),O[0]&8192&&j(S,1)):(S=yt(e),S.c(),j(S,1),S.m(w.parentNode,w)):S&&(Ge(),G(S,1,1,()=>{S=null}),Ue())},i(b){R||(b&&Qe(()=>{R&&(u||(u=Pe(r,je,{duration:300},!0)),u.run(1))}),j(g.$$.fragment,b),j(S),R=!0)},o(b){b&&(u||(u=Pe(r,je,{duration:300},!1)),u.run(0)),G(g.$$.fragment,b),G(S),R=!1},d(b){b&&(p(t),p(n),p(r),p(h),p(k),p(f),p(y),p(w)),at(I,b),b&&u&&u.end(),ze(g,b),S&&S.d(b),ee=!1,dt(te)}}}function ci(i){let e=[],t=new Map,l,o,n=Te(i[13]);const r=s=>s[43];for(let s=0;s<n.length;s+=1){let c=gt(i,n,s),u=r(c);t.set(u,e[s]=vt(u,c))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=Oe()},l(s){for(let c=0;c<e.length;c+=1)e[c].l(s);l=Oe()},m(s,c){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,c);q(s,l,c),o=!0},p(s,c){c[0]&32767&&(n=Te(s[13]),Ge(),e=xt(e,c,r,1,s,n,t,l.parentNode,$t,vt,l,gt),Ue())},i(s){if(!o){for(let c=0;c<n.length;c+=1)j(e[c]);o=!0}},o(s){for(let c=0;c<e.length;c+=1)G(e[c]);o=!1},d(s){s&&p(l);for(let c=0;c<e.length;c+=1)e[c].d(s)}}}function kt(i,e,t,l,o,n,r){const s=h=>o*(h||0)/n,c=l+s(e),u=i+((t==null?void 0:t.rank)||0)*(l+r)+s(t==null?void 0:t.weight);return{rootD2:c,d2Offset:u}}function ai(i,e,t){let l,o,n,r,s,c,u,h,g,k,f,y,w,R,ee,te,U,I,W,ie,{qcSpec:le}=e,{attributeLabels:K}=e,{visibleTreeInfo:S}=e,{selectionState:b}=e,{levelOutSpecs:O=[]}=e,{pathInCompleteTree:P=[]}=e,{branchReachBack:E=0}=e,{rootD2:X=30}=e,{treeD2:re=70}=e,{childD1Rate:ne=.2}=e,{overHangRate:A=.05}=e,{preStraightRate:ae=.05}=e,{treeD2Offset:Y=0}=e,{childBaseSize:D=2.9}=e,{linkSurfaceRate:ge=.8}=e,{childrenInternalMargin:be=.9}=e,{parentSideMargin:ye=.8}=e,{d2Offset:ue=(re-X)/2+Y}=e;const we=Ft(),Se=v=>v===void 0?0:v;function Ve(v,T){var M;const C={pathInCompleteTree:[...P,v],...kt(Y,T.weight,T==null?void 0:T.totalOffsetOnLevel,D,W,((M=S.meta[o])==null?void 0:M.totalWeight)||1,be)},N=kt(ue+ye,T.weight,T==null?void 0:T.totalOffsetAmongSiblings,I,te*(r>1?ge:1)-I*r,(n==null?void 0:n.childrenSumWeight)||1,U),a={parent:N.rootD2,child:C.rootD2},d=g+(T.isSelected?f:0),J={x:N.d2Offset,y},fe={x:C.d2Offset,y:w};let Ie=li(J,fe,a,d,ee),ke={x:C.d2Offset+a.child*.18,y:R-g*.05,height:g*.9,width:a.child*.64};const me={x:C.d2Offset,y:w,height:g,width:a.child};return{id:v,cachedProps:C,vizInfo:{linkPath:Ie,d2Size:a.child,colorStr:ei(T.scaleEnds.mid),strId:C.pathInCompleteTree.join("-")},childNode:T,textShape:ke,hoverShape:me}}function ve(v,T){return Object.entries((v==null?void 0:v.children)||{}).map(([C,N])=>Ve(C,N))}function z(v){Gt.call(this,i,v)}return i.$$set=v=>{"qcSpec"in v&&t(0,le=v.qcSpec),"attributeLabels"in v&&t(1,K=v.attributeLabels),"visibleTreeInfo"in v&&t(2,S=v.visibleTreeInfo),"selectionState"in v&&t(3,b=v.selectionState),"levelOutSpecs"in v&&t(4,O=v.levelOutSpecs),"pathInCompleteTree"in v&&t(15,P=v.pathInCompleteTree),"branchReachBack"in v&&t(16,E=v.branchReachBack),"rootD2"in v&&t(17,X=v.rootD2),"treeD2"in v&&t(5,re=v.treeD2),"childD1Rate"in v&&t(6,ne=v.childD1Rate),"overHangRate"in v&&t(7,A=v.overHangRate),"preStraightRate"in v&&t(8,ae=v.preStraightRate),"treeD2Offset"in v&&t(9,Y=v.treeD2Offset),"childBaseSize"in v&&t(10,D=v.childBaseSize),"linkSurfaceRate"in v&&t(11,ge=v.linkSurfaceRate),"childrenInternalMargin"in v&&t(12,be=v.childrenInternalMargin),"parentSideMargin"in v&&t(18,ye=v.parentSideMargin),"d2Offset"in v&&t(19,ue=v.d2Offset)},i.$$.update=()=>{var v;i.$$.dirty[0]&32768&&t(32,l=P.length),i.$$.dirty[1]&2&&t(27,o=l+1),i.$$.dirty[0]&32772&&t(21,n=Vt(P,S.tree)),i.$$.dirty[0]&2097152&&t(25,r=Object.keys((n==null?void 0:n.children)||{}).length),i.$$.dirty[0]&16|i.$$.dirty[1]&2&&t(20,s=O[l]),i.$$.dirty[0]&134217732&&t(28,c=((v=S.meta[o])==null?void 0:v.totalNodes)||0),i.$$.dirty[0]&1048576&&t(31,u=Se(s==null?void 0:s.topOffset)),i.$$.dirty[0]&1049024&&t(30,[h,g,k,f]=[1-ne-ae-A,ne,ae,A].map(T=>Se((s==null?void 0:s.totalSize)*T)),h,(t(22,g),t(6,ne),t(8,ae),t(7,A),t(20,s),t(4,O),t(32,l),t(15,P)),(t(29,k),t(6,ne),t(8,ae),t(7,A),t(20,s),t(4,O),t(32,l),t(15,P))),i.$$.dirty[0]&536870912|i.$$.dirty[1]&1&&t(24,y=u+k),i.$$.dirty[0]&1090519040&&t(23,w=y+h),i.$$.dirty[0]&12582912&&(R=w+g),i.$$.dirty[0]&536936448&&(ee=E+k),i.$$.dirty[0]&393216&&t(26,te=X-2*ye),i.$$.dirty[0]&100665344&&(U=te*(1-ge)/(r>1?r-1:1)),i.$$.dirty[0]&100665344&&(I=te*ge/(r*1.8)),i.$$.dirty[0]&268440608&&(W=re-D*c-be*(c-1)),i.$$.dirty[0]&3145728&&t(13,ie=ve(n))},[le,K,S,b,O,re,ne,A,ae,Y,D,ge,be,ie,we,P,E,X,ye,ue,s,n,g,w,y,r,te,o,c,k,h,u,l,z]}class At extends xe{constructor(e){super(),$e(this,e,ai,ci,Ze,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectionState:3,levelOutSpecs:4,pathInCompleteTree:15,branchReachBack:16,rootD2:17,treeD2:5,childD1Rate:6,overHangRate:7,preStraightRate:8,treeD2Offset:9,childBaseSize:10,linkSurfaceRate:11,childrenInternalMargin:12,parentSideMargin:18,d2Offset:19},null,[-1,-1])}}function ui(i){let e,t,l,o,n="<span>−</span><span>+</span>",r,s,c,u;return{c(){e=Q("div"),t=Q("input"),l=x(),o=Q("label"),o.innerHTML=n,this.h()},l(h){e=V(h,"DIV",{class:!0});var g=L(e);t=V(g,"INPUT",{type:!0,min:!0,max:!0,class:!0}),l=$(g),o=V(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Mt(o)!=="svelte-3lai9p"&&(o.innerHTML=n),g.forEach(p),this.h()},h(){_(t,"type","range"),_(t,"min",i[1]),_(t,"max",i[2]),_(t,"class","svelte-1gdj9q3"),_(o,"for","topn-input"),_(o,"class","svelte-1gdj9q3"),_(e,"class","vert-zero svelte-1gdj9q3")},m(h,g){q(h,e,g),B(e,t),Xe(t,i[0]),B(e,l),B(e,o),s=!0,c||(u=[pe(t,"change",i[4]),pe(t,"input",i[4])],c=!0)},p(h,[g]){i=h,(!s||g&2)&&_(t,"min",i[1]),(!s||g&4)&&_(t,"max",i[2]),g&1&&Xe(t,i[0])},i(h){s||(h&&Qe(()=>{s&&(r||(r=Pe(e,je,{duration:i[3]},!0)),r.run(1))}),s=!0)},o(h){h&&(r||(r=Pe(e,je,{duration:i[3]},!1)),r.run(0)),s=!1},d(h){h&&p(e),h&&r&&r.end(),c=!1,dt(u)}}}function hi(i,e,t){let{value:l}=e,{min:o}=e,{max:n}=e,{duration:r=400}=e;function s(){l=Ut(this.value),t(0,l)}return i.$$set=c=>{"value"in c&&t(0,l=c.value),"min"in c&&t(1,o=c.min),"max"in c&&t(2,n=c.max),"duration"in c&&t(3,r=c.duration)},[l,o,n,r,s]}class fi extends xe{constructor(e){super(),$e(this,e,hi,ui,Ze,{value:0,min:1,max:2,duration:3})}}function wt(i,e,t){const l=i.slice();return l[7]=e[t],l}function St(i){let e,t,l,o=i[5](i[0][i[2]]||"").split("<")[0]+"",n,r,s,c,u,h,g,k,f=i[1].levelOptions.length>1&&qt(i);return{c(){e=Q("div"),t=Q("div"),l=Q("span"),n=oe(o),s=x(),f&&f.c(),c=x(),u=Q("div"),this.h()},l(y){e=V(y,"DIV",{class:!0,style:!0});var w=L(e);t=V(w,"DIV",{class:!0});var R=L(t);l=V(R,"SPAN",{class:!0});var ee=L(l);n=ce(ee,o),ee.forEach(p),R.forEach(p),s=$(w),f&&f.l(w),c=$(w),u=V(w,"DIV",{class:!0}),L(u).forEach(p),w.forEach(p),this.h()},h(){_(l,"class","svelte-1hzgw1i"),_(t,"class",r="sel-base sel-cover "+(i[1].levelOptions.length>1?"sel-clicky":"")+" svelte-1hzgw1i"),_(u,"class","bg filler svelte-1hzgw1i"),_(e,"class","sentenceline svelte-1hzgw1i"),_(e,"style",h=i[4]({top:i[1].topOffset+i[1].totalSize*.2+i[3],height:i[1].totalSize*.25},{},{}))},m(y,w){q(y,e,w),B(e,t),B(t,l),B(l,n),B(e,s),f&&f.m(e,null),B(e,c),B(e,u),k=!0},p(y,w){(!k||w&5)&&o!==(o=y[5](y[0][y[2]]||"").split("<")[0]+"")&&Fe(n,o),(!k||w&2&&r!==(r="sel-base sel-cover "+(y[1].levelOptions.length>1?"sel-clicky":"")+" svelte-1hzgw1i"))&&_(t,"class",r),y[1].levelOptions.length>1?f?f.p(y,w):(f=qt(y),f.c(),f.m(e,c)):f&&(f.d(1),f=null),(!k||w&26&&h!==(h=y[4]({top:y[1].topOffset+y[1].totalSize*.2+y[3],height:y[1].totalSize*.25},{},{})))&&_(e,"style",h)},i(y){k||(y&&Qe(()=>{k&&(g||(g=Pe(e,je,{duration:400},!0)),g.run(1))}),k=!0)},o(y){y&&(g||(g=Pe(e,je,{duration:400},!1)),g.run(0)),k=!1},d(y){y&&p(e),f&&f.d(),y&&g&&g.end()}}}function qt(i){let e,t,l,o=Te(i[1].levelOptions),n=[];for(let r=0;r<o.length;r+=1)n[r]=Ot(wt(i,o,r));return{c(){e=Q("select");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=V(r,"SELECT",{class:!0,style:!0});var s=L(e);for(let c=0;c<n.length;c+=1)n[c].l(s);s.forEach(p),this.h()},h(){_(e,"class","sel-base svelte-1hzgw1i"),Wt(e,"opacity","0"),i[0][i[2]]===void 0&&Qe(()=>i[6].call(e))},m(r,s){q(r,e,s);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);ot(e,i[0][i[2]],!0),t||(l=pe(e,"change",i[6]),t=!0)},p(r,s){if(s&34){o=Te(r[1].levelOptions);let c;for(c=0;c<o.length;c+=1){const u=wt(r,o,c);n[c]?n[c].p(u,s):(n[c]=Ot(u),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=o.length}s&7&&ot(e,r[0][r[2]])},d(r){r&&p(e),at(n,r),t=!1,l()}}}function Ot(i){let e,t=i[5](i[7])+"",l,o,n;return{c(){e=Q("option"),l=oe(t),o=x(),this.h()},l(r){e=V(r,"OPTION",{class:!0});var s=L(e);l=ce(s,t),o=$(s),s.forEach(p),this.h()},h(){e.__value=n=i[7],Xe(e,e.__value),_(e,"class","svelte-1hzgw1i")},m(r,s){q(r,e,s),B(e,l),B(e,o)},p(r,s){s&2&&t!==(t=r[5](r[7])+"")&&Fe(l,t),s&2&&n!==(n=r[7])&&(e.__value=n,Xe(e,e.__value))},d(r){r&&p(e)}}}function di(i){let e,t=i[1].isVisible&&St(i);return{c(){t&&t.c(),e=Oe()},l(l){t&&t.l(l),e=Oe()},m(l,o){t&&t.m(l,o),q(l,e,o)},p(l,[o]){l[1].isVisible?t?(t.p(l,o),o&2&&j(t,1)):(t=St(l),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(Ge(),G(t,1,1,()=>{t=null}),Ue())},i(l){j(t)},o(l){G(t)},d(l){l&&p(e),t&&t.d(l)}}}function _i(i,e,t){let{levelSpec:l}=e,{index:o}=e,{selectedBreakdowns:n}=e,{totalD1Offset:r}=e,{dBasedStyle:s}=e;function c(h){let g=n[0]=="1-w2qs-1",k=n[0]=="agged-institutions-to-countries",f={"agged-institutions-to-countries":"working at"},y=k?Math.max(o-1,0):o;return[{"0-concept-hierarchy-0":"working on <field>","0-concept-hierarchy-1":"working on <subfield>","1-concept-hierarchy-0":"are cited by papers in <field>","0-country-hierarchy-0":"co-author with scholars working in <country>","1-country-hierarchy-0":"are cited by authors working in <country>","0-w2qs-0":"publish in journals categorized as <q#>","1-w2qs-1":"are cited in papers published in <journal>"},{"1-concept-hierarchy-0":"and are cited by authors working on","1-concept-hierarchy-1":"and in particular","0-country-hierarchy-1":"working at","1-country-hierarchy-0":(g?"":"are cited ")+"by authors in","1-country-hierarchy-1":"at","0-w2qs-0":"publish in journals categorized as","0-w2qs-1":"such as"},{"0-concept-hierarchy-0":"focused on","1-concept-hierarchy-1":"and in particular in","1-country-hierarchy-1":"working at","1-concept-hierarchy-0":(g?"working ":"")+"on","0-w2qs-1":"such as","1-w2qs-1":"published in","1-country-hierarchy-0":"and are cited by authors working in"},{"0-concept-hierarchy-1":"and in particular","1-concept-hierarchy-0":"on","1-concept-hierarchy-1":"and in particular"},{}][y][h]||f[h]||h}function u(){n[o]=Ht(this),t(0,n),t(1,l)}return i.$$set=h=>{"levelSpec"in h&&t(1,l=h.levelSpec),"index"in h&&t(2,o=h.index),"selectedBreakdowns"in h&&t(0,n=h.selectedBreakdowns),"totalD1Offset"in h&&t(3,r=h.totalD1Offset),"dBasedStyle"in h&&t(4,s=h.dBasedStyle)},[n,l,o,r,s,c,u]}class pi extends xe{constructor(e){super(),$e(this,e,_i,di,Ze,{levelSpec:1,index:2,selectedBreakdowns:0,totalD1Offset:3,dBasedStyle:4})}}function Tt(i){let e,t,l;return{c(){e=Q("input"),this.h()},l(o){e=V(o,"INPUT",{type:!0}),this.h()},h(){_(e,"type","checkbox")},m(o,n){q(o,e,n),e.checked=i[1],t||(l=pe(e,"change",i[9]),t=!0)},p(o,n){n&2&&(e.checked=o[1])},d(o){o&&p(e),t=!1,l()}}}function gi(i){let e,t,l="i",o,n,r,s,c,u;const h=i[5].default,g=Yt(h,i,i[4],null);let k=i[2]&&Tt(i);return{c(){e=Q("div"),t=Q("span"),t.textContent=l,o=x(),n=Q("span"),g&&g.c(),r=x(),k&&k.c(),this.h()},l(f){e=V(f,"DIV",{id:!0,class:!0});var y=L(e);t=V(y,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),Mt(t)!=="svelte-6462kx"&&(t.textContent=l),o=$(y),n=V(y,"SPAN",{id:!0,class:!0});var w=L(n);g&&g.l(w),w.forEach(p),r=$(y),k&&k.l(y),y.forEach(p),this.h()},h(){_(t,"id","spec-info-hover"),_(t,"class","small-hover svelte-1cmmek4"),_(n,"id","spec-label"),_(n,"class","small-hover svelte-1cmmek4"),_(e,"id","spec-container"),_(e,"class","svelte-1cmmek4")},m(f,y){q(f,e,y),B(e,t),B(e,o),B(e,n),g&&g.m(n,null),B(e,r),k&&k.m(e,null),s=!0,c||(u=[pe(t,"mouseover",i[6]),pe(t,"mouseleave",i[7]),pe(n,"click",i[8])],c=!0)},p(f,[y]){g&&g.p&&(!s||y&16)&&Jt(g,h,f,f[4],s?Xt(h,f[4],y,null):Kt(f[4]),null),f[2]?k?k.p(f,y):(k=Tt(f),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i(f){s||(j(g,f),s=!0)},o(f){G(g,f),s=!1},d(f){f&&p(e),g&&g.d(f),k&&k.d(),c=!1,dt(u)}}}function bi(i,e,t){let{$$slots:l={},$$scope:o}=e,{hoverToggle:n}=e,{checked:r}=e,{checkBox:s=!0}=e,{interactText:c=!0}=e;const u=()=>{t(0,n=!0)},h=()=>{t(0,n=!1)},g=()=>{c&&t(1,r=!r)};function k(){r=this.checked,t(1,r)}return i.$$set=f=>{"hoverToggle"in f&&t(0,n=f.hoverToggle),"checked"in f&&t(1,r=f.checked),"checkBox"in f&&t(2,s=f.checkBox),"interactText"in f&&t(3,c=f.interactText),"$$scope"in f&&t(4,o=f.$$scope)},[n,r,s,c,o,l,u,h,g,k]}class It extends xe{constructor(e){super(),$e(this,e,bi,gi,Ze,{hoverToggle:0,checked:1,checkBox:2,interactText:3})}}function Dt(i,e,t){const l=i.slice();return l[57]=e[t],l[59]=t,l}function Rt(i,e,t){const l=i.slice();return l[60]=e[t],l}function Bt(i){let e,t,l,o,n,r,s,c,u,h,g,k,f,y,w,R,ee,te,U,I,W,ie,le,K,S,b,O,P,E,X,re,ne,A;t=new At({props:{qcSpec:i[4],branchReachBack:i[12]*qe/100,d2Offset:i[26]+rt,rootD2:ht,attributeLabels:i[2],visibleTreeInfo:i[13],selectionState:i[10],levelOutSpecs:i[19],treeD2:Ke-rt,treeD2Offset:rt,childD1Rate:i[24],overHangRate:Si,childBaseSize:qi}}),t.$on("ti",i[27]);let ae=[{id:"qc-header"},i[21],{rx:"0.4"}],Y={};for(let a=0;a<ae.length;a+=1)Y=nt(Y,ae[a]);o=new Nt({props:{height:i[21].height*.7,width:i[21].width*.8,text:i[1]||"",anchor:"middle",bottomAligned:!1,x:i[21].x+i[21].width/2,y:i[21].y+i[21].height*.75,allowRotation:!1}});let D=i[9].weight>1&&Et(i);function ge(a){i[39](a)}let be={min:1,max:Oi};i[7]!==void 0&&(be.value=i[7]),R=new fi({props:be}),We.push(()=>Je(R,"value",ge));function ye(a){i[40](a)}function ue(a){i[41](a)}let we={$$slots:{default:[mi]},$$scope:{ctx:i}};i[17]!==void 0&&(we.hoverToggle=i[17]),i[8]!==void 0&&(we.checked=i[8]),W=new It({props:we}),We.push(()=>Je(W,"hoverToggle",ye)),We.push(()=>Je(W,"checked",ue));function Se(a){i[43](a)}let Ve={interactText:!1,checked:!1,checkBox:!1,$$slots:{default:[yi]},$$scope:{ctx:i}};i[18]!==void 0&&(Ve.hoverToggle=i[18]),S=new It({props:Ve}),We.push(()=>Je(S,"hoverToggle",Se));let ve=Te(i[19]||[]),z=[];for(let a=0;a<ve.length;a+=1)z[a]=Ct(Dt(i,ve,a));const v=a=>G(z[a],1,1,()=>{z[a]=null});let T=i[15].length>0&&Lt(i),C=i[17]&&Pt(i),N=i[18]&&jt(i);return{c(){e=Me("svg"),Re(t.$$.fragment),l=Me("rect"),Re(o.$$.fragment),r=x(),s=Q("div"),c=Q("p"),u=oe(i[3]),g=x(),k=Q("div"),D&&D.c(),y=x(),w=Q("div"),Re(R.$$.fragment),U=x(),I=Q("div"),Re(W.$$.fragment),K=x(),Re(S.$$.fragment),P=x();for(let a=0;a<z.length;a+=1)z[a].c();E=x(),T&&T.c(),X=x(),C&&C.c(),re=x(),N&&N.c(),ne=Oe(),this.h()},l(a){e=He(a,"svg",{viewBox:!0,xmlns:!0,class:!0});var d=L(e);Be(t.$$.fragment,d),l=He(d,"rect",{id:!0,rx:!0}),L(l).forEach(p),Be(o.$$.fragment,d),d.forEach(p),r=$(a),s=V(a,"DIV",{class:!0,style:!0});var J=L(s);c=V(J,"P",{id:!0,class:!0});var fe=L(c);u=ce(fe,i[3]),fe.forEach(p),J.forEach(p),g=$(a),k=V(a,"DIV",{class:!0,style:!0});var Ie=L(k);D&&D.l(Ie),Ie.forEach(p),y=$(a),w=V(a,"DIV",{class:!0,style:!0});var ke=L(w);Be(R.$$.fragment,ke),ke.forEach(p),U=$(a),I=V(a,"DIV",{class:!0,id:!0,style:!0});var me=L(I);Be(W.$$.fragment,me),K=$(me),Be(S.$$.fragment,me),me.forEach(p),P=$(a);for(let M=0;M<z.length;M+=1)z[M].l(a);E=$(a),T&&T.l(a),X=$(a),C&&C.l(a),re=$(a),N&&N.l(a),ne=Oe(),this.h()},h(){st(l,Y),lt(l,"svelte-1eprj6g",!0),_(e,"viewBox",n=i[20].x+" "+i[20].y+" "+i[20].width+" "+i[20].height),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"class","svelte-1eprj6g"),_(c,"id","sentence-starter"),_(c,"class","svelte-1eprj6g"),_(s,"class","floater sentence-container svelte-1eprj6g"),_(s,"style",h=i[23]({top:0},{left:20,width:60},{height:Ae})),_(k,"class","floater sentence-container svelte-1eprj6g"),_(k,"style",f=i[23]({},{left:i[21].x-i[21].width/2,width:i[21].width*2},{height:qe*.15,top:qe*.85+Ae})),_(w,"class","floater svelte-1eprj6g"),_(w,"style",te=i[23]({top:i[22]+i[21].height*.5,height:0},{left:Le,width:i[26]*.82},{})),_(I,"class","floater svelte-1eprj6g"),_(I,"id","right-control"),_(I,"style",O=i[23]({top:i[22],height:i[21].height},{right:Le,width:100-i[21].width-i[26]-Le-Le},{}))},m(a,d){q(a,e,d),Ee(t,e,null),B(e,l),Ee(o,e,null),q(a,r,d),q(a,s,d),B(s,c),B(c,u),q(a,g,d),q(a,k,d),D&&D.m(k,null),q(a,y,d),q(a,w,d),Ee(R,w,null),q(a,U,d),q(a,I,d),Ee(W,I,null),B(I,K),Ee(S,I,null),q(a,P,d);for(let J=0;J<z.length;J+=1)z[J]&&z[J].m(a,d);q(a,E,d),T&&T.m(a,d),q(a,X,d),C&&C.m(a,d),q(a,re,d),N&&N.m(a,d),q(a,ne,d),A=!0},p(a,d){const J={};d[0]&16&&(J.qcSpec=a[4]),d[0]&4096&&(J.branchReachBack=a[12]*qe/100),d[0]&4&&(J.attributeLabels=a[2]),d[0]&8192&&(J.visibleTreeInfo=a[13]),d[0]&1024&&(J.selectionState=a[10]),d[0]&524288&&(J.levelOutSpecs=a[19]),d[0]&16777216&&(J.childD1Rate=a[24]),t.$set(J),st(l,Y=ct(ae,[{id:"qc-header"},d[0]&2097152&&a[21],{rx:"0.4"}])),lt(l,"svelte-1eprj6g",!0);const fe={};d[0]&2097152&&(fe.height=a[21].height*.7),d[0]&2097152&&(fe.width=a[21].width*.8),d[0]&2&&(fe.text=a[1]||""),d[0]&2097152&&(fe.x=a[21].x+a[21].width/2),d[0]&2097152&&(fe.y=a[21].y+a[21].height*.75),o.$set(fe),(!A||d[0]&1048576&&n!==(n=a[20].x+" "+a[20].y+" "+a[20].width+" "+a[20].height))&&_(e,"viewBox",n),(!A||d[0]&8)&&Fe(u,a[3]),(!A||d[0]&8388608&&h!==(h=a[23]({top:0},{left:20,width:60},{height:Ae})))&&_(s,"style",h),a[9].weight>1?D?D.p(a,d):(D=Et(a),D.c(),D.m(k,null)):D&&(D.d(1),D=null),(!A||d[0]&10485760&&f!==(f=a[23]({},{left:a[21].x-a[21].width/2,width:a[21].width*2},{height:qe*.15,top:qe*.85+Ae})))&&_(k,"style",f);const Ie={};!ee&&d[0]&128&&(ee=!0,Ie.value=a[7],Ye(()=>ee=!1)),R.$set(Ie),(!A||d[0]&14680064&&te!==(te=a[23]({top:a[22]+a[21].height*.5,height:0},{left:Le,width:a[26]*.82},{})))&&_(w,"style",te);const ke={};d[2]&2&&(ke.$$scope={dirty:d,ctx:a}),!ie&&d[0]&131072&&(ie=!0,ke.hoverToggle=a[17],Ye(()=>ie=!1)),!le&&d[0]&256&&(le=!0,ke.checked=a[8],Ye(()=>le=!1)),W.$set(ke);const me={};if(d[0]&1|d[2]&2&&(me.$$scope={dirty:d,ctx:a}),!b&&d[0]&262144&&(b=!0,me.hoverToggle=a[18],Ye(()=>b=!1)),S.$set(me),(!A||d[0]&14680064&&O!==(O=a[23]({top:a[22],height:a[21].height},{right:Le,width:100-a[21].width-a[26]-Le-Le},{})))&&_(I,"style",O),d[0]&15206400){ve=Te(a[19]||[]);let M;for(M=0;M<ve.length;M+=1){const et=Dt(a,ve,M);z[M]?(z[M].p(et,d),j(z[M],1)):(z[M]=Ct(et),z[M].c(),j(z[M],1),z[M].m(E.parentNode,E))}for(Ge(),M=ve.length;M<z.length;M+=1)v(M);Ue()}a[15].length>0?T?(T.p(a,d),d[0]&32768&&j(T,1)):(T=Lt(a),T.c(),j(T,1),T.m(X.parentNode,X)):T&&(Ge(),G(T,1,1,()=>{T=null}),Ue()),a[17]?C?C.p(a,d):(C=Pt(a),C.c(),C.m(re.parentNode,re)):C&&(C.d(1),C=null),a[18]?N?N.p(a,d):(N=jt(a),N.c(),N.m(ne.parentNode,ne)):N&&(N.d(1),N=null)},i(a){if(!A){j(t.$$.fragment,a),j(o.$$.fragment,a),j(R.$$.fragment,a),j(W.$$.fragment,a),j(S.$$.fragment,a);for(let d=0;d<ve.length;d+=1)j(z[d]);j(T),A=!0}},o(a){G(t.$$.fragment,a),G(o.$$.fragment,a),G(R.$$.fragment,a),G(W.$$.fragment,a),G(S.$$.fragment,a),z=z.filter(Boolean);for(let d=0;d<z.length;d+=1)G(z[d]);G(T),A=!1},d(a){a&&(p(e),p(r),p(s),p(g),p(k),p(y),p(w),p(U),p(I),p(P),p(E),p(X),p(re),p(ne)),ze(t),ze(o),D&&D.d(),ze(R),ze(W),ze(S),at(z,a),T&&T.d(a),C&&C.d(a),N&&N.d(a)}}}function Et(i){let e,t,l=tt(i[9].source_count||0,0)+"",o,n,r=tt(i[9].weight||0,0)+"",s,c;return{c(){e=Q("p"),t=oe("("),o=oe(l),n=oe(" papers, "),s=oe(r),c=oe(" citations)"),this.h()},l(u){e=V(u,"P",{id:!0,class:!0});var h=L(e);t=ce(h,"("),o=ce(h,l),n=ce(h," papers, "),s=ce(h,r),c=ce(h," citations)"),h.forEach(p),this.h()},h(){_(e,"id","num-stat-subtitle"),_(e,"class","svelte-1eprj6g")},m(u,h){q(u,e,h),B(e,t),B(e,o),B(e,n),B(e,s),B(e,c)},p(u,h){h[0]&512&&l!==(l=tt(u[9].source_count||0,0)+"")&&Fe(o,l),h[0]&512&&r!==(r=tt(u[9].weight||0,0)+"")&&Fe(s,r)},d(u){u&&p(e)}}}function mi(i){let e;return{c(){e=oe("Specialization")},l(t){e=ce(t,"Specialization")},m(t,l){q(t,e,l)},d(t){t&&p(e)}}}function zt(i){let e,t=i[60]+"",l;return{c(){e=Q("option"),l=oe(t),this.h()},l(o){e=V(o,"OPTION",{});var n=L(e);l=ce(n,t),n.forEach(p),this.h()},h(){e.__value=i[60],Xe(e,e.__value)},m(o,n){q(o,e,n),B(e,l)},p:Zt,d(o){o&&p(e)}}}function yi(i){let e,t,l,o,n=Te(i[25]),r=[];for(let s=0;s<n.length;s+=1)r[s]=zt(Rt(i,n,s));return{c(){e=oe(`Since
			`),t=Q("select");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=ce(s,`Since
			`),t=V(s,"SELECT",{});var c=L(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(p),this.h()},h(){i[0]===void 0&&Qe(()=>i[42].call(t))},m(s,c){q(s,e,c),q(s,t,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);ot(t,i[0],!0),l||(o=pe(t,"change",i[42]),l=!0)},p(s,c){if(c[0]&33554432){n=Te(s[25]);let u;for(u=0;u<n.length;u+=1){const h=Rt(s,n,u);r[u]?r[u].p(h,c):(r[u]=zt(h),r[u].c(),r[u].m(t,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}c[0]&33554433&&ot(t,s[0])},d(s){s&&(p(e),p(t)),at(r,s),l=!1,o()}}}function Ct(i){let e,t,l;function o(r){i[44](r)}let n={index:i[59],levelSpec:i[57],totalD1Offset:i[21].height+i[22],dBasedStyle:i[23]};return i[11]!==void 0&&(n.selectedBreakdowns=i[11]),e=new pi({props:n}),We.push(()=>Je(e,"selectedBreakdowns",o)),{c(){Re(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,s){Ee(e,r,s),l=!0},p(r,s){const c={};s[0]&524288&&(c.levelSpec=r[57]),s[0]&6291456&&(c.totalD1Offset=r[21].height+r[22]),s[0]&8388608&&(c.dBasedStyle=r[23]),!t&&s[0]&2048&&(t=!0,c.selectedBreakdowns=r[11],Ye(()=>t=!1)),e.$set(c)},i(r){l||(j(e.$$.fragment,r),l=!0)},o(r){G(e.$$.fragment,r),l=!1},d(r){ze(e,r)}}}function Lt(i){let e,t,l,o,n,r,s;return t=new oi({props:{path:i[15],weightedRoot:i[9],qcSpec:i[4],rootId:i[16],attributeLabels:i[2],showPaper:i[14]}}),{c(){e=Q("div"),Re(t.$$.fragment),this.h()},l(c){e=V(c,"DIV",{class:!0,style:!0});var u=L(e);Be(t.$$.fragment,u),u.forEach(p),this.h()},h(){_(e,"class","hoverover clickable svelte-1eprj6g"),_(e,"style",l=i[23]({},{right:2,width:96},{bottom:1,height:ft/(i[14]?.5:2)}))},m(c,u){q(c,e,u),Ee(t,e,null),n=!0,r||(s=pe(e,"click",i[45]),r=!0)},p(c,u){const h={};u[0]&32768&&(h.path=c[15]),u[0]&512&&(h.weightedRoot=c[9]),u[0]&16&&(h.qcSpec=c[4]),u[0]&65536&&(h.rootId=c[16]),u[0]&4&&(h.attributeLabels=c[2]),u[0]&16384&&(h.showPaper=c[14]),t.$set(h),(!n||u[0]&8404992&&l!==(l=c[23]({},{right:2,width:96},{bottom:1,height:ft/(c[14]?.5:2)})))&&_(e,"style",l)},i(c){n||(j(t.$$.fragment,c),c&&Qe(()=>{n&&(o||(o=Pe(e,je,{duration:200},!0)),o.run(1))}),n=!0)},o(c){G(t.$$.fragment,c),c&&(o||(o=Pe(e,je,{duration:200},!1)),o.run(0)),n=!1},d(c){c&&p(e),ze(t),c&&o&&o.end(),r=!1,s()}}}function Pt(i){let e,t,l;return{c(){e=Q("div"),t=oe(`Specialization is calculated using the expected prevelance of a country, source, or concept,
			and comparing it to the one present in the current breakdown flow. If it is switched off, the
			sheer volume of citations is considered.`),this.h()},l(o){e=V(o,"DIV",{class:!0,id:!0,style:!0});var n=L(e);t=ce(n,`Specialization is calculated using the expected prevelance of a country, source, or concept,
			and comparing it to the one present in the current breakdown flow. If it is switched off, the
			sheer volume of citations is considered.`),n.forEach(p),this.h()},h(){_(e,"class","floater hoverover svelte-1eprj6g"),_(e,"id","spec-hover"),_(e,"style",l=i[23]({top:i[22]+i[21].height},{left:i[26]+i[21].width*.2,width:i[21].width*1.6},{}))},m(o,n){q(o,e,n),B(e,t)},p(o,n){n[0]&14680064&&l!==(l=o[23]({top:o[22]+o[21].height},{left:o[26]+o[21].width*.2,width:o[21].width*1.6},{}))&&_(e,"style",l)},d(o){o&&p(e)}}}function jt(i){let e,t,l,o,n;return{c(){e=Q("div"),t=oe("Filter the underlying dataset to papers published in or after "),l=oe(i[0]),o=oe("."),this.h()},l(r){e=V(r,"DIV",{class:!0,id:!0,style:!0});var s=L(e);t=ce(s,"Filter the underlying dataset to papers published in or after "),l=ce(s,i[0]),o=ce(s,"."),s.forEach(p),this.h()},h(){_(e,"class","floater hoverover svelte-1eprj6g"),_(e,"id","spec-hover"),_(e,"style",n=i[23]({top:i[22]+i[21].height*1.1},{left:i[26]+i[21].width*.2,width:i[21].width*1.6},{}))},m(r,s){q(r,e,s),B(e,t),B(e,l),B(e,o)},p(r,s){s[0]&1&&Fe(l,r[0]),s[0]&14680064&&n!==(n=r[23]({top:r[22]+r[21].height*1.1},{left:r[26]+r[21].width*.2,width:r[21].width*1.6},{}))&&_(e,"style",n)},d(r){r&&p(e)}}}function vi(i){let e=!Object.values(i[20]).includes(NaN)&&!Object.values(i[20]).includes(void 0),t,l,o,n;Qe(i[38]);let r=e&&Bt(i);return{c(){r&&r.c(),t=Oe()},l(s){r&&r.l(s),t=Oe()},m(s,c){r&&r.m(s,c),q(s,t,c),l=!0,o||(n=pe(window,"resize",i[38]),o=!0)},p(s,c){c[0]&1048576&&(e=!Object.values(s[20]).includes(NaN)&&!Object.values(s[20]).includes(void 0)),e?r?(r.p(s,c),c[0]&1048576&&j(r,1)):(r=Bt(s),r.c(),j(r,1),r.m(t.parentNode,t)):r&&(Ge(),G(r,1,1,()=>{r=null}),Ue())},i(s){l||(j(r),l=!0)},o(s){G(r),l=!1},d(s){s&&p(t),r&&r.d(s),o=!1,n()}}}const ki=2004;let wi=.3,Ke=100,ht=25,rt=0,Le=3,Ae=9,ft=20,qe=11,Si=.05,qi=2.5,Oi=15;function Ti(i,e){return(t,l,o)=>[[t||{},i,"px"],[l||{},e,"px"],[o||{},n=>n,"svh"]].map(([n,r,s])=>Object.entries(n).map(([c,u])=>`${c}: ${r(u)}${s};`).join("")).join("")}function Ii(i,e,t){let l,o,n,r,s,c,u,h,g,k,f;const y=[2004,2019,2020,2021,2022,2023];let{defaultQcSpecId:w}=e,{selectedQcRootId:R}=e,{rootType:ee}=e,{attributeLabels:te}=e,{fullQcSpecs:U}=e,{removeHighlightUnhover:I=!0}=e,{startSentence:W="Scholars at"}=e,{specFilterYear:ie=2004}=e,{rootName:le=""}=e,K=!1,S,b,O=[],P=R,E,X,re,ne=(Ke-ht)/2.5,A=!1,ae=!1,Y=Array(it).fill(0).map(()=>({totalSize:0,topOffset:0,levelOptions:[],isVisible:!1})),D=Array(it).fill(0).map(()=>({...pt})),ge=pt.limit_n,be=!0,ye={weight:1,source_count:1,top_source:[0,0]},ue={children:{}},we,Se=Ve(w,U);function Ve(m,H){var he;if(m==null)return[];const F=[],De=H[m];for(let Z=0;Z<it;Z++)F.push(((he=De.bifurcations[Z])==null?void 0:he.description)||"");return F}function ve(m,H){let F={};for(let[De,he]of Object.entries(m))if(he.root_entity_type==H){t(28,U[De]=he,U);let Z=F;for(let Ce of he.bifurcations){const se=Ce.description;se in Z||(Z[se]={children:{},qcSpecs:[]}),Z[se].qcSpecs.push(De),Z=Z[se].children}}return F}function z(m){for(let H in D)t(33,D[H].limit_n=m,D)}function v(m){for(let H in D)t(33,D[H].size_base=m?"specialization":"volume",D)}function T(m,H,F,De,he){if(t(14,K=!1),H==null||m.length==0)return;let Z=0,Ce=o,se;for(let de of m){if(se=Ce[de],se===void 0)return;if(se.qcSpecs.includes(S))Z++;else break;Ce=se.children}for(S=(se==null?void 0:se.qcSpecs[0])||"";m.length>0;)m.pop();for(let de of U[S].bifurcations)m.push(de.description);for(let de=Z;de<D.length;de++)t(33,D[de].include=[],D);we=De[F][R],ii(`qc-builds/${he}/${S}/${H}`,de=>{t(9,[ye,ue,b,P,le]=[de,ri(ni(ue,Z),de),U[S],H,we==null?void 0:we.name],ye,t(10,ue),t(4,b),t(16,P),t(1,le))})}function C(m,H,F,De,he){var _t;if(t(14,K=!1),he.length==0)return;let Z=1;for(let _e of(m.meta||[]).slice(2))_e.totalNodes>0&&Z++;let Ce=De,se=0;const de=F===void 0?H/Z:H/Z/2;for(let _e=0;_e<it;_e++)t(19,Y[_e].totalSize=F==_e?H/2+de:de,Y),t(19,Y[_e].topOffset=se,Y),t(19,Y[_e].levelOptions=Object.keys(Ce),Y),t(19,Y[_e].isVisible=_e<Z,Y),se+=Y[_e].totalSize,_e==Z-1&&(se+=H/2),Ce=((_t=Ce[he[_e]])==null?void 0:_t.children)||{}}function N(m){var he;const H=m[m.length-1];let F=Vt(m.slice(0,m.length-1),ue);if((F==null?void 0:F.children)===void 0)return;Object.keys(F.children).includes(H)?(delete F.children[H],si(ue)):F.children[H]={children:((he=F.children[H])==null?void 0:he.children)||{}},t(14,K=!1),t(10,ue)}function a(m){const H=m.detail.path,F=m.detail.action;if(F=="highlight"){t(15,O=H),t(14,K=!1);return}else if(F=="de-highlight"){I&&t(15,O=[]);return}N(H)}function d(){t(6,re=window.innerWidth),t(5,X=window.innerHeight)}function J(m){ge=m,t(7,ge)}function fe(m){A=m,t(17,A)}function Ie(m){be=m,t(8,be)}function ke(){ie=Ht(this),t(0,ie),t(25,y)}function me(m){ae=m,t(18,ae)}function M(m){Se=m,t(11,Se)}const et=()=>{t(14,K=!K)};return i.$$set=m=>{"defaultQcSpecId"in m&&t(29,w=m.defaultQcSpecId),"selectedQcRootId"in m&&t(30,R=m.selectedQcRootId),"rootType"in m&&t(31,ee=m.rootType),"attributeLabels"in m&&t(2,te=m.attributeLabels),"fullQcSpecs"in m&&t(28,U=m.fullQcSpecs),"removeHighlightUnhover"in m&&t(32,I=m.removeHighlightUnhover),"startSentence"in m&&t(3,W=m.startSentence),"specFilterYear"in m&&t(0,ie=m.specFilterYear),"rootName"in m&&t(1,le=m.rootName)},i.$$.update=()=>{i.$$.dirty[0]&1&&t(35,l=ie==ki?"all":`y-${ie}`),i.$$.dirty[0]&268435456|i.$$.dirty[1]&1&&t(34,o=ve(U,ee)),i.$$.dirty[0]&96&&t(12,r=X/re*Ke),i.$$.dirty[0]&4128&&t(37,s=m=>m*X/r),i.$$.dirty[0]&64&&t(36,c=m=>m*re/Ke),i.$$.dirty[1]&96&&t(23,u=Ti(s,c)),i.$$.dirty[0]&4096&&t(22,h=Ae*r/100),i.$$.dirty[0]&4096&&t(21,g={height:r*qe/100,width:ht,x:ne+rt,y:-r*qe/100}),i.$$.dirty[0]&4096&&t(20,k={height:r,width:Ke,x:0,y:-(qe+Ae)*r/100}),i.$$.dirty[0]&1073743876|i.$$.dirty[1]&17&&T(Se,R,ee,te,l),i.$$.dirty[0]&128&&z(ge),i.$$.dirty[0]&256&&v(be),i.$$.dirty[0]&1556|i.$$.dirty[1]&4&&t(13,f=ti(ye,D,ue,te,b)),i.$$.dirty[0]&14336|i.$$.dirty[1]&8&&C(f,r*(1-(qe+ft)/100),E,o,Se)},t(24,n=wi),[ie,le,te,W,b,X,re,ge,be,ye,ue,Se,r,f,K,O,P,A,ae,Y,k,g,h,u,n,y,ne,a,U,w,R,ee,I,D,o,l,c,s,d,J,fe,Ie,ke,me,M,et]}class Ni extends xe{constructor(e){super(),$e(this,e,Ii,vi,Ze,{defaultQcSpecId:29,selectedQcRootId:30,rootType:31,attributeLabels:2,fullQcSpecs:28,removeHighlightUnhover:32,startSentence:3,specFilterYear:0,rootName:1},null,[-1,-1,-1])}}export{Ni as F,Vi as f};

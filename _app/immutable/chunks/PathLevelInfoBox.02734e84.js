import{s as Le,e as fe,i as w,z as Ee,d as v,f as D,a as A,l as _,g as I,h as C,c as L,m as d,j as J,y as s,n as B,B as He,D as Ae}from"./scheduler.a7e79a28.js";import{e as ce}from"./each.fd848201.js";import{S as je,i as ze}from"./index.ef959f59.js";import{f as q}from"./text-format-util.619db8fe.js";import{c as Ke,e as Se,f as Te,g as Ge,s as Ue,i as ke}from"./tree-loading.7e77adea.js";function Ce(i,e,t){const n=i.slice();return n[21]=e[t].baseKind,n[22]=e[t].specMetricObj,n}function Re(i,e,t){const n=i.slice();return n[25]=e[t],n}function Fe(i){let e,t,n,l,a,r,c=i[7].desc+"",f,o,h,u,k=q(i[7].num)+"",R,M,y,b,p=(i[7].num/i[7].comparison).toFixed(2)+"",g,K,W=q(i[7].comparison)+"",Q,ee,te,m,N,F=ye(i[6].specMetric)+"",V,z,G,H,X=(i[6].nodeRate*100).toFixed(2)+"",U,ue,he,T,_e,le=(i[6].baselineRate*100).toFixed(2)+"",oe,de,ie=q(i[6].nodeDivisor*i[6].baselineRate)+"",se,me,ve;function De(E,S){return E[4]==0?We:qe}let ae=De(i),j=ae(i),O=i[7].num>1&&Be(),P=i[4]>0&&Oe(i);return{c(){e=D("div"),t=D("div"),j.c(),n=A(),l=D("div"),a=D("div"),r=D("h3"),f=_(c),o=_(" Volume"),h=A(),u=D("p"),R=_(k),M=_(" citation"),O&&O.c(),y=A(),b=D("p"),g=_(p),K=_(" times the average of "),Q=_(W),ee=_(" among siblings"),te=A(),m=D("div"),N=D("h3"),V=_(F),z=_(" Specialization"),G=A(),H=D("p"),U=_(X),ue=_("% of impact"),he=A(),T=D("p"),_e=_("around "),oe=_(le),de=_("%, "),se=_(ie),me=_(" citations expected"),ve=A(),P&&P.c(),this.h()},l(E){e=I(E,"DIV",{class:!0});var S=C(e);t=I(S,"DIV",{class:!0});var Ie=C(t);j.l(Ie),Ie.forEach(v),n=L(S),l=I(S,"DIV",{class:!0});var Y=C(l);a=I(Y,"DIV",{class:!0});var Z=C(a);r=I(Z,"H3",{});var be=C(r);f=d(be,c),o=d(be," Volume"),be.forEach(v),h=L(Z),u=I(Z,"P",{});var re=C(u);R=d(re,k),M=d(re," citation"),O&&O.l(re),re.forEach(v),y=L(Z),b=I(Z,"P",{});var ne=C(b);g=d(ne,p),K=d(ne," times the average of "),Q=d(ne,W),ee=d(ne," among siblings"),ne.forEach(v),Z.forEach(v),te=L(Y),m=I(Y,"DIV",{class:!0});var x=C(m);N=I(x,"H3",{});var pe=C(N);V=d(pe,F),z=d(pe," Specialization"),pe.forEach(v),G=L(x),H=I(x,"P",{});var ge=C(H);U=d(ge,X),ue=d(ge,"% of impact"),ge.forEach(v),he=L(x),T=I(x,"P",{});var $=C(T);_e=d($,"around "),oe=d($,le),de=d($,"%, "),se=d($,ie),me=d($," citations expected"),$.forEach(v),x.forEach(v),ve=L(Y),P&&P.l(Y),Y.forEach(v),S.forEach(v),this.h()},h(){J(t,"class","title-row svelte-ka69g"),J(a,"class","svelte-ka69g"),J(m,"class","svelte-ka69g"),J(l,"class","detail-cols svelte-ka69g"),J(e,"class","box-container svelte-ka69g")},m(E,S){w(E,e,S),s(e,t),j.m(t,null),s(e,n),s(e,l),s(l,a),s(a,r),s(r,f),s(r,o),s(a,h),s(a,u),s(u,R),s(u,M),O&&O.m(u,null),s(a,y),s(a,b),s(b,g),s(b,K),s(b,Q),s(b,ee),s(l,te),s(l,m),s(m,N),s(N,V),s(N,z),s(m,G),s(m,H),s(H,U),s(H,ue),s(m,he),s(m,T),s(T,_e),s(T,oe),s(T,de),s(T,se),s(T,me),s(l,ve),P&&P.m(l,null)},p(E,S){ae===(ae=De(E))&&j?j.p(E,S):(j.d(1),j=ae(E),j&&(j.c(),j.m(t,null))),S&128&&c!==(c=E[7].desc+"")&&B(f,c),S&128&&k!==(k=q(E[7].num)+"")&&B(R,k),E[7].num>1?O||(O=Be(),O.c(),O.m(u,null)):O&&(O.d(1),O=null),S&128&&p!==(p=(E[7].num/E[7].comparison).toFixed(2)+"")&&B(g,p),S&128&&W!==(W=q(E[7].comparison)+"")&&B(Q,W),S&64&&F!==(F=ye(E[6].specMetric)+"")&&B(V,F),S&64&&X!==(X=(E[6].nodeRate*100).toFixed(2)+"")&&B(U,X),S&64&&le!==(le=(E[6].baselineRate*100).toFixed(2)+"")&&B(oe,le),S&64&&ie!==(ie=q(E[6].nodeDivisor*E[6].baselineRate)+"")&&B(se,ie),E[4]>0?P?P.p(E,S):(P=Oe(E),P.c(),P.m(l,null)):P&&(P.d(1),P=null)},d(E){E&&v(e),j.d(),O&&O.d(),P&&P.d()}}}function qe(i){let e,t,n=i[3][i[2].root_entity_type][i[0]].name+"",l,a,r,c=ce(i[5]),f=[];for(let o=0;o<c.length;o+=1)f[o]=Pe(Re(i,c,o));return{c(){e=D("h2"),t=_("Papers published by "),l=_(n),a=A();for(let o=0;o<f.length;o+=1)f[o].c();r=fe()},l(o){e=I(o,"H2",{});var h=C(e);t=d(h,"Papers published by "),l=d(h,n),h.forEach(v),a=L(o);for(let u=0;u<f.length;u+=1)f[u].l(o);r=fe()},m(o,h){w(o,e,h),s(e,t),s(e,l),w(o,a,h);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(o,h);w(o,r,h)},p(o,h){if(h&13&&n!==(n=o[3][o[2].root_entity_type][o[0]].name+"")&&B(l,n),h&32){c=ce(o[5]);let u;for(u=0;u<c.length;u+=1){const k=Re(o,c,u);f[u]?f[u].p(k,h):(f[u]=Pe(k),f[u].c(),f[u].m(r.parentNode,r))}for(;u<f.length;u+=1)f[u].d(1);f.length=c.length}},d(o){o&&(v(e),v(a),v(r)),Ae(f,o)}}}function We(i){let e,t=ke(i[1],i[3],i[2])+"",n;return{c(){e=D("h2"),n=_(t)},l(l){e=I(l,"H2",{});var a=C(e);n=d(a,t),a.forEach(v)},m(l,a){w(l,e,a),s(e,n)},p(l,a){a&14&&t!==(t=ke(l[1],l[3],l[2])+"")&&B(n,t)},d(l){l&&v(e)}}}function Pe(i){let e,t,n=i[25].prefixStr+"",l,a,r=i[25].entityName+"",c,f;return{c(){e=D("div"),t=D("h2"),l=_(n),a=A(),c=_(r),f=A(),this.h()},l(o){e=I(o,"DIV",{class:!0});var h=C(e);t=I(h,"H2",{});var u=C(t);l=d(u,n),a=L(u),c=d(u,r),u.forEach(v),f=L(h),h.forEach(v),this.h()},h(){J(e,"class","title-elem svelte-ka69g")},m(o,h){w(o,e,h),s(e,t),s(t,l),s(t,a),s(t,c),s(e,f)},p(o,h){h&32&&n!==(n=o[25].prefixStr+"")&&B(l,n),h&32&&r!==(r=o[25].entityName+"")&&B(c,r)},d(o){o&&v(e)}}}function Be(i){let e;return{c(){e=_("s")},l(t){e=d(t,"s")},m(t,n){w(t,e,n)},d(t){t&&v(e)}}}function Oe(i){let e,t,n="Specialization Details",l,a=ce(i[8]),r=[];for(let c=0;c<a.length;c+=1)r[c]=Me(Ce(i,a,c));return{c(){e=D("div"),t=D("h3"),t.textContent=n,l=A();for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=I(c,"DIV",{class:!0});var f=C(e);t=I(f,"H3",{"data-svelte-h":!0}),He(t)!=="svelte-1lmyn4z"&&(t.textContent=n),l=L(f);for(let o=0;o<r.length;o+=1)r[o].l(f);f.forEach(v),this.h()},h(){J(e,"class","svelte-ka69g")},m(c,f){w(c,e,f),s(e,t),s(e,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(c,f){if(f&256){a=ce(c[8]);let o;for(o=0;o<a.length;o+=1){const h=Ce(c,a,o);r[o]?r[o].p(h,f):(r[o]=Me(h),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=a.length}},d(c){c&&v(e),Ae(r,c)}}}function Xe(i){let e,t=i[21].basis+"",n;return{c(){e=_("Institutions in the same "),n=_(t)},l(l){e=d(l,"Institutions in the same "),n=d(l,t)},m(l,a){w(l,e,a),w(l,n,a)},p(l,a){a&256&&t!==(t=l[21].basis+"")&&B(n,t)},d(l){l&&(v(e),v(n))}}}function Je(i){let e;return{c(){e=_("all other Institutions")},l(t){e=d(t,"all other Institutions")},m(t,n){w(t,e,n)},p:Ee,d(t){t&&v(e)}}}function we(i){let e,t=i[21].hierarchy+"",n;return{c(){e=_("when citing papers belong to the same "),n=_(t)},l(l){e=d(l,"when citing papers belong to the same "),n=d(l,t)},m(l,a){w(l,e,a),w(l,n,a)},p(l,a){a&256&&t!==(t=l[21].hierarchy+"")&&B(n,t)},d(l){l&&(v(e),v(n))}}}function Me(i){let e,t,n,l,a=q(i[22].nodeDivisor*i[22].baselineRate)+"",r,c,f,o=(i[22].specMetric*100).toFixed(2)+"",h,u,k;function R(p,g){return p[21].basis=="Global"?Je:Xe}let M=R(i),y=M(i),b=i[21].hierarchy!="Global"&&we(i);return{c(){e=D("p"),t=_("Based on the impact rate of "),y.c(),n=A(),b&&b.c(),l=_(" we expect "),r=_(a),c=_(`
							citations, the true number is `),f=D("b"),h=_(o),u=_("%"),k=_(`
							of this
						`)},l(p){e=I(p,"P",{});var g=C(e);t=d(g,"Based on the impact rate of "),y.l(g),n=L(g),b&&b.l(g),l=d(g," we expect "),r=d(g,a),c=d(g,`
							citations, the true number is `),f=I(g,"B",{});var K=C(f);h=d(K,o),u=d(K,"%"),K.forEach(v),k=d(g,`
							of this
						`),g.forEach(v)},m(p,g){w(p,e,g),s(e,t),y.m(e,null),s(e,n),b&&b.m(e,null),s(e,l),s(e,r),s(e,c),s(e,f),s(f,h),s(f,u),s(e,k)},p(p,g){M===(M=R(p))&&y?y.p(p,g):(y.d(1),y=M(p),y&&(y.c(),y.m(e,n))),p[21].hierarchy!="Global"?b?b.p(p,g):(b=we(p),b.c(),b.m(e,l)):b&&(b.d(1),b=null),g&256&&a!==(a=q(p[22].nodeDivisor*p[22].baselineRate)+"")&&B(r,a),g&256&&o!==(o=(p[22].specMetric*100).toFixed(2)+"")&&B(h,o)},d(p){p&&v(e),y.d(),b&&b.d()}}}function Qe(i){let e,t=i[1]!=null&&Fe(i);return{c(){t&&t.c(),e=fe()},l(n){t&&t.l(n),e=fe()},m(n,l){t&&t.m(n,l),w(n,e,l)},p(n,[l]){n[1]!=null?t?t.p(n,l):(t=Fe(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ee,o:Ee,d(n){n&&v(e),t&&t.d(n)}}}const Ne="Where the original paper was categorized as",Ve="Cited by paper published";function Ye(i,e){const t=(i==null?void 0:i.weight)||0,n=((e==null?void 0:e.weight)||0)/Object.keys((e==null?void 0:e.children)||{}).length,l=t/n;return{num:t,comparison:n,rate:l,desc:ye(l)}}function ye(i){let e="Average";return i>1.2?e="High":i<.75&&(e="Low"),e}function Ze(i,e,t){let n,l,a,r,c,f,o,h,{rootId:u}=e,{path:k}=e,{qcSpec:R}=e,{attributeLabels:M}=e,{weightedRoot:y}=e,{specBaselineOptions:b}=e,{levelOfDetail:p=0}=e;const g=Ve+" in",K=Ve+" by",W={Country:g,Continent:g,Institution:K,Concept:Ne,SubConcept:Ne};function Q(m,N){if((R==null?void 0:R.root_entity_type)===void 0)return[];const F=[N];for(let V=0;V<m.length;V++){const z=m.slice(0,V+1);F.push(Ge(z,N)||{weight:0})}return F}function ee(m,N,F,V,z,G){const H=[];if(p>0)for(const X of Object.keys(z)){const U=Ue(X);U.target==n&&H.push({baseKind:U,specMetricObj:Se(m,U,N,F,V,z,G)})}return H}function te(m){const N=[];for(let F=0;F<k.length;F++){let V=m.bifurcations[F],z=m.bifurcations[F+1];if(F==k.length-1||V.resolver_id!=z.resolver_id){const G=V.attribute_kind,H=ke(k.slice(0,F+1),M,m);N.push({entityType:G,prefixStr:W[G],entityName:H})}}return N}return i.$$set=m=>{"rootId"in m&&t(0,u=m.rootId),"path"in m&&t(1,k=m.path),"qcSpec"in m&&t(2,R=m.qcSpec),"attributeLabels"in m&&t(3,M=m.attributeLabels),"weightedRoot"in m&&t(9,y=m.weightedRoot),"specBaselineOptions"in m&&t(10,b=m.specBaselineOptions),"levelOfDetail"in m&&t(4,p=m.levelOfDetail)},i.$$.update=()=>{i.$$.dirty&6&&t(11,n=Ke(k,R)),i.$$.dirty&514&&t(14,l=Q(k||[],y)),i.$$.dirty&1551&&t(8,a=ee(y,k,u,R,b,M)),i.$$.dirty&16384&&t(12,r=l[l.length-2]),i.$$.dirty&16384&&t(13,c=l[l.length-1]),i.$$.dirty&12288&&t(7,f=Ye(c,r)),i.$$.dirty&3599&&t(6,o=Se(y,Te[n],k,u,R,b,M)),i.$$.dirty&4&&t(5,h=te(R))},[u,k,R,M,p,h,o,f,a,y,b,n,r,c,l]}class it extends je{constructor(e){super(),ze(this,e,Ze,Qe,Le,{rootId:0,path:1,qcSpec:2,attributeLabels:3,weightedRoot:9,specBaselineOptions:10,levelOfDetail:4})}}export{it as P};

import{s as Xe,e as Se,i as O,d as p,N as Ft,O as it,r as Pe,a as Z,u as je,h as L,c as x,j as _,P as rt,Q as nt,w as E,x as pe,R as ct,A as Me,y as ot,z as ht,S as Nt,f as Q,g as V,J as jt,H as Ke,T as Gt,l as ce,m as ae,n as Fe,k as Ut,U as st,V as Mt,C as Wt,E as Yt,F as Jt,G as Kt,p as Ue,D as We,v as Xt}from"./scheduler.2d1c82f4.js";import{S as Ze,i as xe,g as Ne,c as Ge,a as j,t as U,b as Ie,d as De,m as Re,h as Ce,e as Be,f as Ye}from"./index.bf293594.js";import{e as qe,u as Zt,o as xt}from"./each.66af19a5.js";import{g as lt,a as Ht,b as $t}from"./style-util.70c21ca4.js";import{f as Le}from"./index.e8025cb1.js";import{g as Qt,D as _t,d as ei,a as ti,b as ii,p as ri,c as ni}from"./tree-functions.2607c0ac.js";import{f as $e}from"./text-format-util.e81a9716.js";import{M as et}from"./constants.8d8a1d0f.js";import{B as Vt}from"./BrokenFittedText.2ee271a1.js";import{g as si}from"./visual-util.fb52d494.js";/* empty css                                             */import{P as li}from"./PathLevelInfoBox.d0ec457a.js";const Qi={"qc-6c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-8":{bifurcations:[{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0}],root_entity_type:"institutions"},"qc-5c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1}],root_entity_type:"countries"},"qc-7":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"0-country-hierarchy-1",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0}],root_entity_type:"institutions"},"qc-2c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-3c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-7c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"0-country-hierarchy-1",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0}],root_entity_type:"countries"},"qc-6":{bifurcations:[{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-8c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0}],root_entity_type:"countries"},"qc-1c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"countries"},"qc-4":{bifurcations:[{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-2":{bifurcations:[{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-4c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1}],root_entity_type:"countries"},"qc-3":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"institutions"},"qc-5":{bifurcations:[{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1}],root_entity_type:"institutions"},"qc-1":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"institutions"}};function Ve(i,e,t,l,o){return()=>{i("ti",{path:t,action:e,topLeftCorner:{x:l,y:o}})}}function pt(i,e,t){const l=i.slice();return l[43]=e[t].id,l[44]=e[t].cachedProps,l[45]=e[t].vizInfo,l[46]=e[t].childNode,l[47]=e[t].textShape,l[48]=e[t].hoverShape,l}function gt(i,e,t){const l=i.slice();return l[51]=e[t][0],l[52]=e[t][1],l}function bt(i){let e,t,l;return{c(){e=Pe("stop"),this.h()},l(o){e=je(o,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),L(e).forEach(p),this.h()},h(){_(e,"offset",i[51]+"%"),_(e,"stop-opacity",t=i[46].isSelected?"80%":`${i[52]}%`),_(e,"stop-color",l=i[45].colorStr),_(e,"class","svelte-1cwbp37")},m(o,n){O(o,e,n)},p(o,n){n[0]&8192&&t!==(t=o[46].isSelected?"80%":`${o[52]}%`)&&_(e,"stop-opacity",t),n[0]&8192&&l!==(l=o[45].colorStr)&&_(e,"stop-color",l)},d(o){o&&p(e)}}}function mt(i){let e,t;const l=[i[44],{qcSpec:i[0]},{attributeLabels:i[1]},{visibleTreeInfo:i[2]},{selectionState:i[3]},{levelOutSpecs:i[4]},{treeD2:i[5]},{treeD2Offset:i[9]},{childD1Rate:i[6]},{overHangRate:i[7]},{preStraightRate:i[8]},{childBaseSize:i[10]},{linkSurfaceRate:i[11]},{childrenInternalMargin:i[12]},{parentSideMargin:0}];let o={};for(let n=0;n<l.length;n+=1)o=it(o,l[n]);return e=new At({props:o}),e.$on("ti",i[33]),{c(){Ie(e.$$.fragment)},l(n){De(e.$$.fragment,n)},m(n,r){Re(e,n,r),t=!0},p(n,r){const s=r[0]&16383?lt(l,[r[0]&8192&&Ht(n[44]),r[0]&1&&{qcSpec:n[0]},r[0]&2&&{attributeLabels:n[1]},r[0]&4&&{visibleTreeInfo:n[2]},r[0]&8&&{selectionState:n[3]},r[0]&16&&{levelOutSpecs:n[4]},r[0]&32&&{treeD2:n[5]},r[0]&512&&{treeD2Offset:n[9]},r[0]&64&&{childD1Rate:n[6]},r[0]&128&&{overHangRate:n[7]},r[0]&256&&{preStraightRate:n[8]},r[0]&1024&&{childBaseSize:n[10]},r[0]&2048&&{linkSurfaceRate:n[11]},r[0]&4096&&{childrenInternalMargin:n[12]},l[14]]):{};e.$set(s)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function yt(i,e){let t,l,o,n,r,s,c,u,h,g,k,f,y,w,B,$,ee,W=qe([[0,5],[20,15],[50,25]]),D=[];for(let b=0;b<3;b+=1)D[b]=bt(gt(e,W,b));const Y=[{text:e[46].name},e[47]];let re={};for(let b=0;b<Y.length;b+=1)re=it(re,Y[b]);g=new Vt({props:re});let te=[e[48],{"fill-opacity":"0"}],ne={};for(let b=0;b<te.length;b+=1)ne=it(ne,te[b]);let S=e[46].children&&mt(e);return{key:i,first:null,c(){t=Pe("defs"),l=Pe("linearGradient");for(let b=0;b<3;b+=1)D[b].c();n=Z(),r=Pe("path"),h=Z(),Ie(g.$$.fragment),k=Z(),f=Pe("rect"),y=Z(),S&&S.c(),w=Se(),this.h()},l(b){t=je(b,"defs",{});var T=L(t);l=je(T,"linearGradient",{id:!0,gradientTransform:!0});var M=L(l);for(let R=0;R<3;R+=1)D[R].l(M);M.forEach(p),T.forEach(p),n=x(b),r=je(b,"path",{d:!0,fill:!0,class:!0}),L(r).forEach(p),h=x(b),De(g.$$.fragment,b),k=x(b),f=je(b,"rect",{"fill-opacity":!0}),L(f).forEach(p),y=x(b),S&&S.l(b),w=Se(),this.h()},h(){_(l,"id",o="path-grad-"+e[45].strId),_(l,"gradientTransform","rotate(90)"),_(r,"d",s=e[45].linkPath),_(r,"fill",c="url('#path-grad-"+e[45].strId+"')"),_(r,"class","svelte-1cwbp37"),rt(f,ne),nt(f,"svelte-1cwbp37",!0),this.first=t},m(b,T){O(b,t,T),E(t,l);for(let M=0;M<3;M+=1)D[M]&&D[M].m(l,null);O(b,n,T),O(b,r,T),O(b,h,T),Re(g,b,T),O(b,k,T),O(b,f,T),O(b,y,T),S&&S.m(b,T),O(b,w,T),B=!0,$||(ee=[pe(f,"mouseover",function(){ct(Ve(e[14],"highlight",e[44].pathInCompleteTree,e[48].x,e[48].y))&&Ve(e[14],"highlight",e[44].pathInCompleteTree,e[48].x,e[48].y).apply(this,arguments)}),pe(f,"mouseleave",function(){ct(Ve(e[14],"de-highlight",e[44].pathInCompleteTree,0,0))&&Ve(e[14],"de-highlight",e[44].pathInCompleteTree,0,0).apply(this,arguments)}),pe(f,"click",function(){ct(Ve(e[14],"toggle-select",e[44].pathInCompleteTree,0,0))&&Ve(e[14],"toggle-select",e[44].pathInCompleteTree,0,0).apply(this,arguments)})],$=!0)},p(b,T){if(e=b,T[0]&8192){W=qe([[0,5],[20,15],[50,25]]);let R;for(R=0;R<3;R+=1){const K=gt(e,W,R);D[R]?D[R].p(K,T):(D[R]=bt(K),D[R].c(),D[R].m(l,null))}for(;R<3;R+=1)D[R].d(1)}(!B||T[0]&8192&&o!==(o="path-grad-"+e[45].strId))&&_(l,"id",o),(!B||T[0]&8192&&s!==(s=e[45].linkPath))&&_(r,"d",s),(!B||T[0]&8192&&c!==(c="url('#path-grad-"+e[45].strId+"')"))&&_(r,"fill",c);const M=T[0]&8192?lt(Y,[{text:e[46].name},Ht(e[47])]):{};g.$set(M),rt(f,ne=lt(te,[T[0]&8192&&e[48],{"fill-opacity":"0"}])),nt(f,"svelte-1cwbp37",!0),e[46].children?S?(S.p(e,T),T[0]&8192&&j(S,1)):(S=mt(e),S.c(),j(S,1),S.m(w.parentNode,w)):S&&(Ne(),U(S,1,1,()=>{S=null}),Ge())},i(b){B||(b&&Me(()=>{B&&(u||(u=Ce(r,Le,{duration:300},!0)),u.run(1))}),j(g.$$.fragment,b),j(S),B=!0)},o(b){b&&(u||(u=Ce(r,Le,{duration:300},!1)),u.run(0)),U(g.$$.fragment,b),U(S),B=!1},d(b){b&&(p(t),p(n),p(r),p(h),p(k),p(f),p(y),p(w)),ot(D,b),b&&u&&u.end(),Be(g,b),S&&S.d(b),$=!1,ht(ee)}}}function oi(i){let e=[],t=new Map,l,o,n=qe(i[13]);const r=s=>s[43];for(let s=0;s<n.length;s+=1){let c=pt(i,n,s),u=r(c);t.set(u,e[s]=yt(u,c))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=Se()},l(s){for(let c=0;c<e.length;c+=1)e[c].l(s);l=Se()},m(s,c){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,c);O(s,l,c),o=!0},p(s,c){c[0]&32767&&(n=qe(s[13]),Ne(),e=Zt(e,c,r,1,s,n,t,l.parentNode,xt,yt,l,pt),Ge())},i(s){if(!o){for(let c=0;c<n.length;c+=1)j(e[c]);o=!0}},o(s){for(let c=0;c<e.length;c+=1)U(e[c]);o=!1},d(s){s&&p(l);for(let c=0;c<e.length;c+=1)e[c].d(s)}}}function vt(i,e,t,l,o,n,r){const s=h=>o*(h||0)/n,c=l+s(e),u=i+((t==null?void 0:t.rank)||0)*(l+r)+s(t==null?void 0:t.weight);return{rootD2:c,d2Offset:u}}function ci(i,e,t){let l,o,n,r,s,c,u,h,g,k,f,y,w,B,$,ee,W,D,Y,re,{qcSpec:te}=e,{attributeLabels:ne}=e,{visibleTreeInfo:S}=e,{selectionState:b}=e,{levelOutSpecs:T=[]}=e,{pathInCompleteTree:M=[]}=e,{branchReachBack:R=0}=e,{rootD2:K=30}=e,{treeD2:ue=70}=e,{childD1Rate:se=.2}=e,{overHangRate:F=.05}=e,{preStraightRate:N=.05}=e,{treeD2Offset:G=0}=e,{childBaseSize:P=2.9}=e,{linkSurfaceRate:ge=.8}=e,{childrenInternalMargin:be=.9}=e,{parentSideMargin:oe=.8}=e,{d2Offset:Ee=(ue-K)/2+G}=e;const me=Ft(),He=v=>v===void 0?0:v;function Qe(v,I){var fe;const C={pathInCompleteTree:[...M,v],...vt(G,I.weight,I==null?void 0:I.totalOffsetOnLevel,P,Y,((fe=S.meta[o])==null?void 0:fe.totalWeight)||1,be)},A=vt(Ee+oe,I.weight,I==null?void 0:I.totalOffsetAmongSiblings,D,ee*(r>1?ge:1)-D*r,(n==null?void 0:n.childrenSumWeight)||1,W),ke={parent:A.rootD2,child:C.rootD2},a=g+(I.isSelected?f:0),d={x:A.d2Offset,y},J={x:C.d2Offset,y:w};let he=si(d,J,ke,a,$),Oe={x:C.d2Offset+ke.child*.18,y:B-g*.05,height:g*.9,width:ke.child*.64};const ve={x:C.d2Offset,y:w,height:g,width:ke.child};return{id:v,cachedProps:C,vizInfo:{linkPath:he,d2Size:ke.child,colorStr:$t(I.scaleEnds.mid),strId:C.pathInCompleteTree.join("-")},childNode:I,textShape:Oe,hoverShape:ve}}function ye(v,I){return Object.entries((v==null?void 0:v.children)||{}).map(([C,A])=>Qe(C,A))}function z(v){Nt.call(this,i,v)}return i.$$set=v=>{"qcSpec"in v&&t(0,te=v.qcSpec),"attributeLabels"in v&&t(1,ne=v.attributeLabels),"visibleTreeInfo"in v&&t(2,S=v.visibleTreeInfo),"selectionState"in v&&t(3,b=v.selectionState),"levelOutSpecs"in v&&t(4,T=v.levelOutSpecs),"pathInCompleteTree"in v&&t(15,M=v.pathInCompleteTree),"branchReachBack"in v&&t(16,R=v.branchReachBack),"rootD2"in v&&t(17,K=v.rootD2),"treeD2"in v&&t(5,ue=v.treeD2),"childD1Rate"in v&&t(6,se=v.childD1Rate),"overHangRate"in v&&t(7,F=v.overHangRate),"preStraightRate"in v&&t(8,N=v.preStraightRate),"treeD2Offset"in v&&t(9,G=v.treeD2Offset),"childBaseSize"in v&&t(10,P=v.childBaseSize),"linkSurfaceRate"in v&&t(11,ge=v.linkSurfaceRate),"childrenInternalMargin"in v&&t(12,be=v.childrenInternalMargin),"parentSideMargin"in v&&t(18,oe=v.parentSideMargin),"d2Offset"in v&&t(19,Ee=v.d2Offset)},i.$$.update=()=>{var v;i.$$.dirty[0]&32768&&t(32,l=M.length),i.$$.dirty[1]&2&&t(27,o=l+1),i.$$.dirty[0]&32772&&t(21,n=Qt(M,S.tree)),i.$$.dirty[0]&2097152&&t(25,r=Object.keys((n==null?void 0:n.children)||{}).length),i.$$.dirty[0]&16|i.$$.dirty[1]&2&&t(20,s=T[l]),i.$$.dirty[0]&134217732&&t(28,c=((v=S.meta[o])==null?void 0:v.totalNodes)||0),i.$$.dirty[0]&1048576&&t(31,u=He(s==null?void 0:s.topOffset)),i.$$.dirty[0]&1049024&&t(30,[h,g,k,f]=[1-se-N-F,se,N,F].map(I=>He((s==null?void 0:s.totalSize)*I)),h,(t(22,g),t(6,se),t(8,N),t(7,F),t(20,s),t(4,T),t(32,l),t(15,M)),(t(29,k),t(6,se),t(8,N),t(7,F),t(20,s),t(4,T),t(32,l),t(15,M))),i.$$.dirty[0]&536870912|i.$$.dirty[1]&1&&t(24,y=u+k),i.$$.dirty[0]&1090519040&&t(23,w=y+h),i.$$.dirty[0]&12582912&&(B=w+g),i.$$.dirty[0]&536936448&&($=R+k),i.$$.dirty[0]&393216&&t(26,ee=K-2*oe),i.$$.dirty[0]&100665344&&(W=ee*(1-ge)/(r>1?r-1:1)),i.$$.dirty[0]&100665344&&(D=ee*ge/(r*1.8)),i.$$.dirty[0]&268440608&&(Y=ue-P*c-be*(c-1)),i.$$.dirty[0]&3145728&&t(13,re=ye(n))},[te,ne,S,b,T,ue,se,F,N,G,P,ge,be,re,me,M,R,K,oe,Ee,s,n,g,w,y,r,ee,o,c,k,h,u,l,z]}class At extends Ze{constructor(e){super(),xe(this,e,ci,oi,Xe,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectionState:3,levelOutSpecs:4,pathInCompleteTree:15,branchReachBack:16,rootD2:17,treeD2:5,childD1Rate:6,overHangRate:7,preStraightRate:8,treeD2Offset:9,childBaseSize:10,linkSurfaceRate:11,childrenInternalMargin:12,parentSideMargin:18,d2Offset:19},null,[-1,-1])}}function ai(i){let e,t,l,o,n="<span>−</span><span>+</span>",r,s,c,u;return{c(){e=Q("div"),t=Q("input"),l=Z(),o=Q("label"),o.innerHTML=n,this.h()},l(h){e=V(h,"DIV",{class:!0});var g=L(e);t=V(g,"INPUT",{type:!0,min:!0,max:!0,class:!0}),l=x(g),o=V(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),jt(o)!=="svelte-3lai9p"&&(o.innerHTML=n),g.forEach(p),this.h()},h(){_(t,"type","range"),_(t,"min",i[1]),_(t,"max",i[2]),_(t,"class","svelte-1gdj9q3"),_(o,"for","topn-input"),_(o,"class","svelte-1gdj9q3"),_(e,"class","vert-zero svelte-1gdj9q3")},m(h,g){O(h,e,g),E(e,t),Ke(t,i[0]),E(e,l),E(e,o),s=!0,c||(u=[pe(t,"change",i[4]),pe(t,"input",i[4])],c=!0)},p(h,[g]){i=h,(!s||g&2)&&_(t,"min",i[1]),(!s||g&4)&&_(t,"max",i[2]),g&1&&Ke(t,i[0])},i(h){s||(h&&Me(()=>{s&&(r||(r=Ce(e,Le,{duration:i[3]},!0)),r.run(1))}),s=!0)},o(h){h&&(r||(r=Ce(e,Le,{duration:i[3]},!1)),r.run(0)),s=!1},d(h){h&&p(e),h&&r&&r.end(),c=!1,ht(u)}}}function ui(i,e,t){let{value:l}=e,{min:o}=e,{max:n}=e,{duration:r=400}=e;function s(){l=Gt(this.value),t(0,l)}return i.$$set=c=>{"value"in c&&t(0,l=c.value),"min"in c&&t(1,o=c.min),"max"in c&&t(2,n=c.max),"duration"in c&&t(3,r=c.duration)},[l,o,n,r,s]}class hi extends Ze{constructor(e){super(),xe(this,e,ui,ai,Xe,{value:0,min:1,max:2,duration:3})}}function kt(i,e,t){const l=i.slice();return l[7]=e[t],l}function wt(i){let e,t,l,o=i[5](i[0][i[2]]||"").split("<")[0]+"",n,r,s,c,u,h,g,k,f=i[1].levelOptions.length>1&&St(i);return{c(){e=Q("div"),t=Q("div"),l=Q("span"),n=ce(o),s=Z(),f&&f.c(),c=Z(),u=Q("div"),this.h()},l(y){e=V(y,"DIV",{class:!0,style:!0});var w=L(e);t=V(w,"DIV",{class:!0});var B=L(t);l=V(B,"SPAN",{class:!0});var $=L(l);n=ae($,o),$.forEach(p),B.forEach(p),s=x(w),f&&f.l(w),c=x(w),u=V(w,"DIV",{class:!0}),L(u).forEach(p),w.forEach(p),this.h()},h(){_(l,"class","svelte-1hzgw1i"),_(t,"class",r="sel-base sel-cover "+(i[1].levelOptions.length>1?"sel-clicky":"")+" svelte-1hzgw1i"),_(u,"class","bg filler svelte-1hzgw1i"),_(e,"class","sentenceline svelte-1hzgw1i"),_(e,"style",h=i[4]({top:i[1].topOffset+i[1].totalSize*.2+i[3],height:i[1].totalSize*.25},{},{}))},m(y,w){O(y,e,w),E(e,t),E(t,l),E(l,n),E(e,s),f&&f.m(e,null),E(e,c),E(e,u),k=!0},p(y,w){(!k||w&5)&&o!==(o=y[5](y[0][y[2]]||"").split("<")[0]+"")&&Fe(n,o),(!k||w&2&&r!==(r="sel-base sel-cover "+(y[1].levelOptions.length>1?"sel-clicky":"")+" svelte-1hzgw1i"))&&_(t,"class",r),y[1].levelOptions.length>1?f?f.p(y,w):(f=St(y),f.c(),f.m(e,c)):f&&(f.d(1),f=null),(!k||w&26&&h!==(h=y[4]({top:y[1].topOffset+y[1].totalSize*.2+y[3],height:y[1].totalSize*.25},{},{})))&&_(e,"style",h)},i(y){k||(y&&Me(()=>{k&&(g||(g=Ce(e,Le,{duration:400},!0)),g.run(1))}),k=!0)},o(y){y&&(g||(g=Ce(e,Le,{duration:400},!1)),g.run(0)),k=!1},d(y){y&&p(e),f&&f.d(),y&&g&&g.end()}}}function St(i){let e,t,l,o=qe(i[1].levelOptions),n=[];for(let r=0;r<o.length;r+=1)n[r]=qt(kt(i,o,r));return{c(){e=Q("select");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=V(r,"SELECT",{class:!0,style:!0});var s=L(e);for(let c=0;c<n.length;c+=1)n[c].l(s);s.forEach(p),this.h()},h(){_(e,"class","sel-base svelte-1hzgw1i"),Ut(e,"opacity","0"),i[0][i[2]]===void 0&&Me(()=>i[6].call(e))},m(r,s){O(r,e,s);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);st(e,i[0][i[2]],!0),t||(l=pe(e,"change",i[6]),t=!0)},p(r,s){if(s&34){o=qe(r[1].levelOptions);let c;for(c=0;c<o.length;c+=1){const u=kt(r,o,c);n[c]?n[c].p(u,s):(n[c]=qt(u),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=o.length}s&7&&st(e,r[0][r[2]])},d(r){r&&p(e),ot(n,r),t=!1,l()}}}function qt(i){let e,t=i[5](i[7])+"",l,o,n;return{c(){e=Q("option"),l=ce(t),o=Z(),this.h()},l(r){e=V(r,"OPTION",{class:!0});var s=L(e);l=ae(s,t),o=x(s),s.forEach(p),this.h()},h(){e.__value=n=i[7],Ke(e,e.__value),_(e,"class","svelte-1hzgw1i")},m(r,s){O(r,e,s),E(e,l),E(e,o)},p(r,s){s&2&&t!==(t=r[5](r[7])+"")&&Fe(l,t),s&2&&n!==(n=r[7])&&(e.__value=n,Ke(e,e.__value))},d(r){r&&p(e)}}}function fi(i){let e,t=i[1].isVisible&&wt(i);return{c(){t&&t.c(),e=Se()},l(l){t&&t.l(l),e=Se()},m(l,o){t&&t.m(l,o),O(l,e,o)},p(l,[o]){l[1].isVisible?t?(t.p(l,o),o&2&&j(t,1)):(t=wt(l),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(Ne(),U(t,1,1,()=>{t=null}),Ge())},i(l){j(t)},o(l){U(t)},d(l){l&&p(e),t&&t.d(l)}}}function di(i,e,t){let{levelSpec:l}=e,{index:o}=e,{selectedBreakdowns:n}=e,{totalD1Offset:r}=e,{dBasedStyle:s}=e;function c(h){let g=n[0]=="1-w2qs-1",k=n[0]=="agged-institutions-to-countries",f={"agged-institutions-to-countries":"working at"},y=k?Math.max(o-1,0):o;return[{"0-concept-hierarchy-0":"working on <field>","0-concept-hierarchy-1":"working on <subfield>","1-concept-hierarchy-0":"are cited by papers in <field>","0-country-hierarchy-0":"co-author with scholars working in <country>","1-country-hierarchy-0":"are cited by authors working in <country>","0-w2qs-0":"publish in journals categorized as <q#>","1-w2qs-1":"are cited in papers published in <journal>"},{"1-concept-hierarchy-0":"and are cited by authors working on","1-concept-hierarchy-1":"and in particular","0-country-hierarchy-1":"working at","1-country-hierarchy-0":(g?"":"are cited ")+"by authors in","1-country-hierarchy-1":"at","0-w2qs-0":"publish in journals categorized as","0-w2qs-1":"such as"},{"0-concept-hierarchy-0":"focused on","1-concept-hierarchy-1":"and in particular in","1-country-hierarchy-1":"working at","1-concept-hierarchy-0":(g?"working ":"")+"on","0-w2qs-1":"such as","1-w2qs-1":"published in","1-country-hierarchy-0":"and are cited by authors working in"},{"0-concept-hierarchy-1":"and in particular","1-concept-hierarchy-0":"on","1-concept-hierarchy-1":"and in particular"},{}][y][h]||f[h]||h}function u(){n[o]=Mt(this),t(0,n),t(1,l)}return i.$$set=h=>{"levelSpec"in h&&t(1,l=h.levelSpec),"index"in h&&t(2,o=h.index),"selectedBreakdowns"in h&&t(0,n=h.selectedBreakdowns),"totalD1Offset"in h&&t(3,r=h.totalD1Offset),"dBasedStyle"in h&&t(4,s=h.dBasedStyle)},[n,l,o,r,s,c,u]}class _i extends Ze{constructor(e){super(),xe(this,e,di,fi,Xe,{levelSpec:1,index:2,selectedBreakdowns:0,totalD1Offset:3,dBasedStyle:4})}}function Ot(i){let e,t,l;return{c(){e=Q("input"),this.h()},l(o){e=V(o,"INPUT",{type:!0}),this.h()},h(){_(e,"type","checkbox")},m(o,n){O(o,e,n),e.checked=i[1],t||(l=pe(e,"change",i[9]),t=!0)},p(o,n){n&2&&(e.checked=o[1])},d(o){o&&p(e),t=!1,l()}}}function pi(i){let e,t,l="i",o,n,r,s,c,u;const h=i[5].default,g=Wt(h,i,i[4],null);let k=i[2]&&Ot(i);return{c(){e=Q("div"),t=Q("span"),t.textContent=l,o=Z(),n=Q("span"),g&&g.c(),r=Z(),k&&k.c(),this.h()},l(f){e=V(f,"DIV",{id:!0,class:!0});var y=L(e);t=V(y,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),jt(t)!=="svelte-6462kx"&&(t.textContent=l),o=x(y),n=V(y,"SPAN",{id:!0,class:!0});var w=L(n);g&&g.l(w),w.forEach(p),r=x(y),k&&k.l(y),y.forEach(p),this.h()},h(){_(t,"id","spec-info-hover"),_(t,"class","small-hover svelte-1cmmek4"),_(n,"id","spec-label"),_(n,"class","small-hover svelte-1cmmek4"),_(e,"id","spec-container"),_(e,"class","svelte-1cmmek4")},m(f,y){O(f,e,y),E(e,t),E(e,o),E(e,n),g&&g.m(n,null),E(e,r),k&&k.m(e,null),s=!0,c||(u=[pe(t,"mouseover",i[6]),pe(t,"mouseleave",i[7]),pe(n,"click",i[8])],c=!0)},p(f,[y]){g&&g.p&&(!s||y&16)&&Yt(g,h,f,f[4],s?Kt(h,f[4],y,null):Jt(f[4]),null),f[2]?k?k.p(f,y):(k=Ot(f),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i(f){s||(j(g,f),s=!0)},o(f){U(g,f),s=!1},d(f){f&&p(e),g&&g.d(f),k&&k.d(),c=!1,ht(u)}}}function gi(i,e,t){let{$$slots:l={},$$scope:o}=e,{hoverToggle:n}=e,{checked:r}=e,{checkBox:s=!0}=e,{interactText:c=!0}=e;const u=()=>{t(0,n=!0)},h=()=>{t(0,n=!1)},g=()=>{c&&t(1,r=!r)};function k(){r=this.checked,t(1,r)}return i.$$set=f=>{"hoverToggle"in f&&t(0,n=f.hoverToggle),"checked"in f&&t(1,r=f.checked),"checkBox"in f&&t(2,s=f.checkBox),"interactText"in f&&t(3,c=f.interactText),"$$scope"in f&&t(4,o=f.$$scope)},[n,r,s,c,o,l,u,h,g,k]}class Tt extends Ze{constructor(e){super(),xe(this,e,gi,pi,Xe,{hoverToggle:0,checked:1,checkBox:2,interactText:3})}}function It(i,e,t){const l=i.slice();return l[56]=e[t],l[58]=t,l}function Dt(i,e,t){const l=i.slice();return l[59]=e[t],l}function Rt(i){var ke;let e,t,l,o,n,r,s,c,u,h,g,k,f,y,w,B,$,ee,W,D,Y,re,te,ne,S,b,T,M,R,K,ue,se,F;t=new At({props:{qcSpec:i[3],branchReachBack:i[11]*we/100,d2Offset:i[26]+tt,rootD2:at,attributeLabels:i[1],visibleTreeInfo:i[12],selectionState:i[9],levelOutSpecs:i[18],treeD2:Je-tt,treeD2Offset:tt,childD1Rate:i[24],overHangRate:wi,childBaseSize:Si}}),t.$on("ti",i[27]);let N=[{id:"qc-header"},i[21],{rx:"0.4"}],G={};for(let a=0;a<N.length;a+=1)G=it(G,N[a]);o=new Vt({props:{height:i[21].height*.7,width:i[21].width*.8,text:((ke=i[19])==null?void 0:ke.name)||"",anchor:"middle",bottomAligned:!1,x:i[21].x+i[21].width/2,y:i[21].y+i[21].height*.75,allowRotation:!1}});let P=i[8].weight>1&&Bt(i);function ge(a){i[39](a)}let be={min:1,max:qi};i[6]!==void 0&&(be.value=i[6]),B=new hi({props:be}),Ue.push(()=>Ye(B,"value",ge));function oe(a){i[40](a)}function Ee(a){i[41](a)}let me={$$slots:{default:[bi]},$$scope:{ctx:i}};i[16]!==void 0&&(me.hoverToggle=i[16]),i[7]!==void 0&&(me.checked=i[7]),Y=new Tt({props:me}),Ue.push(()=>Ye(Y,"hoverToggle",oe)),Ue.push(()=>Ye(Y,"checked",Ee));function He(a){i[43](a)}let Qe={interactText:!1,checked:!1,checkBox:!1,$$slots:{default:[mi]},$$scope:{ctx:i}};i[17]!==void 0&&(Qe.hoverToggle=i[17]),S=new Tt({props:Qe}),Ue.push(()=>Ye(S,"hoverToggle",He));let ye=qe(i[18]||[]),z=[];for(let a=0;a<ye.length;a+=1)z[a]=zt(It(i,ye,a));const v=a=>U(z[a],1,1,()=>{z[a]=null});let I=i[14].length>0&&Ct(i),C=i[16]&&Lt(i),A=i[17]&&Pt(i);return{c(){e=Pe("svg"),Ie(t.$$.fragment),l=Pe("rect"),Ie(o.$$.fragment),r=Z(),s=Q("div"),c=Q("p"),u=ce(i[2]),g=Z(),k=Q("div"),P&&P.c(),y=Z(),w=Q("div"),Ie(B.$$.fragment),W=Z(),D=Q("div"),Ie(Y.$$.fragment),ne=Z(),Ie(S.$$.fragment),M=Z();for(let a=0;a<z.length;a+=1)z[a].c();R=Z(),I&&I.c(),K=Z(),C&&C.c(),ue=Z(),A&&A.c(),se=Se(),this.h()},l(a){e=je(a,"svg",{viewBox:!0,xmlns:!0,class:!0});var d=L(e);De(t.$$.fragment,d),l=je(d,"rect",{id:!0,rx:!0}),L(l).forEach(p),De(o.$$.fragment,d),d.forEach(p),r=x(a),s=V(a,"DIV",{class:!0,style:!0});var J=L(s);c=V(J,"P",{id:!0,class:!0});var he=L(c);u=ae(he,i[2]),he.forEach(p),J.forEach(p),g=x(a),k=V(a,"DIV",{class:!0,style:!0});var Oe=L(k);P&&P.l(Oe),Oe.forEach(p),y=x(a),w=V(a,"DIV",{class:!0,style:!0});var ve=L(w);De(B.$$.fragment,ve),ve.forEach(p),W=x(a),D=V(a,"DIV",{class:!0,id:!0,style:!0});var fe=L(D);De(Y.$$.fragment,fe),ne=x(fe),De(S.$$.fragment,fe),fe.forEach(p),M=x(a);for(let m=0;m<z.length;m+=1)z[m].l(a);R=x(a),I&&I.l(a),K=x(a),C&&C.l(a),ue=x(a),A&&A.l(a),se=Se(),this.h()},h(){rt(l,G),nt(l,"svelte-1eprj6g",!0),_(e,"viewBox",n=i[20].x+" "+i[20].y+" "+i[20].width+" "+i[20].height),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"class","svelte-1eprj6g"),_(c,"id","sentence-starter"),_(c,"class","svelte-1eprj6g"),_(s,"class","floater sentence-container svelte-1eprj6g"),_(s,"style",h=i[23]({top:0},{left:20,width:60},{height:Ae})),_(k,"class","floater sentence-container svelte-1eprj6g"),_(k,"style",f=i[23]({},{left:i[21].x-i[21].width/2,width:i[21].width*2},{height:we*.15,top:we*.85+Ae})),_(w,"class","floater svelte-1eprj6g"),_(w,"style",ee=i[23]({top:i[22]+i[21].height*.5,height:0},{left:ze,width:i[26]*.82},{})),_(D,"class","floater svelte-1eprj6g"),_(D,"id","right-control"),_(D,"style",T=i[23]({top:i[22],height:i[21].height},{right:ze,width:100-i[21].width-i[26]-ze-ze},{}))},m(a,d){O(a,e,d),Re(t,e,null),E(e,l),Re(o,e,null),O(a,r,d),O(a,s,d),E(s,c),E(c,u),O(a,g,d),O(a,k,d),P&&P.m(k,null),O(a,y,d),O(a,w,d),Re(B,w,null),O(a,W,d),O(a,D,d),Re(Y,D,null),E(D,ne),Re(S,D,null),O(a,M,d);for(let J=0;J<z.length;J+=1)z[J]&&z[J].m(a,d);O(a,R,d),I&&I.m(a,d),O(a,K,d),C&&C.m(a,d),O(a,ue,d),A&&A.m(a,d),O(a,se,d),F=!0},p(a,d){var m;const J={};d[0]&8&&(J.qcSpec=a[3]),d[0]&2048&&(J.branchReachBack=a[11]*we/100),d[0]&2&&(J.attributeLabels=a[1]),d[0]&4096&&(J.visibleTreeInfo=a[12]),d[0]&512&&(J.selectionState=a[9]),d[0]&262144&&(J.levelOutSpecs=a[18]),d[0]&16777216&&(J.childD1Rate=a[24]),t.$set(J),rt(l,G=lt(N,[{id:"qc-header"},d[0]&2097152&&a[21],{rx:"0.4"}])),nt(l,"svelte-1eprj6g",!0);const he={};d[0]&2097152&&(he.height=a[21].height*.7),d[0]&2097152&&(he.width=a[21].width*.8),d[0]&524288&&(he.text=((m=a[19])==null?void 0:m.name)||""),d[0]&2097152&&(he.x=a[21].x+a[21].width/2),d[0]&2097152&&(he.y=a[21].y+a[21].height*.75),o.$set(he),(!F||d[0]&1048576&&n!==(n=a[20].x+" "+a[20].y+" "+a[20].width+" "+a[20].height))&&_(e,"viewBox",n),(!F||d[0]&4)&&Fe(u,a[2]),(!F||d[0]&8388608&&h!==(h=a[23]({top:0},{left:20,width:60},{height:Ae})))&&_(s,"style",h),a[8].weight>1?P?P.p(a,d):(P=Bt(a),P.c(),P.m(k,null)):P&&(P.d(1),P=null),(!F||d[0]&10485760&&f!==(f=a[23]({},{left:a[21].x-a[21].width/2,width:a[21].width*2},{height:we*.15,top:we*.85+Ae})))&&_(k,"style",f);const Oe={};!$&&d[0]&64&&($=!0,Oe.value=a[6],We(()=>$=!1)),B.$set(Oe),(!F||d[0]&14680064&&ee!==(ee=a[23]({top:a[22]+a[21].height*.5,height:0},{left:ze,width:a[26]*.82},{})))&&_(w,"style",ee);const ve={};d[2]&1&&(ve.$$scope={dirty:d,ctx:a}),!re&&d[0]&65536&&(re=!0,ve.hoverToggle=a[16],We(()=>re=!1)),!te&&d[0]&128&&(te=!0,ve.checked=a[7],We(()=>te=!1)),Y.$set(ve);const fe={};if(d[0]&1|d[2]&1&&(fe.$$scope={dirty:d,ctx:a}),!b&&d[0]&131072&&(b=!0,fe.hoverToggle=a[17],We(()=>b=!1)),S.$set(fe),(!F||d[0]&14680064&&T!==(T=a[23]({top:a[22],height:a[21].height},{right:ze,width:100-a[21].width-a[26]-ze-ze},{})))&&_(D,"style",T),d[0]&14943232){ye=qe(a[18]||[]);let q;for(q=0;q<ye.length;q+=1){const H=It(a,ye,q);z[q]?(z[q].p(H,d),j(z[q],1)):(z[q]=zt(H),z[q].c(),j(z[q],1),z[q].m(R.parentNode,R))}for(Ne(),q=ye.length;q<z.length;q+=1)v(q);Ge()}a[14].length>0?I?(I.p(a,d),d[0]&16384&&j(I,1)):(I=Ct(a),I.c(),j(I,1),I.m(K.parentNode,K)):I&&(Ne(),U(I,1,1,()=>{I=null}),Ge()),a[16]?C?C.p(a,d):(C=Lt(a),C.c(),C.m(ue.parentNode,ue)):C&&(C.d(1),C=null),a[17]?A?A.p(a,d):(A=Pt(a),A.c(),A.m(se.parentNode,se)):A&&(A.d(1),A=null)},i(a){if(!F){j(t.$$.fragment,a),j(o.$$.fragment,a),j(B.$$.fragment,a),j(Y.$$.fragment,a),j(S.$$.fragment,a);for(let d=0;d<ye.length;d+=1)j(z[d]);j(I),F=!0}},o(a){U(t.$$.fragment,a),U(o.$$.fragment,a),U(B.$$.fragment,a),U(Y.$$.fragment,a),U(S.$$.fragment,a),z=z.filter(Boolean);for(let d=0;d<z.length;d+=1)U(z[d]);U(I),F=!1},d(a){a&&(p(e),p(r),p(s),p(g),p(k),p(y),p(w),p(W),p(D),p(M),p(R),p(K),p(ue),p(se)),Be(t),Be(o),P&&P.d(),Be(B),Be(Y),Be(S),ot(z,a),I&&I.d(a),C&&C.d(a),A&&A.d(a)}}}function Bt(i){let e,t,l=$e(i[8].source_count||0,0)+"",o,n,r=$e(i[8].weight||0,0)+"",s,c;return{c(){e=Q("p"),t=ce("("),o=ce(l),n=ce(" papers, "),s=ce(r),c=ce(" citations)"),this.h()},l(u){e=V(u,"P",{id:!0,class:!0});var h=L(e);t=ae(h,"("),o=ae(h,l),n=ae(h," papers, "),s=ae(h,r),c=ae(h," citations)"),h.forEach(p),this.h()},h(){_(e,"id","num-stat-subtitle"),_(e,"class","svelte-1eprj6g")},m(u,h){O(u,e,h),E(e,t),E(e,o),E(e,n),E(e,s),E(e,c)},p(u,h){h[0]&256&&l!==(l=$e(u[8].source_count||0,0)+"")&&Fe(o,l),h[0]&256&&r!==(r=$e(u[8].weight||0,0)+"")&&Fe(s,r)},d(u){u&&p(e)}}}function bi(i){let e;return{c(){e=ce("Specialization")},l(t){e=ae(t,"Specialization")},m(t,l){O(t,e,l)},d(t){t&&p(e)}}}function Et(i){let e,t=i[59]+"",l;return{c(){e=Q("option"),l=ce(t),this.h()},l(o){e=V(o,"OPTION",{});var n=L(e);l=ae(n,t),n.forEach(p),this.h()},h(){e.__value=i[59],Ke(e,e.__value)},m(o,n){O(o,e,n),E(e,l)},p:Xt,d(o){o&&p(e)}}}function mi(i){let e,t,l,o,n=qe(i[25]),r=[];for(let s=0;s<n.length;s+=1)r[s]=Et(Dt(i,n,s));return{c(){e=ce(`Since
			`),t=Q("select");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=ae(s,`Since
			`),t=V(s,"SELECT",{});var c=L(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(p),this.h()},h(){i[0]===void 0&&Me(()=>i[42].call(t))},m(s,c){O(s,e,c),O(s,t,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);st(t,i[0],!0),l||(o=pe(t,"change",i[42]),l=!0)},p(s,c){if(c[0]&33554432){n=qe(s[25]);let u;for(u=0;u<n.length;u+=1){const h=Dt(s,n,u);r[u]?r[u].p(h,c):(r[u]=Et(h),r[u].c(),r[u].m(t,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}c[0]&33554433&&st(t,s[0])},d(s){s&&(p(e),p(t)),ot(r,s),l=!1,o()}}}function zt(i){let e,t,l;function o(r){i[44](r)}let n={index:i[58],levelSpec:i[56],totalD1Offset:i[21].height+i[22],dBasedStyle:i[23]};return i[10]!==void 0&&(n.selectedBreakdowns=i[10]),e=new _i({props:n}),Ue.push(()=>Ye(e,"selectedBreakdowns",o)),{c(){Ie(e.$$.fragment)},l(r){De(e.$$.fragment,r)},m(r,s){Re(e,r,s),l=!0},p(r,s){const c={};s[0]&262144&&(c.levelSpec=r[56]),s[0]&6291456&&(c.totalD1Offset=r[21].height+r[22]),s[0]&8388608&&(c.dBasedStyle=r[23]),!t&&s[0]&1024&&(t=!0,c.selectedBreakdowns=r[10],We(()=>t=!1)),e.$set(c)},i(r){l||(j(e.$$.fragment,r),l=!0)},o(r){U(e.$$.fragment,r),l=!1},d(r){Be(e,r)}}}function Ct(i){let e,t,l,o,n,r,s;return t=new li({props:{path:i[14],weightedRoot:i[8],qcSpec:i[3],rootId:i[15],attributeLabels:i[1],showPaper:i[13]}}),{c(){e=Q("div"),Ie(t.$$.fragment),this.h()},l(c){e=V(c,"DIV",{class:!0,style:!0});var u=L(e);De(t.$$.fragment,u),u.forEach(p),this.h()},h(){_(e,"class","hoverover clickable svelte-1eprj6g"),_(e,"style",l=i[23]({},{right:2,width:96},{bottom:1,height:ut/(i[13]?.5:2)}))},m(c,u){O(c,e,u),Re(t,e,null),n=!0,r||(s=pe(e,"click",i[45]),r=!0)},p(c,u){const h={};u[0]&16384&&(h.path=c[14]),u[0]&256&&(h.weightedRoot=c[8]),u[0]&8&&(h.qcSpec=c[3]),u[0]&32768&&(h.rootId=c[15]),u[0]&2&&(h.attributeLabels=c[1]),u[0]&8192&&(h.showPaper=c[13]),t.$set(h),(!n||u[0]&8396800&&l!==(l=c[23]({},{right:2,width:96},{bottom:1,height:ut/(c[13]?.5:2)})))&&_(e,"style",l)},i(c){n||(j(t.$$.fragment,c),c&&Me(()=>{n&&(o||(o=Ce(e,Le,{duration:200},!0)),o.run(1))}),n=!0)},o(c){U(t.$$.fragment,c),c&&(o||(o=Ce(e,Le,{duration:200},!1)),o.run(0)),n=!1},d(c){c&&p(e),Be(t),c&&o&&o.end(),r=!1,s()}}}function Lt(i){let e,t,l;return{c(){e=Q("div"),t=ce(`Specialization is calculated using the expected prevelance of a country, source, or concept,
			and comparing it to the one present in the current breakdown flow. If it is switched off, the
			sheer volume of citations is considered.`),this.h()},l(o){e=V(o,"DIV",{class:!0,id:!0,style:!0});var n=L(e);t=ae(n,`Specialization is calculated using the expected prevelance of a country, source, or concept,
			and comparing it to the one present in the current breakdown flow. If it is switched off, the
			sheer volume of citations is considered.`),n.forEach(p),this.h()},h(){_(e,"class","floater hoverover svelte-1eprj6g"),_(e,"id","spec-hover"),_(e,"style",l=i[23]({top:i[22]+i[21].height},{left:i[26]+i[21].width*.2,width:i[21].width*1.6},{}))},m(o,n){O(o,e,n),E(e,t)},p(o,n){n[0]&14680064&&l!==(l=o[23]({top:o[22]+o[21].height},{left:o[26]+o[21].width*.2,width:o[21].width*1.6},{}))&&_(e,"style",l)},d(o){o&&p(e)}}}function Pt(i){let e,t,l,o,n;return{c(){e=Q("div"),t=ce("Filter the underlying dataset to papers published in or after "),l=ce(i[0]),o=ce("."),this.h()},l(r){e=V(r,"DIV",{class:!0,id:!0,style:!0});var s=L(e);t=ae(s,"Filter the underlying dataset to papers published in or after "),l=ae(s,i[0]),o=ae(s,"."),s.forEach(p),this.h()},h(){_(e,"class","floater hoverover svelte-1eprj6g"),_(e,"id","spec-hover"),_(e,"style",n=i[23]({top:i[22]+i[21].height*1.1},{left:i[26]+i[21].width*.2,width:i[21].width*1.6},{}))},m(r,s){O(r,e,s),E(e,t),E(e,l),E(e,o)},p(r,s){s[0]&1&&Fe(l,r[0]),s[0]&14680064&&n!==(n=r[23]({top:r[22]+r[21].height*1.1},{left:r[26]+r[21].width*.2,width:r[21].width*1.6},{}))&&_(e,"style",n)},d(r){r&&p(e)}}}function yi(i){let e=!Object.values(i[20]).includes(NaN)&&!Object.values(i[20]).includes(void 0),t,l,o,n;Me(i[38]);let r=e&&Rt(i);return{c(){r&&r.c(),t=Se()},l(s){r&&r.l(s),t=Se()},m(s,c){r&&r.m(s,c),O(s,t,c),l=!0,o||(n=pe(window,"resize",i[38]),o=!0)},p(s,c){c[0]&1048576&&(e=!Object.values(s[20]).includes(NaN)&&!Object.values(s[20]).includes(void 0)),e?r?(r.p(s,c),c[0]&1048576&&j(r,1)):(r=Rt(s),r.c(),j(r,1),r.m(t.parentNode,t)):r&&(Ne(),U(r,1,1,()=>{r=null}),Ge())},i(s){l||(j(r),l=!0)},o(s){U(r),l=!1},d(s){s&&p(t),r&&r.d(s),o=!1,n()}}}const vi=2004;let ki=.3,Je=100,at=25,tt=0,ze=3,Ae=9,ut=20,we=11,wi=.05,Si=2.5,qi=15;function Oi(i,e){return(t,l,o)=>[[t||{},i,"px"],[l||{},e,"px"],[o||{},n=>n,"svh"]].map(([n,r,s])=>Object.entries(n).map(([c,u])=>`${c}: ${r(u)}${s};`).join("")).join("")}function Ti(i,e,t){let l,o,n,r,s,c,u,h,g,k,f;const y=[2004,2019,2020,2021,2022,2023];let{defaultQcSpecId:w}=e,{selectedQcRootId:B}=e,{rootType:$}=e,{attributeLabels:ee}=e,{fullQcSpecs:W}=e,{removeHighlightUnhover:D=!0}=e,{startSentence:Y="Scholars at"}=e,{specFilterYear:re=2004}=e,te=!1,ne,S,b=[],T=B,M,R,K,ue=(Je-at)/2.5,se=!1,F=!1,N=Array(et).fill(0).map(()=>({totalSize:0,topOffset:0,levelOptions:[],isVisible:!1})),G=Array(et).fill(0).map(()=>({..._t})),P=_t.limit_n,ge=!0,be={weight:1,source_count:1,top_source:[0,0]},oe={children:{}},Ee,me=He(w,W);function He(m,q){var le;if(m==null)return[];const H=[],Te=q[m];for(let ie=0;ie<et;ie++)H.push(((le=Te.bifurcations[ie])==null?void 0:le.description)||"");return H}function Qe(m,q){let H={};for(let[Te,le]of Object.entries(m))if(le.root_entity_type==q){t(28,W[Te]=le,W);let ie=H;for(let de of le.bifurcations){const X=de.description;X in ie||(ie[X]={children:{},qcSpecs:[]}),ie[X].qcSpecs.push(Te),ie=ie[X].children}}return H}function ye(m){for(let q in G)t(33,G[q].limit_n=m,G)}function z(m){for(let q in G)t(33,G[q].size_base=m?"specialization":"volume",G)}function v(m,q,H,Te){if(t(13,te=!1),q==null||m.length==0)return;let le=0,ie=o,de;for(let X of m){if(de=ie[X],de===void 0)return;if(de.qcSpecs.includes(ne))le++;else break;ie=de.children}for(ne=(de==null?void 0:de.qcSpecs[0])||"";m.length>0;)m.pop();for(let X of W[ne].bifurcations)m.push(X.description);for(let X=le;X<G.length;X++)t(33,G[X].include=[],G);t(19,Ee=H[$][B]),ti(`qc-builds/${Te}/${ne}/${q}`,X=>{t(8,[be,oe,S,T]=[X,ii(ri(oe,le),X),W[ne],q],be,t(9,oe),t(3,S),t(15,T))})}function I(m,q,H,Te,le){var dt;if(t(13,te=!1),le.length==0)return;let ie=1;for(let _e of(m.meta||[]).slice(2))_e.totalNodes>0&&ie++;let de=Te,X=0;const ft=H===void 0?q/ie:q/ie/2;for(let _e=0;_e<et;_e++)t(18,N[_e].totalSize=H==_e?q/2+ft:ft,N),t(18,N[_e].topOffset=X,N),t(18,N[_e].levelOptions=Object.keys(de),N),t(18,N[_e].isVisible=_e<ie,N),X+=N[_e].totalSize,_e==ie-1&&(X+=q/2),de=((dt=de[le[_e]])==null?void 0:dt.children)||{}}function C(m){var le;const q=m[m.length-1];let H=Qt(m.slice(0,m.length-1),oe);if((H==null?void 0:H.children)===void 0)return;Object.keys(H.children).includes(q)?(delete H.children[q],ni(oe)):H.children[q]={children:((le=H.children[q])==null?void 0:le.children)||{}},t(13,te=!1),t(9,oe)}function A(m){const q=m.detail.path,H=m.detail.action;if(H=="highlight"){t(14,b=q),t(13,te=!1);return}else if(H=="de-highlight"){D&&t(14,b=[]);return}C(q)}function ke(){t(5,K=window.innerWidth),t(4,R=window.innerHeight)}function a(m){P=m,t(6,P)}function d(m){se=m,t(16,se)}function J(m){ge=m,t(7,ge)}function he(){re=Mt(this),t(0,re),t(25,y)}function Oe(m){F=m,t(17,F)}function ve(m){me=m,t(10,me)}const fe=()=>{t(13,te=!te)};return i.$$set=m=>{"defaultQcSpecId"in m&&t(29,w=m.defaultQcSpecId),"selectedQcRootId"in m&&t(30,B=m.selectedQcRootId),"rootType"in m&&t(31,$=m.rootType),"attributeLabels"in m&&t(1,ee=m.attributeLabels),"fullQcSpecs"in m&&t(28,W=m.fullQcSpecs),"removeHighlightUnhover"in m&&t(32,D=m.removeHighlightUnhover),"startSentence"in m&&t(2,Y=m.startSentence),"specFilterYear"in m&&t(0,re=m.specFilterYear)},i.$$.update=()=>{i.$$.dirty[0]&1&&t(35,l=re==vi?"all":`y-${re}`),i.$$.dirty[0]&268435456|i.$$.dirty[1]&1&&t(34,o=Qe(W,$)),i.$$.dirty[0]&48&&t(11,r=R/K*Je),i.$$.dirty[0]&2064&&t(37,s=m=>m*R/r),i.$$.dirty[0]&32&&t(36,c=m=>m*K/Je),i.$$.dirty[1]&96&&t(23,u=Oi(s,c)),i.$$.dirty[0]&2048&&t(22,h=Ae*r/100),i.$$.dirty[0]&2048&&t(21,g={height:r*we/100,width:at,x:ue+tt,y:-r*we/100}),i.$$.dirty[0]&2048&&t(20,k={height:r,width:Je,x:0,y:-(we+Ae)*r/100}),i.$$.dirty[0]&1073742850|i.$$.dirty[1]&16&&v(me,B,ee,l),i.$$.dirty[0]&64&&ye(P),i.$$.dirty[0]&128&&z(ge),i.$$.dirty[0]&778|i.$$.dirty[1]&4&&t(12,f=ei(be,G,oe,ee,S)),i.$$.dirty[0]&7168|i.$$.dirty[1]&8&&I(f,r*(1-(we+ut)/100),M,o,me)},t(24,n=ki),[re,ee,Y,S,R,K,P,ge,be,oe,me,r,f,te,b,T,se,F,N,Ee,k,g,h,u,n,y,ue,A,W,w,B,$,D,G,o,l,c,s,ke,a,d,J,he,Oe,ve,fe]}class Vi extends Ze{constructor(e){super(),xe(this,e,Ti,yi,Xe,{defaultQcSpecId:29,selectedQcRootId:30,rootType:31,attributeLabels:1,fullQcSpecs:28,removeHighlightUnhover:32,startSentence:2,specFilterYear:0},null,[-1,-1,-1])}}export{Vi as F,Qi as f};

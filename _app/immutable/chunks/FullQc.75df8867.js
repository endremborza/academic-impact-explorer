import{s as Ze,e as qe,i as q,d as p,N as At,O as rt,r as Me,a as x,u as He,h as L,c as $,j as _,P as nt,Q as st,w as R,x as pe,R as at,A as Qe,y as ct,z as ft,S as Ft,f as V,g as N,J as jt,H as Xe,T as Gt,l as ce,m as ae,n as Fe,k as Ut,U as lt,V as Mt,C as Wt,E as Yt,F as Jt,G as Kt,p as We,D as Ye,v as Xt}from"./scheduler.2d1c82f4.js";import{S as xe,i as $e,g as Ge,c as Ue,a as P,t as J,b as De,d as Re,m as Be,h as Ce,e as Ee,f as Je}from"./index.bf293594.js";import{e as Oe,u as Zt,o as xt}from"./each.66af19a5.js";import{g as ot,a as Ht,b as $t}from"./style-util.70c21ca4.js";import{f as Pe}from"./index.e8025cb1.js";import{g as Qt,D as _t,d as ei,a as ti,b as ii,p as ri,c as ni}from"./tree-functions.ed777bc7.js";import{f as et}from"./text-format-util.e81a9716.js";import{M as tt}from"./constants.405bf6bd.js";import{B as Vt}from"./BrokenFittedText.2ee271a1.js";import{g as si}from"./visual-util.fb52d494.js";/* empty css                                             */import{P as li}from"./PathLevelInfoBox.d14cfe9b.js";const Qi={"qc-6c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-8":{bifurcations:[{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0}],root_entity_type:"institutions"},"qc-5c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1}],root_entity_type:"countries"},"qc-7":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"0-country-hierarchy-1",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0}],root_entity_type:"institutions"},"qc-2c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-3c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"countries"},"qc-7c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"0-country-hierarchy-1",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0}],root_entity_type:"countries"},"qc-6":{bifurcations:[{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-8c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-1",source_side:!0},{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0}],root_entity_type:"countries"},"qc-1c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"countries"},"qc-4":{bifurcations:[{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-2":{bifurcations:[{attribute_kind:"qs",resolver_id:"w2qs",description:"0-w2qs-0",source_side:!0},{attribute_kind:"sources",resolver_id:"w2qs",description:"0-w2qs-1",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1}],root_entity_type:"institutions"},"qc-4c":{bifurcations:[{attribute_kind:"institutions",resolver_id:"agged-institutions-to-countries",description:"agged-institutions-to-countries",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"0-concept-hierarchy-0",source_side:!0},{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1}],root_entity_type:"countries"},"qc-3":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"1-country-hierarchy-0",source_side:!1},{attribute_kind:"institutions",resolver_id:"country-hierarchy",description:"1-country-hierarchy-1",source_side:!1},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"institutions"},"qc-5":{bifurcations:[{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1},{attribute_kind:"sources",resolver_id:"w2qs",description:"1-w2qs-1",source_side:!1}],root_entity_type:"institutions"},"qc-1":{bifurcations:[{attribute_kind:"countries",resolver_id:"country-hierarchy",description:"0-country-hierarchy-0",source_side:!0},{attribute_kind:"fields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-0",source_side:!1},{attribute_kind:"subfields",resolver_id:"concept-hierarchy",description:"1-concept-hierarchy-1",source_side:!1}],root_entity_type:"institutions"}};function Ne(i,e,t,l,o){return()=>{i("ti",{path:t,action:e,topLeftCorner:{x:l,y:o}})}}function pt(i,e,t){const l=i.slice();return l[43]=e[t].id,l[44]=e[t].cachedProps,l[45]=e[t].vizInfo,l[46]=e[t].childNode,l[47]=e[t].textShape,l[48]=e[t].hoverShape,l}function gt(i,e,t){const l=i.slice();return l[51]=e[t][0],l[52]=e[t][1],l}function bt(i){let e,t,l;return{c(){e=Me("stop"),this.h()},l(o){e=He(o,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),L(e).forEach(p),this.h()},h(){_(e,"offset",i[51]+"%"),_(e,"stop-opacity",t=i[46].isSelected?"80%":`${i[52]}%`),_(e,"stop-color",l=i[45].colorStr),_(e,"class","svelte-1cwbp37")},m(o,n){q(o,e,n)},p(o,n){n[0]&8192&&t!==(t=o[46].isSelected?"80%":`${o[52]}%`)&&_(e,"stop-opacity",t),n[0]&8192&&l!==(l=o[45].colorStr)&&_(e,"stop-color",l)},d(o){o&&p(e)}}}function mt(i){let e,t;const l=[i[44],{qcSpec:i[0]},{attributeLabels:i[1]},{visibleTreeInfo:i[2]},{selectionState:i[3]},{levelOutSpecs:i[4]},{treeD2:i[5]},{treeD2Offset:i[9]},{childD1Rate:i[6]},{overHangRate:i[7]},{preStraightRate:i[8]},{childBaseSize:i[10]},{linkSurfaceRate:i[11]},{childrenInternalMargin:i[12]},{parentSideMargin:0}];let o={};for(let n=0;n<l.length;n+=1)o=rt(o,l[n]);return e=new Nt({props:o}),e.$on("ti",i[33]),{c(){De(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,r){Be(e,n,r),t=!0},p(n,r){const s=r[0]&16383?ot(l,[r[0]&8192&&Ht(n[44]),r[0]&1&&{qcSpec:n[0]},r[0]&2&&{attributeLabels:n[1]},r[0]&4&&{visibleTreeInfo:n[2]},r[0]&8&&{selectionState:n[3]},r[0]&16&&{levelOutSpecs:n[4]},r[0]&32&&{treeD2:n[5]},r[0]&512&&{treeD2Offset:n[9]},r[0]&64&&{childD1Rate:n[6]},r[0]&128&&{overHangRate:n[7]},r[0]&256&&{preStraightRate:n[8]},r[0]&1024&&{childBaseSize:n[10]},r[0]&2048&&{linkSurfaceRate:n[11]},r[0]&4096&&{childrenInternalMargin:n[12]},l[14]]):{};e.$set(s)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){J(e.$$.fragment,n),t=!1},d(n){Ee(e,n)}}}function vt(i,e){let t,l,o,n,r,s,c,u,h,g,y,f,v,w,B,ee,A,ne=Oe([[0,5],[20,15],[50,25]]),I=[];for(let b=0;b<3;b+=1)I[b]=bt(gt(e,ne,b));const j=[{text:e[46].name},e[47]];let se={};for(let b=0;b<j.length;b+=1)se=rt(se,j[b]);g=new Vt({props:se});let te=[e[48],{"fill-opacity":"0"}],ie={};for(let b=0;b<te.length;b+=1)ie=rt(ie,te[b]);let S=e[46].children&&mt(e);return{key:i,first:null,c(){t=Me("defs"),l=Me("linearGradient");for(let b=0;b<3;b+=1)I[b].c();n=x(),r=Me("path"),h=x(),De(g.$$.fragment),y=x(),f=Me("rect"),v=x(),S&&S.c(),w=qe(),this.h()},l(b){t=He(b,"defs",{});var O=L(t);l=He(O,"linearGradient",{id:!0,gradientTransform:!0});var M=L(l);for(let D=0;D<3;D+=1)I[D].l(M);M.forEach(p),O.forEach(p),n=$(b),r=He(b,"path",{d:!0,fill:!0,class:!0}),L(r).forEach(p),h=$(b),Re(g.$$.fragment,b),y=$(b),f=He(b,"rect",{"fill-opacity":!0}),L(f).forEach(p),v=$(b),S&&S.l(b),w=qe(),this.h()},h(){_(l,"id",o="path-grad-"+e[45].strId),_(l,"gradientTransform","rotate(90)"),_(r,"d",s=e[45].linkPath),_(r,"fill",c="url('#path-grad-"+e[45].strId+"')"),_(r,"class","svelte-1cwbp37"),nt(f,ie),st(f,"svelte-1cwbp37",!0),this.first=t},m(b,O){q(b,t,O),R(t,l);for(let M=0;M<3;M+=1)I[M]&&I[M].m(l,null);q(b,n,O),q(b,r,O),q(b,h,O),Be(g,b,O),q(b,y,O),q(b,f,O),q(b,v,O),S&&S.m(b,O),q(b,w,O),B=!0,ee||(A=[pe(f,"mouseover",function(){at(Ne(e[14],"highlight",e[44].pathInCompleteTree,e[48].x,e[48].y))&&Ne(e[14],"highlight",e[44].pathInCompleteTree,e[48].x,e[48].y).apply(this,arguments)}),pe(f,"mouseleave",function(){at(Ne(e[14],"de-highlight",e[44].pathInCompleteTree,0,0))&&Ne(e[14],"de-highlight",e[44].pathInCompleteTree,0,0).apply(this,arguments)}),pe(f,"click",function(){at(Ne(e[14],"toggle-select",e[44].pathInCompleteTree,0,0))&&Ne(e[14],"toggle-select",e[44].pathInCompleteTree,0,0).apply(this,arguments)})],ee=!0)},p(b,O){if(e=b,O[0]&8192){ne=Oe([[0,5],[20,15],[50,25]]);let D;for(D=0;D<3;D+=1){const X=gt(e,ne,D);I[D]?I[D].p(X,O):(I[D]=bt(X),I[D].c(),I[D].m(l,null))}for(;D<3;D+=1)I[D].d(1)}(!B||O[0]&8192&&o!==(o="path-grad-"+e[45].strId))&&_(l,"id",o),(!B||O[0]&8192&&s!==(s=e[45].linkPath))&&_(r,"d",s),(!B||O[0]&8192&&c!==(c="url('#path-grad-"+e[45].strId+"')"))&&_(r,"fill",c);const M=O[0]&8192?ot(j,[{text:e[46].name},Ht(e[47])]):{};g.$set(M),nt(f,ie=ot(te,[O[0]&8192&&e[48],{"fill-opacity":"0"}])),st(f,"svelte-1cwbp37",!0),e[46].children?S?(S.p(e,O),O[0]&8192&&P(S,1)):(S=mt(e),S.c(),P(S,1),S.m(w.parentNode,w)):S&&(Ge(),J(S,1,1,()=>{S=null}),Ue())},i(b){B||(b&&Qe(()=>{B&&(u||(u=Ce(r,Pe,{duration:300},!0)),u.run(1))}),P(g.$$.fragment,b),P(S),B=!0)},o(b){b&&(u||(u=Ce(r,Pe,{duration:300},!1)),u.run(0)),J(g.$$.fragment,b),J(S),B=!1},d(b){b&&(p(t),p(n),p(r),p(h),p(y),p(f),p(v),p(w)),ct(I,b),b&&u&&u.end(),Ee(g,b),S&&S.d(b),ee=!1,ft(A)}}}function oi(i){let e=[],t=new Map,l,o,n=Oe(i[13]);const r=s=>s[43];for(let s=0;s<n.length;s+=1){let c=pt(i,n,s),u=r(c);t.set(u,e[s]=vt(u,c))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=qe()},l(s){for(let c=0;c<e.length;c+=1)e[c].l(s);l=qe()},m(s,c){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,c);q(s,l,c),o=!0},p(s,c){c[0]&32767&&(n=Oe(s[13]),Ge(),e=Zt(e,c,r,1,s,n,t,l.parentNode,xt,vt,l,pt),Ue())},i(s){if(!o){for(let c=0;c<n.length;c+=1)P(e[c]);o=!0}},o(s){for(let c=0;c<e.length;c+=1)J(e[c]);o=!1},d(s){s&&p(l);for(let c=0;c<e.length;c+=1)e[c].d(s)}}}function yt(i,e,t,l,o,n,r){const s=h=>o*(h||0)/n,c=l+s(e),u=i+((t==null?void 0:t.rank)||0)*(l+r)+s(t==null?void 0:t.weight);return{rootD2:c,d2Offset:u}}function ci(i,e,t){let l,o,n,r,s,c,u,h,g,y,f,v,w,B,ee,A,ne,I,j,se,{qcSpec:te}=e,{attributeLabels:ie}=e,{visibleTreeInfo:S}=e,{selectionState:b}=e,{levelOutSpecs:O=[]}=e,{pathInCompleteTree:M=[]}=e,{branchReachBack:D=0}=e,{rootD2:X=30}=e,{treeD2:ue=70}=e,{childD1Rate:re=.2}=e,{overHangRate:U=.05}=e,{preStraightRate:W=.05}=e,{treeD2Offset:Y=0}=e,{childBaseSize:C=2.9}=e,{linkSurfaceRate:ge=.8}=e,{childrenInternalMargin:be=.9}=e,{parentSideMargin:le=.8}=e,{d2Offset:we=(ue-X)/2+Y}=e;const ve=At(),Ve=k=>k===void 0?0:k;function je(k,T){var H;const z={pathInCompleteTree:[...M,k],...yt(Y,T.weight,T==null?void 0:T.totalOffsetOnLevel,C,j,((H=S.meta[o])==null?void 0:H.totalWeight)||1,be)},F=yt(we+le,T.weight,T==null?void 0:T.totalOffsetAmongSiblings,I,A*(r>1?ge:1)-I*r,(n==null?void 0:n.childrenSumWeight)||1,ne),a={parent:F.rootD2,child:z.rootD2},d=g+(T.isSelected?f:0),K={x:F.d2Offset,y:v},fe={x:z.d2Offset,y:w};let Te=si(K,fe,a,d,ee),ke={x:z.d2Offset+a.child*.18,y:B-g*.05,height:g*.9,width:a.child*.64};const me={x:z.d2Offset,y:w,height:g,width:a.child};return{id:k,cachedProps:z,vizInfo:{linkPath:Te,d2Size:a.child,colorStr:$t(T.scaleEnds.mid),strId:z.pathInCompleteTree.join("-")},childNode:T,textShape:ke,hoverShape:me}}function ye(k,T){return Object.entries((k==null?void 0:k.children)||{}).map(([z,F])=>je(z,F))}function E(k){Ft.call(this,i,k)}return i.$$set=k=>{"qcSpec"in k&&t(0,te=k.qcSpec),"attributeLabels"in k&&t(1,ie=k.attributeLabels),"visibleTreeInfo"in k&&t(2,S=k.visibleTreeInfo),"selectionState"in k&&t(3,b=k.selectionState),"levelOutSpecs"in k&&t(4,O=k.levelOutSpecs),"pathInCompleteTree"in k&&t(15,M=k.pathInCompleteTree),"branchReachBack"in k&&t(16,D=k.branchReachBack),"rootD2"in k&&t(17,X=k.rootD2),"treeD2"in k&&t(5,ue=k.treeD2),"childD1Rate"in k&&t(6,re=k.childD1Rate),"overHangRate"in k&&t(7,U=k.overHangRate),"preStraightRate"in k&&t(8,W=k.preStraightRate),"treeD2Offset"in k&&t(9,Y=k.treeD2Offset),"childBaseSize"in k&&t(10,C=k.childBaseSize),"linkSurfaceRate"in k&&t(11,ge=k.linkSurfaceRate),"childrenInternalMargin"in k&&t(12,be=k.childrenInternalMargin),"parentSideMargin"in k&&t(18,le=k.parentSideMargin),"d2Offset"in k&&t(19,we=k.d2Offset)},i.$$.update=()=>{var k;i.$$.dirty[0]&32768&&t(32,l=M.length),i.$$.dirty[1]&2&&t(27,o=l+1),i.$$.dirty[0]&32772&&t(21,n=Qt(M,S.tree)),i.$$.dirty[0]&2097152&&t(25,r=Object.keys((n==null?void 0:n.children)||{}).length),i.$$.dirty[0]&16|i.$$.dirty[1]&2&&t(20,s=O[l]),i.$$.dirty[0]&134217732&&t(28,c=((k=S.meta[o])==null?void 0:k.totalNodes)||0),i.$$.dirty[0]&1048576&&t(31,u=Ve(s==null?void 0:s.topOffset)),i.$$.dirty[0]&1049024&&t(30,[h,g,y,f]=[1-re-W-U,re,W,U].map(T=>Ve((s==null?void 0:s.totalSize)*T)),h,(t(22,g),t(6,re),t(8,W),t(7,U),t(20,s),t(4,O),t(32,l),t(15,M)),(t(29,y),t(6,re),t(8,W),t(7,U),t(20,s),t(4,O),t(32,l),t(15,M))),i.$$.dirty[0]&536870912|i.$$.dirty[1]&1&&t(24,v=u+y),i.$$.dirty[0]&1090519040&&t(23,w=v+h),i.$$.dirty[0]&12582912&&(B=w+g),i.$$.dirty[0]&536936448&&(ee=D+y),i.$$.dirty[0]&393216&&t(26,A=X-2*le),i.$$.dirty[0]&100665344&&(ne=A*(1-ge)/(r>1?r-1:1)),i.$$.dirty[0]&100665344&&(I=A*ge/(r*1.8)),i.$$.dirty[0]&268440608&&(j=ue-C*c-be*(c-1)),i.$$.dirty[0]&3145728&&t(13,se=ye(n))},[te,ie,S,b,O,ue,re,U,W,Y,C,ge,be,se,ve,M,D,X,le,we,s,n,g,w,v,r,A,o,c,y,h,u,l,E]}class Nt extends xe{constructor(e){super(),$e(this,e,ci,oi,Ze,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectionState:3,levelOutSpecs:4,pathInCompleteTree:15,branchReachBack:16,rootD2:17,treeD2:5,childD1Rate:6,overHangRate:7,preStraightRate:8,treeD2Offset:9,childBaseSize:10,linkSurfaceRate:11,childrenInternalMargin:12,parentSideMargin:18,d2Offset:19},null,[-1,-1])}}function ai(i){let e,t,l,o,n="<span>−</span><span>+</span>",r,s,c,u;return{c(){e=V("div"),t=V("input"),l=x(),o=V("label"),o.innerHTML=n,this.h()},l(h){e=N(h,"DIV",{class:!0});var g=L(e);t=N(g,"INPUT",{type:!0,min:!0,max:!0,class:!0}),l=$(g),o=N(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),jt(o)!=="svelte-3lai9p"&&(o.innerHTML=n),g.forEach(p),this.h()},h(){_(t,"type","range"),_(t,"min",i[1]),_(t,"max",i[2]),_(t,"class","svelte-1gdj9q3"),_(o,"for","topn-input"),_(o,"class","svelte-1gdj9q3"),_(e,"class","vert-zero svelte-1gdj9q3")},m(h,g){q(h,e,g),R(e,t),Xe(t,i[0]),R(e,l),R(e,o),s=!0,c||(u=[pe(t,"change",i[4]),pe(t,"input",i[4])],c=!0)},p(h,[g]){i=h,(!s||g&2)&&_(t,"min",i[1]),(!s||g&4)&&_(t,"max",i[2]),g&1&&Xe(t,i[0])},i(h){s||(h&&Qe(()=>{s&&(r||(r=Ce(e,Pe,{duration:i[3]},!0)),r.run(1))}),s=!0)},o(h){h&&(r||(r=Ce(e,Pe,{duration:i[3]},!1)),r.run(0)),s=!1},d(h){h&&p(e),h&&r&&r.end(),c=!1,ft(u)}}}function ui(i,e,t){let{value:l}=e,{min:o}=e,{max:n}=e,{duration:r=400}=e;function s(){l=Gt(this.value),t(0,l)}return i.$$set=c=>{"value"in c&&t(0,l=c.value),"min"in c&&t(1,o=c.min),"max"in c&&t(2,n=c.max),"duration"in c&&t(3,r=c.duration)},[l,o,n,r,s]}class hi extends xe{constructor(e){super(),$e(this,e,ui,ai,Ze,{value:0,min:1,max:2,duration:3})}}function kt(i,e,t){const l=i.slice();return l[7]=e[t],l}function wt(i){let e,t,l,o=i[5](i[0][i[2]]||"").split("<")[0]+"",n,r,s,c,u,h,g,y,f=i[1].levelOptions.length>1&&St(i);return{c(){e=V("div"),t=V("div"),l=V("span"),n=ce(o),s=x(),f&&f.c(),c=x(),u=V("div"),this.h()},l(v){e=N(v,"DIV",{class:!0,style:!0});var w=L(e);t=N(w,"DIV",{class:!0});var B=L(t);l=N(B,"SPAN",{class:!0});var ee=L(l);n=ae(ee,o),ee.forEach(p),B.forEach(p),s=$(w),f&&f.l(w),c=$(w),u=N(w,"DIV",{class:!0}),L(u).forEach(p),w.forEach(p),this.h()},h(){_(l,"class","svelte-1hzgw1i"),_(t,"class",r="sel-base sel-cover "+(i[1].levelOptions.length>1?"sel-clicky":"")+" svelte-1hzgw1i"),_(u,"class","bg filler svelte-1hzgw1i"),_(e,"class","sentenceline svelte-1hzgw1i"),_(e,"style",h=i[4]({top:i[1].topOffset+i[1].totalSize*.2+i[3],height:i[1].totalSize*.25},{},{}))},m(v,w){q(v,e,w),R(e,t),R(t,l),R(l,n),R(e,s),f&&f.m(e,null),R(e,c),R(e,u),y=!0},p(v,w){(!y||w&5)&&o!==(o=v[5](v[0][v[2]]||"").split("<")[0]+"")&&Fe(n,o),(!y||w&2&&r!==(r="sel-base sel-cover "+(v[1].levelOptions.length>1?"sel-clicky":"")+" svelte-1hzgw1i"))&&_(t,"class",r),v[1].levelOptions.length>1?f?f.p(v,w):(f=St(v),f.c(),f.m(e,c)):f&&(f.d(1),f=null),(!y||w&26&&h!==(h=v[4]({top:v[1].topOffset+v[1].totalSize*.2+v[3],height:v[1].totalSize*.25},{},{})))&&_(e,"style",h)},i(v){y||(v&&Qe(()=>{y&&(g||(g=Ce(e,Pe,{duration:400},!0)),g.run(1))}),y=!0)},o(v){v&&(g||(g=Ce(e,Pe,{duration:400},!1)),g.run(0)),y=!1},d(v){v&&p(e),f&&f.d(),v&&g&&g.end()}}}function St(i){let e,t,l,o=Oe(i[1].levelOptions),n=[];for(let r=0;r<o.length;r+=1)n[r]=qt(kt(i,o,r));return{c(){e=V("select");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=N(r,"SELECT",{class:!0,style:!0});var s=L(e);for(let c=0;c<n.length;c+=1)n[c].l(s);s.forEach(p),this.h()},h(){_(e,"class","sel-base svelte-1hzgw1i"),Ut(e,"opacity","0"),i[0][i[2]]===void 0&&Qe(()=>i[6].call(e))},m(r,s){q(r,e,s);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);lt(e,i[0][i[2]],!0),t||(l=pe(e,"change",i[6]),t=!0)},p(r,s){if(s&34){o=Oe(r[1].levelOptions);let c;for(c=0;c<o.length;c+=1){const u=kt(r,o,c);n[c]?n[c].p(u,s):(n[c]=qt(u),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=o.length}s&7&&lt(e,r[0][r[2]])},d(r){r&&p(e),ct(n,r),t=!1,l()}}}function qt(i){let e,t=i[5](i[7])+"",l,o,n;return{c(){e=V("option"),l=ce(t),o=x(),this.h()},l(r){e=N(r,"OPTION",{class:!0});var s=L(e);l=ae(s,t),o=$(s),s.forEach(p),this.h()},h(){e.__value=n=i[7],Xe(e,e.__value),_(e,"class","svelte-1hzgw1i")},m(r,s){q(r,e,s),R(e,l),R(e,o)},p(r,s){s&2&&t!==(t=r[5](r[7])+"")&&Fe(l,t),s&2&&n!==(n=r[7])&&(e.__value=n,Xe(e,e.__value))},d(r){r&&p(e)}}}function fi(i){let e,t=i[1].isVisible&&wt(i);return{c(){t&&t.c(),e=qe()},l(l){t&&t.l(l),e=qe()},m(l,o){t&&t.m(l,o),q(l,e,o)},p(l,[o]){l[1].isVisible?t?(t.p(l,o),o&2&&P(t,1)):(t=wt(l),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(Ge(),J(t,1,1,()=>{t=null}),Ue())},i(l){P(t)},o(l){J(t)},d(l){l&&p(e),t&&t.d(l)}}}function di(i,e,t){let{levelSpec:l}=e,{index:o}=e,{selectedBreakdowns:n}=e,{totalD1Offset:r}=e,{dBasedStyle:s}=e;function c(h){let g=n[0]=="1-w2qs-1",y=n[0]=="agged-institutions-to-countries",f={"agged-institutions-to-countries":"working at"},v=y?Math.max(o-1,0):o;return[{"0-concept-hierarchy-0":"working on <field>","0-concept-hierarchy-1":"working on <subfield>","1-concept-hierarchy-0":"are cited by papers in <field>","0-country-hierarchy-0":"co-author with scholars working in <country>","1-country-hierarchy-0":"are cited by authors working in <country>","0-w2qs-0":"publish in journals categorized as <q#>","1-w2qs-1":"are cited in papers published in <journal>"},{"1-concept-hierarchy-0":"and are cited by authors working on","1-concept-hierarchy-1":"and in particular","0-country-hierarchy-1":"working at","1-country-hierarchy-0":(g?"":"are cited ")+"by authors in","1-country-hierarchy-1":"at","0-w2qs-0":"publish in journals categorized as","0-w2qs-1":"such as"},{"0-concept-hierarchy-0":"focused on","1-concept-hierarchy-1":"and in particular in","1-country-hierarchy-1":"working at","1-concept-hierarchy-0":(g?"working ":"")+"on","0-w2qs-1":"such as","1-w2qs-1":"published in","1-country-hierarchy-0":"and are cited by authors working in"},{"0-concept-hierarchy-1":"and in particular","1-concept-hierarchy-0":"on","1-concept-hierarchy-1":"and in particular"},{}][v][h]||f[h]||h}function u(){n[o]=Mt(this),t(0,n),t(1,l)}return i.$$set=h=>{"levelSpec"in h&&t(1,l=h.levelSpec),"index"in h&&t(2,o=h.index),"selectedBreakdowns"in h&&t(0,n=h.selectedBreakdowns),"totalD1Offset"in h&&t(3,r=h.totalD1Offset),"dBasedStyle"in h&&t(4,s=h.dBasedStyle)},[n,l,o,r,s,c,u]}class _i extends xe{constructor(e){super(),$e(this,e,di,fi,Ze,{levelSpec:1,index:2,selectedBreakdowns:0,totalD1Offset:3,dBasedStyle:4})}}function Ot(i){let e,t,l;return{c(){e=V("input"),this.h()},l(o){e=N(o,"INPUT",{type:!0}),this.h()},h(){_(e,"type","checkbox")},m(o,n){q(o,e,n),e.checked=i[1],t||(l=pe(e,"change",i[9]),t=!0)},p(o,n){n&2&&(e.checked=o[1])},d(o){o&&p(e),t=!1,l()}}}function pi(i){let e,t,l="i",o,n,r,s,c,u;const h=i[5].default,g=Wt(h,i,i[4],null);let y=i[2]&&Ot(i);return{c(){e=V("div"),t=V("span"),t.textContent=l,o=x(),n=V("span"),g&&g.c(),r=x(),y&&y.c(),this.h()},l(f){e=N(f,"DIV",{id:!0,class:!0});var v=L(e);t=N(v,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),jt(t)!=="svelte-6462kx"&&(t.textContent=l),o=$(v),n=N(v,"SPAN",{id:!0,class:!0});var w=L(n);g&&g.l(w),w.forEach(p),r=$(v),y&&y.l(v),v.forEach(p),this.h()},h(){_(t,"id","spec-info-hover"),_(t,"class","small-hover svelte-1cmmek4"),_(n,"id","spec-label"),_(n,"class","small-hover svelte-1cmmek4"),_(e,"id","spec-container"),_(e,"class","svelte-1cmmek4")},m(f,v){q(f,e,v),R(e,t),R(e,o),R(e,n),g&&g.m(n,null),R(e,r),y&&y.m(e,null),s=!0,c||(u=[pe(t,"mouseover",i[6]),pe(t,"mouseleave",i[7]),pe(n,"click",i[8])],c=!0)},p(f,[v]){g&&g.p&&(!s||v&16)&&Yt(g,h,f,f[4],s?Kt(h,f[4],v,null):Jt(f[4]),null),f[2]?y?y.p(f,v):(y=Ot(f),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i(f){s||(P(g,f),s=!0)},o(f){J(g,f),s=!1},d(f){f&&p(e),g&&g.d(f),y&&y.d(),c=!1,ft(u)}}}function gi(i,e,t){let{$$slots:l={},$$scope:o}=e,{hoverToggle:n}=e,{checked:r}=e,{checkBox:s=!0}=e,{interactText:c=!0}=e;const u=()=>{t(0,n=!0)},h=()=>{t(0,n=!1)},g=()=>{c&&t(1,r=!r)};function y(){r=this.checked,t(1,r)}return i.$$set=f=>{"hoverToggle"in f&&t(0,n=f.hoverToggle),"checked"in f&&t(1,r=f.checked),"checkBox"in f&&t(2,s=f.checkBox),"interactText"in f&&t(3,c=f.interactText),"$$scope"in f&&t(4,o=f.$$scope)},[n,r,s,c,o,l,u,h,g,y]}class Tt extends xe{constructor(e){super(),$e(this,e,gi,pi,Ze,{hoverToggle:0,checked:1,checkBox:2,interactText:3})}}function It(i,e,t){const l=i.slice();return l[56]=e[t],l[58]=t,l}function Dt(i,e,t){const l=i.slice();return l[59]=e[t],l}function Rt(i){let e,t,l,o,n,r,s,c,u,h,g,y,f,v,w,B,ee,A,ne,I,j,se,te,ie,S,b,O,M,D,X,ue,re,U;t=new Nt({props:{qcSpec:i[4],branchReachBack:i[12]*Se/100,d2Offset:i[26]+it,rootD2:ut,attributeLabels:i[2],visibleTreeInfo:i[13],selectionState:i[10],levelOutSpecs:i[19],treeD2:Ke-it,treeD2Offset:it,childD1Rate:i[24],overHangRate:wi,childBaseSize:Si}}),t.$on("ti",i[27]);let W=[{id:"qc-header"},i[21],{rx:"0.4"}],Y={};for(let a=0;a<W.length;a+=1)Y=rt(Y,W[a]);o=new Vt({props:{height:i[21].height*.7,width:i[21].width*.8,text:i[1]||"",anchor:"middle",bottomAligned:!1,x:i[21].x+i[21].width/2,y:i[21].y+i[21].height*.75,allowRotation:!1}});let C=i[9].weight>1&&Bt(i);function ge(a){i[38](a)}let be={min:1,max:qi};i[7]!==void 0&&(be.value=i[7]),B=new hi({props:be}),We.push(()=>Je(B,"value",ge));function le(a){i[39](a)}function we(a){i[40](a)}let ve={$$slots:{default:[bi]},$$scope:{ctx:i}};i[17]!==void 0&&(ve.hoverToggle=i[17]),i[8]!==void 0&&(ve.checked=i[8]),j=new Tt({props:ve}),We.push(()=>Je(j,"hoverToggle",le)),We.push(()=>Je(j,"checked",we));function Ve(a){i[42](a)}let je={interactText:!1,checked:!1,checkBox:!1,$$slots:{default:[mi]},$$scope:{ctx:i}};i[18]!==void 0&&(je.hoverToggle=i[18]),S=new Tt({props:je}),We.push(()=>Je(S,"hoverToggle",Ve));let ye=Oe(i[19]||[]),E=[];for(let a=0;a<ye.length;a+=1)E[a]=zt(It(i,ye,a));const k=a=>J(E[a],1,1,()=>{E[a]=null});let T=i[15].length>0&&Lt(i),z=i[17]&&Ct(i),F=i[18]&&Pt(i);return{c(){e=Me("svg"),De(t.$$.fragment),l=Me("rect"),De(o.$$.fragment),r=x(),s=V("div"),c=V("p"),u=ce(i[3]),g=x(),y=V("div"),C&&C.c(),v=x(),w=V("div"),De(B.$$.fragment),ne=x(),I=V("div"),De(j.$$.fragment),ie=x(),De(S.$$.fragment),M=x();for(let a=0;a<E.length;a+=1)E[a].c();D=x(),T&&T.c(),X=x(),z&&z.c(),ue=x(),F&&F.c(),re=qe(),this.h()},l(a){e=He(a,"svg",{viewBox:!0,xmlns:!0,class:!0});var d=L(e);Re(t.$$.fragment,d),l=He(d,"rect",{id:!0,rx:!0}),L(l).forEach(p),Re(o.$$.fragment,d),d.forEach(p),r=$(a),s=N(a,"DIV",{class:!0,style:!0});var K=L(s);c=N(K,"P",{id:!0,class:!0});var fe=L(c);u=ae(fe,i[3]),fe.forEach(p),K.forEach(p),g=$(a),y=N(a,"DIV",{class:!0,style:!0});var Te=L(y);C&&C.l(Te),Te.forEach(p),v=$(a),w=N(a,"DIV",{class:!0,style:!0});var ke=L(w);Re(B.$$.fragment,ke),ke.forEach(p),ne=$(a),I=N(a,"DIV",{class:!0,id:!0,style:!0});var me=L(I);Re(j.$$.fragment,me),ie=$(me),Re(S.$$.fragment,me),me.forEach(p),M=$(a);for(let H=0;H<E.length;H+=1)E[H].l(a);D=$(a),T&&T.l(a),X=$(a),z&&z.l(a),ue=$(a),F&&F.l(a),re=qe(),this.h()},h(){nt(l,Y),st(l,"svelte-1eprj6g",!0),_(e,"viewBox",n=i[20].x+" "+i[20].y+" "+i[20].width+" "+i[20].height),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"class","svelte-1eprj6g"),_(c,"id","sentence-starter"),_(c,"class","svelte-1eprj6g"),_(s,"class","floater sentence-container svelte-1eprj6g"),_(s,"style",h=i[23]({top:0},{left:20,width:60},{height:Ae})),_(y,"class","floater sentence-container svelte-1eprj6g"),_(y,"style",f=i[23]({},{left:i[21].x-i[21].width/2,width:i[21].width*2},{height:Se*.15,top:Se*.85+Ae})),_(w,"class","floater svelte-1eprj6g"),_(w,"style",A=i[23]({top:i[22]+i[21].height*.5,height:0},{left:Le,width:i[26]*.82},{})),_(I,"class","floater svelte-1eprj6g"),_(I,"id","right-control"),_(I,"style",O=i[23]({top:i[22],height:i[21].height},{right:Le,width:100-i[21].width-i[26]-Le-Le},{}))},m(a,d){q(a,e,d),Be(t,e,null),R(e,l),Be(o,e,null),q(a,r,d),q(a,s,d),R(s,c),R(c,u),q(a,g,d),q(a,y,d),C&&C.m(y,null),q(a,v,d),q(a,w,d),Be(B,w,null),q(a,ne,d),q(a,I,d),Be(j,I,null),R(I,ie),Be(S,I,null),q(a,M,d);for(let K=0;K<E.length;K+=1)E[K]&&E[K].m(a,d);q(a,D,d),T&&T.m(a,d),q(a,X,d),z&&z.m(a,d),q(a,ue,d),F&&F.m(a,d),q(a,re,d),U=!0},p(a,d){const K={};d[0]&16&&(K.qcSpec=a[4]),d[0]&4096&&(K.branchReachBack=a[12]*Se/100),d[0]&4&&(K.attributeLabels=a[2]),d[0]&8192&&(K.visibleTreeInfo=a[13]),d[0]&1024&&(K.selectionState=a[10]),d[0]&524288&&(K.levelOutSpecs=a[19]),d[0]&16777216&&(K.childD1Rate=a[24]),t.$set(K),nt(l,Y=ot(W,[{id:"qc-header"},d[0]&2097152&&a[21],{rx:"0.4"}])),st(l,"svelte-1eprj6g",!0);const fe={};d[0]&2097152&&(fe.height=a[21].height*.7),d[0]&2097152&&(fe.width=a[21].width*.8),d[0]&2&&(fe.text=a[1]||""),d[0]&2097152&&(fe.x=a[21].x+a[21].width/2),d[0]&2097152&&(fe.y=a[21].y+a[21].height*.75),o.$set(fe),(!U||d[0]&1048576&&n!==(n=a[20].x+" "+a[20].y+" "+a[20].width+" "+a[20].height))&&_(e,"viewBox",n),(!U||d[0]&8)&&Fe(u,a[3]),(!U||d[0]&8388608&&h!==(h=a[23]({top:0},{left:20,width:60},{height:Ae})))&&_(s,"style",h),a[9].weight>1?C?C.p(a,d):(C=Bt(a),C.c(),C.m(y,null)):C&&(C.d(1),C=null),(!U||d[0]&10485760&&f!==(f=a[23]({},{left:a[21].x-a[21].width/2,width:a[21].width*2},{height:Se*.15,top:Se*.85+Ae})))&&_(y,"style",f);const Te={};!ee&&d[0]&128&&(ee=!0,Te.value=a[7],Ye(()=>ee=!1)),B.$set(Te),(!U||d[0]&14680064&&A!==(A=a[23]({top:a[22]+a[21].height*.5,height:0},{left:Le,width:a[26]*.82},{})))&&_(w,"style",A);const ke={};d[2]&1&&(ke.$$scope={dirty:d,ctx:a}),!se&&d[0]&131072&&(se=!0,ke.hoverToggle=a[17],Ye(()=>se=!1)),!te&&d[0]&256&&(te=!0,ke.checked=a[8],Ye(()=>te=!1)),j.$set(ke);const me={};if(d[0]&1|d[2]&1&&(me.$$scope={dirty:d,ctx:a}),!b&&d[0]&262144&&(b=!0,me.hoverToggle=a[18],Ye(()=>b=!1)),S.$set(me),(!U||d[0]&14680064&&O!==(O=a[23]({top:a[22],height:a[21].height},{right:Le,width:100-a[21].width-a[26]-Le-Le},{})))&&_(I,"style",O),d[0]&15206400){ye=Oe(a[19]||[]);let H;for(H=0;H<ye.length;H+=1){const m=It(a,ye,H);E[H]?(E[H].p(m,d),P(E[H],1)):(E[H]=zt(m),E[H].c(),P(E[H],1),E[H].m(D.parentNode,D))}for(Ge(),H=ye.length;H<E.length;H+=1)k(H);Ue()}a[15].length>0?T?(T.p(a,d),d[0]&32768&&P(T,1)):(T=Lt(a),T.c(),P(T,1),T.m(X.parentNode,X)):T&&(Ge(),J(T,1,1,()=>{T=null}),Ue()),a[17]?z?z.p(a,d):(z=Ct(a),z.c(),z.m(ue.parentNode,ue)):z&&(z.d(1),z=null),a[18]?F?F.p(a,d):(F=Pt(a),F.c(),F.m(re.parentNode,re)):F&&(F.d(1),F=null)},i(a){if(!U){P(t.$$.fragment,a),P(o.$$.fragment,a),P(B.$$.fragment,a),P(j.$$.fragment,a),P(S.$$.fragment,a);for(let d=0;d<ye.length;d+=1)P(E[d]);P(T),U=!0}},o(a){J(t.$$.fragment,a),J(o.$$.fragment,a),J(B.$$.fragment,a),J(j.$$.fragment,a),J(S.$$.fragment,a),E=E.filter(Boolean);for(let d=0;d<E.length;d+=1)J(E[d]);J(T),U=!1},d(a){a&&(p(e),p(r),p(s),p(g),p(y),p(v),p(w),p(ne),p(I),p(M),p(D),p(X),p(ue),p(re)),Ee(t),Ee(o),C&&C.d(),Ee(B),Ee(j),Ee(S),ct(E,a),T&&T.d(a),z&&z.d(a),F&&F.d(a)}}}function Bt(i){let e,t,l=et(i[9].source_count||0,0)+"",o,n,r=et(i[9].weight||0,0)+"",s,c;return{c(){e=V("p"),t=ce("("),o=ce(l),n=ce(" papers, "),s=ce(r),c=ce(" citations)"),this.h()},l(u){e=N(u,"P",{id:!0,class:!0});var h=L(e);t=ae(h,"("),o=ae(h,l),n=ae(h," papers, "),s=ae(h,r),c=ae(h," citations)"),h.forEach(p),this.h()},h(){_(e,"id","num-stat-subtitle"),_(e,"class","svelte-1eprj6g")},m(u,h){q(u,e,h),R(e,t),R(e,o),R(e,n),R(e,s),R(e,c)},p(u,h){h[0]&512&&l!==(l=et(u[9].source_count||0,0)+"")&&Fe(o,l),h[0]&512&&r!==(r=et(u[9].weight||0,0)+"")&&Fe(s,r)},d(u){u&&p(e)}}}function bi(i){let e;return{c(){e=ce("Specialization")},l(t){e=ae(t,"Specialization")},m(t,l){q(t,e,l)},d(t){t&&p(e)}}}function Et(i){let e,t=i[59]+"",l;return{c(){e=V("option"),l=ce(t),this.h()},l(o){e=N(o,"OPTION",{});var n=L(e);l=ae(n,t),n.forEach(p),this.h()},h(){e.__value=i[59],Xe(e,e.__value)},m(o,n){q(o,e,n),R(e,l)},p:Xt,d(o){o&&p(e)}}}function mi(i){let e,t,l,o,n=Oe(i[25]),r=[];for(let s=0;s<n.length;s+=1)r[s]=Et(Dt(i,n,s));return{c(){e=ce(`Since
		`),t=V("select");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=ae(s,`Since
		`),t=N(s,"SELECT",{});var c=L(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(p),this.h()},h(){i[0]===void 0&&Qe(()=>i[41].call(t))},m(s,c){q(s,e,c),q(s,t,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);lt(t,i[0],!0),l||(o=pe(t,"change",i[41]),l=!0)},p(s,c){if(c[0]&33554432){n=Oe(s[25]);let u;for(u=0;u<n.length;u+=1){const h=Dt(s,n,u);r[u]?r[u].p(h,c):(r[u]=Et(h),r[u].c(),r[u].m(t,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}c[0]&33554433&&lt(t,s[0])},d(s){s&&(p(e),p(t)),ct(r,s),l=!1,o()}}}function zt(i){let e,t,l;function o(r){i[43](r)}let n={index:i[58],levelSpec:i[56],totalD1Offset:i[21].height+i[22],dBasedStyle:i[23]};return i[11]!==void 0&&(n.selectedBreakdowns=i[11]),e=new _i({props:n}),We.push(()=>Je(e,"selectedBreakdowns",o)),{c(){De(e.$$.fragment)},l(r){Re(e.$$.fragment,r)},m(r,s){Be(e,r,s),l=!0},p(r,s){const c={};s[0]&524288&&(c.levelSpec=r[56]),s[0]&6291456&&(c.totalD1Offset=r[21].height+r[22]),s[0]&8388608&&(c.dBasedStyle=r[23]),!t&&s[0]&2048&&(t=!0,c.selectedBreakdowns=r[11],Ye(()=>t=!1)),e.$set(c)},i(r){l||(P(e.$$.fragment,r),l=!0)},o(r){J(e.$$.fragment,r),l=!1},d(r){Ee(e,r)}}}function Lt(i){let e,t,l,o,n,r,s;return t=new li({props:{path:i[15],weightedRoot:i[9],qcSpec:i[4],rootId:i[16],attributeLabels:i[2],showPaper:i[14]}}),{c(){e=V("div"),De(t.$$.fragment),this.h()},l(c){e=N(c,"DIV",{class:!0,style:!0});var u=L(e);Re(t.$$.fragment,u),u.forEach(p),this.h()},h(){_(e,"class","hoverover clickable svelte-1eprj6g"),_(e,"style",l=i[23]({},{right:2,width:96},{bottom:1,height:ht/(i[14]?.5:2)}))},m(c,u){q(c,e,u),Be(t,e,null),n=!0,r||(s=pe(e,"click",i[44]),r=!0)},p(c,u){const h={};u[0]&32768&&(h.path=c[15]),u[0]&512&&(h.weightedRoot=c[9]),u[0]&16&&(h.qcSpec=c[4]),u[0]&65536&&(h.rootId=c[16]),u[0]&4&&(h.attributeLabels=c[2]),u[0]&16384&&(h.showPaper=c[14]),t.$set(h),(!n||u[0]&8404992&&l!==(l=c[23]({},{right:2,width:96},{bottom:1,height:ht/(c[14]?.5:2)})))&&_(e,"style",l)},i(c){n||(P(t.$$.fragment,c),c&&Qe(()=>{n&&(o||(o=Ce(e,Pe,{duration:200},!0)),o.run(1))}),n=!0)},o(c){J(t.$$.fragment,c),c&&(o||(o=Ce(e,Pe,{duration:200},!1)),o.run(0)),n=!1},d(c){c&&p(e),Ee(t),c&&o&&o.end(),r=!1,s()}}}function Ct(i){let e,t,l;return{c(){e=V("div"),t=ce(`Specialization is calculated using the expected prevelance of a country, source, or concept,
	and comparing it to the one present in the current breakdown flow. If it is switched off, the
	sheer volume of citations is considered.`),this.h()},l(o){e=N(o,"DIV",{class:!0,id:!0,style:!0});var n=L(e);t=ae(n,`Specialization is calculated using the expected prevelance of a country, source, or concept,
	and comparing it to the one present in the current breakdown flow. If it is switched off, the
	sheer volume of citations is considered.`),n.forEach(p),this.h()},h(){_(e,"class","floater hoverover svelte-1eprj6g"),_(e,"id","spec-hover"),_(e,"style",l=i[23]({top:i[22]+i[21].height},{left:i[26]+i[21].width*.2,width:i[21].width*1.6},{}))},m(o,n){q(o,e,n),R(e,t)},p(o,n){n[0]&14680064&&l!==(l=o[23]({top:o[22]+o[21].height},{left:o[26]+o[21].width*.2,width:o[21].width*1.6},{}))&&_(e,"style",l)},d(o){o&&p(e)}}}function Pt(i){let e,t,l,o,n;return{c(){e=V("div"),t=ce("Filter the underlying dataset to papers published in or after "),l=ce(i[0]),o=ce("."),this.h()},l(r){e=N(r,"DIV",{class:!0,id:!0,style:!0});var s=L(e);t=ae(s,"Filter the underlying dataset to papers published in or after "),l=ae(s,i[0]),o=ae(s,"."),s.forEach(p),this.h()},h(){_(e,"class","floater hoverover svelte-1eprj6g"),_(e,"id","spec-hover"),_(e,"style",n=i[23]({top:i[22]+i[21].height*1.1},{left:i[26]+i[21].width*.2,width:i[21].width*1.6},{}))},m(r,s){q(r,e,s),R(e,t),R(e,l),R(e,o)},p(r,s){s[0]&1&&Fe(l,r[0]),s[0]&14680064&&n!==(n=r[23]({top:r[22]+r[21].height*1.1},{left:r[26]+r[21].width*.2,width:r[21].width*1.6},{}))&&_(e,"style",n)},d(r){r&&p(e)}}}function vi(i){let e=!Object.values(i[20]).includes(NaN)&&!Object.values(i[20]).includes(void 0),t,l,o,n;Qe(i[37]);let r=e&&Rt(i);return{c(){r&&r.c(),t=qe()},l(s){r&&r.l(s),t=qe()},m(s,c){r&&r.m(s,c),q(s,t,c),l=!0,o||(n=pe(window,"resize",i[37]),o=!0)},p(s,c){c[0]&1048576&&(e=!Object.values(s[20]).includes(NaN)&&!Object.values(s[20]).includes(void 0)),e?r?(r.p(s,c),c[0]&1048576&&P(r,1)):(r=Rt(s),r.c(),P(r,1),r.m(t.parentNode,t)):r&&(Ge(),J(r,1,1,()=>{r=null}),Ue())},i(s){l||(P(r),l=!0)},o(s){J(r),l=!1},d(s){s&&p(t),r&&r.d(s),o=!1,n()}}}const yi=2004;let ki=.3,Ke=100,ut=25,it=0,Le=3,Ae=9,ht=20,Se=11,wi=.05,Si=2.5,qi=15;function Oi(i,e){return(t,l,o)=>[[t||{},i,"px"],[l||{},e,"px"],[o||{},n=>n,"svh"]].map(([n,r,s])=>Object.entries(n).map(([c,u])=>`${c}: ${r(u)}${s};`).join("")).join("")}function Ti(i,e,t){let l,o,n,r,s,c,u,h,g,y;const f=[2004,2019,2020,2021,2022,2023];let{defaultQcSpecId:v}=e,{selectedQcRootId:w}=e,{rootType:B}=e,{attributeLabels:ee}=e,{fullQcSpecs:A}=e,{removeHighlightUnhover:ne=!0}=e,{startSentence:I="Scholars at"}=e,{specFilterYear:j=2004}=e,{rootName:se=""}=e,te=!1,ie,S,b=[],O=w,M,D,X,ue=(Ke-ut)/2.5,re=!1,U=!1,W=Array(tt).fill(0).map(()=>({totalSize:0,topOffset:0,levelOptions:[],isVisible:!1})),Y=Array(tt).fill(0).map(()=>({..._t})),C=_t.limit_n,ge=!0,be={weight:1,source_count:1,top_source:[0,0]},le={children:{}},we,ve=Ve(v,A);function Ve(m,Q){var he;if(m==null)return[];const G=[],Ie=Q[m];for(let Z=0;Z<tt;Z++)G.push(((he=Ie.bifurcations[Z])==null?void 0:he.description)||"");return G}function je(m,Q){let G={};for(let[Ie,he]of Object.entries(m))if(he.root_entity_type==Q){t(28,A[Ie]=he,A);let Z=G;for(let ze of he.bifurcations){const oe=ze.description;oe in Z||(Z[oe]={children:{},qcSpecs:[]}),Z[oe].qcSpecs.push(Ie),Z=Z[oe].children}}return G}function ye(m){for(let Q in Y)t(33,Y[Q].limit_n=m,Y)}function E(m){for(let Q in Y)t(33,Y[Q].size_base=m?"specialization":"volume",Y)}function k(m,Q,G,Ie,he){if(t(14,te=!1),Q==null||m.length==0)return;let Z=0,ze=je(A,G),oe;for(let de of m){if(oe=ze[de],oe===void 0)break;if(oe.qcSpecs.includes(ie))Z++;else break;ze=oe.children}for(oe!=null&&(ie=oe.qcSpecs[0]);m.length>0;)m.pop();for(let de of A[ie].bifurcations)m.push(de.description);for(let de=Z;de<Y.length;de++)t(33,Y[de].include=[],Y);we=Ie[G][w],ti(`qc-builds/${he}/${ie}/${Q}`,de=>{t(9,[be,le,S,O,se]=[de,ii(ri(le,Z),de),A[ie],Q,we==null?void 0:we.name],be,t(10,le),t(4,S),t(16,O),t(1,se))})}function T(m,Q,G,Ie,he){var dt;if(t(14,te=!1),he.length==0)return;let Z=1;for(let _e of(m.meta||[]).slice(2))_e.totalNodes>0&&Z++;let ze=Ie,oe=0;const de=G===void 0?Q/Z:Q/Z/2;for(let _e=0;_e<tt;_e++)t(19,W[_e].totalSize=G==_e?Q/2+de:de,W),t(19,W[_e].topOffset=oe,W),t(19,W[_e].levelOptions=Object.keys(ze),W),t(19,W[_e].isVisible=_e<Z,W),oe+=W[_e].totalSize,_e==Z-1&&(oe+=Q/2),ze=((dt=ze[he[_e]])==null?void 0:dt.children)||{}}function z(m){var he;const Q=m[m.length-1];let G=Qt(m.slice(0,m.length-1),le);if((G==null?void 0:G.children)===void 0)return;Object.keys(G.children).includes(Q)?(delete G.children[Q],ni(le)):G.children[Q]={children:((he=G.children[Q])==null?void 0:he.children)||{}},t(14,te=!1),t(10,le)}function F(m){const Q=m.detail.path,G=m.detail.action;if(G=="highlight"){t(15,b=Q),t(14,te=!1);return}else if(G=="de-highlight"){ne&&t(15,b=[]);return}z(Q)}function a(){t(6,X=window.innerWidth),t(5,D=window.innerHeight)}function d(m){C=m,t(7,C)}function K(m){re=m,t(17,re)}function fe(m){ge=m,t(8,ge)}function Te(){j=Mt(this),t(0,j),t(25,f)}function ke(m){U=m,t(18,U)}function me(m){ve=m,t(11,ve)}const H=()=>{t(14,te=!te)};return i.$$set=m=>{"defaultQcSpecId"in m&&t(29,v=m.defaultQcSpecId),"selectedQcRootId"in m&&t(30,w=m.selectedQcRootId),"rootType"in m&&t(31,B=m.rootType),"attributeLabels"in m&&t(2,ee=m.attributeLabels),"fullQcSpecs"in m&&t(28,A=m.fullQcSpecs),"removeHighlightUnhover"in m&&t(32,ne=m.removeHighlightUnhover),"startSentence"in m&&t(3,I=m.startSentence),"specFilterYear"in m&&t(0,j=m.specFilterYear),"rootName"in m&&t(1,se=m.rootName)},i.$$.update=()=>{i.$$.dirty[0]&1&&t(34,l=j==yi?"all":`y-${j}`),i.$$.dirty[0]&96&&t(12,n=D/X*Ke),i.$$.dirty[0]&4128&&t(36,r=m=>m*D/n),i.$$.dirty[0]&64&&t(35,s=m=>m*X/Ke),i.$$.dirty[1]&48&&t(23,c=Oi(r,s)),i.$$.dirty[0]&4096&&t(22,u=Ae*n/100),i.$$.dirty[0]&4096&&t(21,h={height:n*Se/100,width:ut,x:ue+it,y:-n*Se/100}),i.$$.dirty[0]&4096&&t(20,g={height:n,width:Ke,x:0,y:-(Se+Ae)*n/100}),i.$$.dirty[0]&1073743876|i.$$.dirty[1]&9&&k(ve,w,B,ee,l),i.$$.dirty[0]&128&&ye(C),i.$$.dirty[0]&256&&E(ge),i.$$.dirty[0]&1556|i.$$.dirty[1]&4&&t(13,y=ei(be,Y,le,ee,S)),i.$$.dirty[0]&268449792|i.$$.dirty[1]&1&&T(y,n*(1-(Se+ht)/100),M,je(A,B),ve)},t(24,o=ki),[j,se,ee,I,S,D,X,C,ge,be,le,ve,n,y,te,b,O,re,U,W,g,h,u,c,o,f,ue,F,A,v,w,B,ne,Y,l,s,r,a,d,K,fe,Te,ke,me,H]}class Vi extends xe{constructor(e){super(),$e(this,e,Ti,vi,Ze,{defaultQcSpecId:29,selectedQcRootId:30,rootType:31,attributeLabels:2,fullQcSpecs:28,removeHighlightUnhover:32,startSentence:3,specFilterYear:0,rootName:1},null,[-1,-1,-1])}}export{Vi as F,Qi as f};

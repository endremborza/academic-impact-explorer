import{s as A,e as u,i as m,z,d as h,D as C,E as b,l as v,F as L,h as p,m as F,j as a,k as c,y as T,n as w}from"./scheduler.f8ab5569.js";import{e as x}from"./each.28d7c328.js";import{S as E,i as N}from"./index.eec50c23.js";function K(r){return r>1e6?`${(r/1e6).toFixed(1)}M`:r>1e3?`${(r/1e3).toFixed(1)}k`:r.toFixed(0)}function O(r,t,l,i=1.2,o=.7){const n=S(r,t,l,i,o),e=S(r,l,t,i,o);return n.fontSize>=e.fontSize?{rotate:!1,...n}:{rotate:!0,...e}}function S(r,t,l,i,o){let n=1,e=[r];const s=r.split(" ");let f,d,g,_=0;for(const W of Array(7)){if(f=e.reduce((B,j)=>Math.max(B,j.length),-1/0),d=t/(f*o),g=l/(n*i),_=Math.min(d,g),_>=l/((n+1)*i))return{lines:e,fontSize:_};if(e=q(s,r.length,n+1),n==e.length)break;n=e.length}return{lines:e,fontSize:_}}function q(r,t,l){const i=[];let o=[],n=0;const e=t/l*1.15;for(const s of r)n+=s.length+1,n>e&&o.length>0&&(i.push(o.join(" ")),o=[],n=s.length+1),o.push(s);return o.length>0&&i.push(o.join(" ")),i}function D(r){const t=Math.abs(r-.5)*2;return[r*250,t*220,255-r*250]}function Q(r){return`rgb(${D(r).join(", ")})`}function k(r,t,l){const i=r.slice();return i[1]=t[l],i[6]=l,i}function I(r){let t,l=r[1]+"",i,o;return{c(){t=b("text"),i=v(l),this.h()},l(n){t=L(n,"text",{y:!0,style:!0,"text-anchor":!0,class:!0});var e=p(t);i=F(e,l),e.forEach(h),this.h()},h(){a(t,"y",o=(r[6]-r[2].lines.length+1)*r[2].fontSize*1.2),c(t,"font-size",r[2].fontSize+"px"),a(t,"text-anchor",r[0]),a(t,"class","svelte-1h04inn")},m(n,e){m(n,t,e),T(t,i)},p(n,e){e&4&&l!==(l=n[1]+"")&&w(i,l),e&4&&o!==(o=(n[6]-n[2].lines.length+1)*n[2].fontSize*1.2)&&a(t,"y",o),e&4&&c(t,"font-size",n[2].fontSize+"px"),e&1&&a(t,"text-anchor",n[0])},d(n){n&&h(t)}}}function M(r){let t,l=r[1]+"",i,o,n;return{c(){t=b("text"),i=v(l),this.h()},l(e){t=L(e,"text",{x:!0,style:!0,"text-anchor":!0,transform:!0,class:!0});var s=p(t);i=F(s,l),s.forEach(h),this.h()},h(){a(t,"x",o=(r[6]+1)*r[2].fontSize*1.2),c(t,"font-size",r[2].fontSize+"px"),a(t,"text-anchor",r[0]),a(t,"transform",n="rotate(270, "+(r[6]+1)*r[2].fontSize*1.2+", 0)"),a(t,"class","svelte-1h04inn")},m(e,s){m(e,t,s),T(t,i)},p(e,s){s&4&&l!==(l=e[1]+"")&&w(i,l),s&4&&o!==(o=(e[6]+1)*e[2].fontSize*1.2)&&a(t,"x",o),s&4&&c(t,"font-size",e[2].fontSize+"px"),s&1&&a(t,"text-anchor",e[0]),s&4&&n!==(n="rotate(270, "+(e[6]+1)*e[2].fontSize*1.2+", 0)")&&a(t,"transform",n)},d(e){e&&h(t)}}}function y(r){let t;function l(n,e){return n[2].rotate?M:I}let i=l(r),o=i(r);return{c(){o.c(),t=u()},l(n){o.l(n),t=u()},m(n,e){o.m(n,e),m(n,t,e)},p(n,e){i===(i=l(n))&&o?o.p(n,e):(o.d(1),o=i(n),o&&(o.c(),o.m(t.parentNode,t)))},d(n){n&&h(t),o.d(n)}}}function P(r){let t,l=x(r[2].lines),i=[];for(let o=0;o<l.length;o+=1)i[o]=y(k(r,l,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=u()},l(o){for(let n=0;n<i.length;n+=1)i[n].l(o);t=u()},m(o,n){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(o,n);m(o,t,n)},p(o,[n]){if(n&5){l=x(o[2].lines);let e;for(e=0;e<l.length;e+=1){const s=k(o,l,e);i[e]?i[e].p(s,n):(i[e]=y(s),i[e].c(),i[e].m(t.parentNode,t))}for(;e<i.length;e+=1)i[e].d(1);i.length=l.length}},i:z,o:z,d(o){o&&h(t),C(i,o)}}}function R(r,t,l){let i,{text:o}=t,{width:n}=t,{height:e}=t,{anchor:s="left"}=t;return r.$$set=f=>{"text"in f&&l(1,o=f.text),"width"in f&&l(3,n=f.width),"height"in f&&l(4,e=f.height),"anchor"in f&&l(0,s=f.anchor)},r.$$.update=()=>{r.$$.dirty&26&&l(2,i=O(o,n,e))},[s,o,i,n,e]}class U extends E{constructor(t){super(),N(this,t,R,P,A,{text:1,width:3,height:4,anchor:0})}}export{U as B,Q as a,K as f,D as g};

import{s as P0,e as $,i as j,d as b,D as J0,G as H1,E as F,a as i0,F as G,h as P,c as l0,j as c,k as X,y as L,H as v0,I as H0,J as E0,K as F1,L as G1,M as D1,l as c0,m as u0,n as T0,f as e0,g as t0,N as W0,O as w1,P as l1,Q as X1,p as G0,R as D0,A as K1,o as Y1}from"../chunks/scheduler.818ef87d.js";import{S as z0,i as L0,a as D,g as O0,c as I0,t as Z,b as s0,d as a0,m as o0,f as M0,e as f0,h as X0}from"../chunks/index.f7ab21c9.js";import{e as S0}from"../chunks/each.d7da38fb.js";import{p as J1}from"../chunks/stores.2e46b051.js";import{a as b0,b as Q1,c as Z1,f as w0,d as y1,S as U1,h as R0,e as N1,i as n1,g as x1}from"../chunks/SimpleAutocomplete.b74901b6.js";import{b as $1}from"../chunks/paths.25f26a1c.js";import{B as Q0,a as ee,f as r1}from"../chunks/BrokenFittedText.7f5654a1.js";import{A as s1}from"../chunks/constants.64b06403.js";function a1(e){return function(){return e}}const K0=Math.PI,Y0=2*K0,m0=1e-6,te=Y0-m0;function k1(e){this._+=e[0];for(let i=1,t=e.length;i<t;++i)this._+=arguments[i]+e[i]}function ie(e){let i=Math.floor(e);if(!(i>=0))throw new Error(`invalid digits: ${e}`);if(i>15)return k1;const t=10**i;return function(l){this._+=l[0];for(let n=1,s=l.length;n<s;++n)this._+=Math.round(arguments[n]*t)/t+l[n]}}class le{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?k1:ie(i)}moveTo(i,t){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,t){this._append`L${this._x1=+i},${this._y1=+t}`}quadraticCurveTo(i,t,l,n){this._append`Q${+i},${+t},${this._x1=+l},${this._y1=+n}`}bezierCurveTo(i,t,l,n,s,r){this._append`C${+i},${+t},${+l},${+n},${this._x1=+s},${this._y1=+r}`}arcTo(i,t,l,n,s){if(i=+i,t=+t,l=+l,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let r=this._x1,f=this._y1,a=l-i,o=n-t,u=r-i,h=f-t,S=u*u+h*h;if(this._x1===null)this._append`M${this._x1=i},${this._y1=t}`;else if(S>m0)if(!(Math.abs(h*a-o*u)>m0)||!s)this._append`L${this._x1=i},${this._y1=t}`;else{let w=l-r,k=n-f,W=a*a+o*o,C=w*w+k*k,_=Math.sqrt(W),d=Math.sqrt(S),I=s*Math.tan((K0-Math.acos((W+S-C)/(2*_*d)))/2),g=I/d,E=I/_;Math.abs(g-1)>m0&&this._append`L${i+g*u},${t+g*h}`,this._append`A${s},${s},0,0,${+(h*w>u*k)},${this._x1=i+E*a},${this._y1=t+E*o}`}}arc(i,t,l,n,s,r){if(i=+i,t=+t,l=+l,r=!!r,l<0)throw new Error(`negative radius: ${l}`);let f=l*Math.cos(n),a=l*Math.sin(n),o=i+f,u=t+a,h=1^r,S=r?n-s:s-n;this._x1===null?this._append`M${o},${u}`:(Math.abs(this._x1-o)>m0||Math.abs(this._y1-u)>m0)&&this._append`L${o},${u}`,l&&(S<0&&(S=S%Y0+Y0),S>te?this._append`A${l},${l},0,1,${h},${i-f},${t-a}A${l},${l},0,1,${h},${this._x1=o},${this._y1=u}`:S>m0&&this._append`A${l},${l},0,${+(S>=K0)},${h},${this._x1=i+l*Math.cos(s)},${this._y1=t+l*Math.sin(s)}`)}rect(i,t,l,n){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+t}h${l=+l}v${+n}h${-l}Z`}toString(){return this._}}function ne(e){let i=3;return e.digits=function(t){if(!arguments.length)return i;if(t==null)i=null;else{const l=Math.floor(t);if(!(l>=0))throw new RangeError(`invalid digits: ${t}`);i=l}return e},()=>new le(i)}var re=Array.prototype.slice;function se(e){return e[0]}function ae(e){return e[1]}class oe{constructor(i,t){this._context=i,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,t){switch(i=+i,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(i,t):this._context.moveTo(i,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,t,i,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,i,this._y0,i,t);break}}this._x0=i,this._y0=t}}function fe(e){return new oe(e,!1)}function ce(e){return e.source}function ue(e){return e.target}function he(e){let i=ce,t=ue,l=se,n=ae,s=null,r=null,f=ne(a);function a(){let o;const u=re.call(arguments),h=i.apply(this,u),S=t.apply(this,u);if(s==null&&(r=e(o=f())),r.lineStart(),u[0]=h,r.point(+l.apply(this,u),+n.apply(this,u)),u[0]=S,r.point(+l.apply(this,u),+n.apply(this,u)),r.lineEnd(),o)return r=null,o+""||null}return a.source=function(o){return arguments.length?(i=o,a):i},a.target=function(o){return arguments.length?(t=o,a):t},a.x=function(o){return arguments.length?(l=typeof o=="function"?o:a1(+o),a):l},a.y=function(o){return arguments.length?(n=typeof o=="function"?o:a1(+o),a):n},a.context=function(o){return arguments.length?(o==null?s=r=null:r=e(s=o),a):s},a}function _e(){return he(fe)}const ge={0:0,1:0,2:.699,3:0,4:.001,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:0,14:.002,15:0,16:0,17:0,18:.001,19:0,20:.002,21:.008,22:0,23:0,24:0,25:.015,26:.002,27:.009,28:.005,29:.002,30:.002,31:.003,32:0,33:0,34:0,35:0,36:0,37:.014,38:.002,39:.006,40:.014,41:.001,42:0,43:0,44:0,45:0,46:0,47:.002,48:0,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.004,57:.004,58:.001,59:0,60:0,61:0,62:0,63:0,64:.003,65:0,66:0,67:0,68:0,70:0,71:.001,72:.001,73:.038,74:0,75:0,76:0,77:0,78:.012,79:.006,80:.002,81:.001,82:.001,83:0,84:0,85:0,86:0,87:.002,88:.001,89:0,90:0,91:0,92:0,93:.001,94:.001,95:0,96:0,97:0,98:0,99:.059,100:0,101:0,102:.024,103:0,104:.001,105:0,106:0,107:.007,108:0,109:.002,110:.012,111:.019,112:0,113:0,114:.002,115:.047,116:0,117:0,118:0,119:0,120:.004,121:0,122:0,123:0,124:0,125:0,127:.032,128:0,129:0,130:.003,131:.002,132:0,133:.03,134:0,135:0,136:.006,137:.001,138:.006,139:0,140:0,141:0,142:0,143:.001,144:.002,145:0,146:.084,147:0,148:.001,149:0,150:0,151:0,152:0,153:.005,154:.01,155:0,156:0,157:.002,158:.063,159:0,160:0,161:.005,162:0,163:0,164:0,165:0,166:.053,167:0,168:0,169:0,170:0,171:.001,172:0,173:0,174:0,175:0,176:0,177:0,178:.022,179:0,180:0,181:.005,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:.002,190:0,191:.001,192:0,193:.005,194:0,195:.001,196:0,197:0,198:0,199:.006,200:0,201:0,202:.047,203:0,204:0,205:0,206:.002,207:0,208:0,209:0,210:.253,211:0,212:0,213:.019,214:0,215:0,216:.006,217:0,218:.007,219:0,220:.002,221:.001,222:0,223:.002,224:.006},me={0:0,1:.001,2:.204,3:0,4:.002,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:.001,14:.003,15:0,16:0,17:0,18:.002,19:0,20:.002,21:.022,22:0,23:0,24:0,25:.065,26:.006,27:.034,28:.015,29:.005,30:.002,31:.007,32:0,33:0,34:0,35:.001,36:0,37:.02,38:.004,39:.022,40:.059,41:.004,42:0,43:0,44:0,45:.001,46:0,47:.003,48:0,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.01,57:.007,58:.003,59:0,60:0,61:0,62:0,63:0,64:.009,65:0,66:0,67:0,68:0,70:0,71:.001,72:.001,73:.026,74:0,75:0,76:0,77:.001,78:.033,79:.015,80:.005,81:.003,82:.002,83:0,84:0,85:0,86:.001,87:.005,88:.002,89:0,90:0,91:0,92:.001,93:.003,94:.003,95:0,96:0,97:0,98:0,99:.023,100:0,101:0,102:.105,103:0,104:.002,105:0,106:0,107:.006,108:0,109:.003,110:.013,111:.072,112:0,113:0,114:.002,115:.099,116:0,117:0,118:0,119:0,120:.006,121:0,122:0,123:0,124:0,125:0,127:.12,128:0,129:0,130:.004,131:.007,132:0,133:.088,134:0,135:0,136:.006,137:.002,138:.017,139:0,140:.001,141:0,142:0,143:.002,144:.004,145:0,146:.28,147:0,148:.002,149:0,150:0,151:0,152:0,153:.015,154:.019,155:.001,156:.001,157:.006,158:.108,159:0,160:.001,161:.013,162:0,163:0,164:.001,165:0,166:.047,167:0,168:0,169:0,170:.002,171:.003,172:.001,173:0,174:.001,175:0,176:0,177:0,178:.081,179:.001,180:0,181:.011,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:.006,190:0,191:0,192:0,193:.018,194:0,195:.002,196:0,197:0,198:.001,199:.025,200:0,201:.001,202:.13,203:0,204:.001,205:0,206:.003,207:0,208:0,209:0,210:.442,211:0,212:0,213:.06,214:0,215:0,216:.012,217:.001,218:.017,219:0,220:.004,221:.003,222:0,223:.007,224:.006},de={0:0,1:.001,2:.242,3:0,4:.001,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:.001,14:.004,15:0,16:0,17:0,18:.001,19:0,20:.001,21:.013,22:0,23:0,24:0,25:.039,26:.004,27:.018,28:.011,29:.002,30:.003,31:.003,32:0,33:0,34:0,35:.001,36:0,37:.02,38:.002,39:.015,40:.035,41:.002,42:0,43:0,44:0,45:.001,46:0,47:.003,48:0,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.007,57:.006,58:.001,59:0,60:0,61:0,62:0,63:0,64:.005,65:0,66:0,67:0,68:0,70:.001,71:.002,72:0,73:.024,74:0,75:0,76:0,77:0,78:.029,79:.009,80:.002,81:.002,82:.002,83:0,84:0,85:0,86:.001,87:.002,88:.002,89:0,90:0,91:0,92:.001,93:.002,94:.004,95:0,96:0,97:0,98:0,99:.028,100:0,101:0,102:.068,103:0,104:.002,105:0,106:0,107:.007,108:0,109:.004,110:.01,111:.045,112:0,113:0,114:.002,115:.101,116:0,117:0,118:0,119:0,120:.006,121:0,122:0,123:0,124:0,125:0,127:.068,128:0,129:0,130:.004,131:.004,132:0,133:.057,134:0,135:0,136:.007,137:.003,138:.01,139:0,140:.001,141:0,142:0,143:.001,144:.001,145:0,146:.194,147:0,148:.001,149:0,150:0,151:0,152:0,153:.011,154:.011,155:.001,156:0,157:.004,158:.339,159:0,160:.001,161:.009,162:0,163:0,164:0,165:0,166:.041,167:0,168:0,169:0,170:.002,171:.001,172:.001,173:0,174:.001,175:0,176:0,177:0,178:.046,179:.001,180:0,181:.017,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:.003,190:.001,191:0,192:0,193:.017,194:0,195:.002,196:0,197:0,198:.001,199:.018,200:0,201:.001,202:.085,203:0,204:.001,205:0,206:.004,207:0,208:0,209:0,210:.409,211:0,212:0,213:.042,214:0,215:0,216:.008,217:.001,218:.013,219:0,220:.002,221:.003,222:0,223:.006,224:.005},pe={Asia:ge,Europe:me,"North America":{0:0,1:.001,2:.214,3:0,4:.001,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:.001,14:.003,15:0,16:0,17:0,18:.001,19:0,20:.001,21:.014,22:0,23:0,24:0,25:.032,26:.003,27:.017,28:.009,29:.004,30:.002,31:.004,32:0,33:0,34:0,35:.001,36:0,37:.018,38:.003,39:.014,40:.03,41:.002,42:0,43:0,44:0,45:.001,46:0,47:.002,48:0,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.008,57:.005,58:.002,59:0,60:0,61:0,62:0,63:0,64:.006,65:0,66:0,67:0,68:0,70:0,71:.001,72:.001,73:.027,74:0,75:0,76:0,77:0,78:.026,79:.01,80:.003,81:.002,82:.001,83:0,84:0,85:0,86:0,87:.003,88:.002,89:0,90:0,91:0,92:.001,93:.002,94:.003,95:0,96:0,97:0,98:0,99:.022,100:0,101:0,102:.06,103:0,104:.002,105:0,106:0,107:.005,108:0,109:.004,110:.012,111:.04,112:0,113:0,114:.002,115:.116,116:0,117:0,118:0,119:0,120:.005,121:0,122:0,123:0,124:0,125:0,127:.067,128:0,129:0,130:.003,131:.005,132:0,133:.059,134:0,135:0,136:.005,137:.002,138:.01,139:0,140:0,141:0,142:0,143:.002,144:.002,145:0,146:.158,147:0,148:.002,149:0,150:0,151:0,152:0,153:.01,154:.013,155:0,156:0,157:.003,158:.086,159:0,160:.001,161:.01,162:0,163:0,164:0,165:0,166:.042,167:0,168:0,169:0,170:.001,171:.002,172:.001,173:0,174:.001,175:0,176:0,177:0,178:.048,179:.001,180:0,181:.009,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:.004,190:0,191:0,192:0,193:.015,194:0,195:.002,196:0,197:0,198:.001,199:.015,200:0,201:0,202:.087,203:0,204:0,205:0,206:.002,207:0,208:0,209:0,210:.631,211:0,212:0,213:.041,214:0,215:0,216:.008,217:.001,218:.015,219:0,220:.003,221:.002,222:0,223:.006,224:.004},Oceania:de,"South America":{0:.001,1:.001,2:.195,3:0,4:.001,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:.002,14:.004,15:0,16:0,17:0,18:.001,19:0,20:.001,21:.025,22:0,23:0,24:0,25:.042,26:.007,27:.022,28:.023,29:.006,30:.003,31:.008,32:0,33:.001,34:0,35:.001,36:0,37:.028,38:.008,39:.016,40:.038,41:.003,42:0,43:0,44:0,45:.001,46:0,47:.004,48:.001,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.017,57:.008,58:.004,59:.001,60:0,61:0,62:0,63:0,64:.008,65:0,66:0,67:0,68:0,70:0,71:.002,72:.001,73:.027,74:0,75:0,76:0,77:.001,78:.305,79:.016,80:.008,81:.005,82:.002,83:0,84:0,85:0,86:.001,87:.005,88:.009,89:0,90:0,91:0,92:.003,93:.001,94:.004,95:0,96:0,97:0,98:0,99:.019,100:0,101:0,102:.07,103:0,104:.002,105:0,106:0,107:.006,108:0,109:.004,110:.015,111:.049,112:0,113:0,114:.002,115:.104,116:0,117:0,118:0,119:0,120:.007,121:0,122:0,123:.001,124:0,125:0,127:.095,128:0,129:0,130:.005,131:.014,132:0,133:.083,134:0,135:0,136:.008,137:.004,138:.017,139:0,140:.001,141:0,142:0,143:.004,144:.004,145:0,146:.19,147:0,148:.005,149:0,150:0,151:0,152:0,153:.013,154:.02,155:.001,156:0,157:.008,158:.113,159:0,160:.002,161:.023,162:0,163:0,164:.001,165:.001,166:.044,167:0,168:0,169:0,170:.001,171:.004,172:.003,173:0,174:.001,175:0,176:0,177:0,178:.06,179:.002,180:0,181:.011,182:0,183:.001,184:0,185:0,186:0,187:0,188:.001,189:.004,190:0,191:0,192:0,193:.022,194:0,195:.002,196:0,197:0,198:.001,199:.022,200:0,201:.002,202:.108,203:0,204:.001,205:0,206:.003,207:.001,208:0,209:0,210:.45,211:0,212:0,213:.071,214:0,215:0,216:.013,217:.001,218:.018,219:0,220:.003,221:.004,222:0,223:.018,224:.008}},be={597:.005,1945:.005,1979:.008,2351:.032,2498:.007,2910:.008,3750:.007,4416:.006,5033:.055,10390:.005,11868:.023,12259:.012,13048:.005,13578:.006,14063:.005,16444:.01,17942:.008,19884:.005,20630:.01,21032:.003,22125:.004,23482:.012,25714:.005,27327:.004,27828:.037,28303:.034,28882:.006,30493:.006,30515:.012,30722:.004,32057:.031,33070:.007,34592:.01,35431:.008,36340:.028,37850:.007,41288:.005,41561:.005,42128:.049,43385:.007,45212:.004,45507:.008,46587:.006,47092:.03,48490:.008,50148:.026,50308:.011,50707:.016,51315:.012,51455:.005,51605:.007,51613:.01,53165:.032,53538:.02,54962:.047,56023:.014,56768:.043,57112:.034,64142:.005,65087:.012,67686:.004,69246:.075,70084:.031,71425:.006,71934:.026,73347:.008,73402:.007,73706:.004,74461:.011,74693:.005,75761:.007,80266:.005,80880:.013,81221:.007,82128:.005,82351:.033,85244:.005,87585:.008,89158:.01,89741:.005,90863:.008,91600:.031,94243:.007,94320:.006,95532:.007,95636:.007,95883:.006,97197:.007,98510:.007,100642:.041,101098:.01,102248:.004,102285:.032,104445:.009,105024:.007,105574:.007,106871:.025,107012:.004,107513:.011,107844:.019},ve={597:.009,1945:.018,1979:.011,2351:.006,2498:.016,2910:.023,3750:.024,4416:.017,5033:.015,10390:.025,11868:.018,12259:.026,13048:.024,13578:.013,14063:.023,16444:.017,17942:.015,19884:.023,20630:.019,21032:.009,22125:.011,23482:.043,25714:.02,27327:.016,27828:.017,28303:.004,28882:.013,30493:.024,30515:.031,30722:.013,32057:.012,33070:.01,34592:.02,35431:.019,36340:.008,37850:.024,41288:.013,41561:.011,42128:.015,43385:.035,45212:.012,45507:.025,46587:.014,47092:.009,48490:.02,50148:.007,50308:.016,50707:.011,51315:.048,51455:.033,51605:.021,51613:.024,53165:.009,53538:.052,54962:.017,56023:.01,56768:.011,57112:.011,64142:.021,65087:.007,67686:.022,69246:.02,70084:.006,71425:.009,71934:.006,73347:.019,73402:.015,73706:.011,74461:.047,74693:.019,75761:.015,80266:.013,80880:.055,81221:.025,82128:.031,82351:.005,85244:.012,87585:.019,89158:.025,89741:.01,90863:.015,91600:.004,94243:.011,94320:.025,95532:.028,95636:.014,95883:.02,97197:.015,98510:.016,100642:.01,101098:.016,102248:.008,102285:.013,104445:.018,105024:.015,105574:.01,106871:.005,107012:.018,107513:.024,107844:.011},Me={597:.007,1945:.009,1979:.009,2351:.01,2498:.015,2910:.02,3750:.011,4416:.013,5033:.015,10390:.015,11868:.014,12259:.023,13048:.011,13578:.011,14063:.011,16444:.073,17942:.011,19884:.01,20630:.079,21032:.009,22125:.01,23482:.023,25714:.012,27327:.016,27828:.013,28303:.007,28882:.01,30493:.012,30515:.03,30722:.011,32057:.012,33070:.009,34592:.075,35431:.02,36340:.009,37850:.009,41288:.013,41561:.01,42128:.016,43385:.018,45212:.011,45507:.011,46587:.013,47092:.008,48490:.017,50148:.009,50308:.073,50707:.008,51315:.026,51455:.022,51605:.018,51613:.024,53165:.01,53538:.046,54962:.018,56023:.008,56768:.012,57112:.013,64142:.011,65087:.007,67686:.011,69246:.02,70084:.008,71425:.006,71934:.007,73347:.016,73402:.012,73706:.011,74461:.027,74693:.008,75761:.014,80266:.009,80880:.031,81221:.014,82128:.02,82351:.006,85244:.009,87585:.016,89158:.09,89741:.007,90863:.012,91600:.006,94243:.011,94320:.014,95532:.017,95636:.01,95883:.009,97197:.014,98510:.012,100642:.009,101098:.01,102248:.01,102285:.015,104445:.015,105024:.012,105574:.008,106871:.007,107012:.01,107513:.02,107844:.012},Se={Asia:be,Europe:ve,"North America":{597:.012,1945:.008,1979:.016,2351:.007,2498:.019,2910:.035,3750:.012,4416:.024,5033:.017,10390:.013,11868:.016,12259:.041,13048:.013,13578:.019,14063:.011,16444:.014,17942:.022,19884:.011,20630:.015,21032:.016,22125:.017,23482:.02,25714:.01,27327:.03,27828:.016,28303:.004,28882:.019,30493:.013,30515:.038,30722:.018,32057:.013,33070:.016,34592:.016,35431:.023,36340:.008,37850:.011,41288:.024,41561:.016,42128:.016,43385:.017,45212:.021,45507:.014,46587:.023,47092:.009,48490:.03,50148:.007,50308:.013,50707:.009,51315:.025,51455:.016,51605:.035,51613:.038,53165:.01,53538:.075,54962:.018,56023:.01,56768:.012,57112:.012,64142:.01,65087:.007,67686:.01,69246:.021,70084:.006,71425:.012,71934:.006,73347:.03,73402:.021,73706:.02,74461:.024,74693:.009,75761:.012,80266:.018,80880:.027,81221:.012,82128:.016,82351:.005,85244:.016,87585:.028,89158:.021,89741:.014,90863:.024,91600:.004,94243:.014,94320:.012,95532:.014,95636:.021,95883:.01,97197:.025,98510:.022,100642:.01,101098:.021,102248:.012,102285:.012,104445:.029,105024:.022,105574:.015,106871:.006,107012:.007,107513:.038,107844:.011},Oceania:Me,"South America":{597:.012,1945:.011,1979:.014,2351:.007,2498:.017,2910:.022,3750:.017,4416:.017,5033:.014,10390:.018,11868:.019,12259:.027,13048:.013,13578:.018,14063:.014,16444:.02,17942:.017,19884:.014,20630:.018,21032:.009,22125:.009,23482:.025,25714:.012,27327:.015,27828:.014,28303:.003,28882:.018,30493:.02,30515:.033,30722:.011,32057:.012,33070:.009,34592:.023,35431:.02,36340:.011,37850:.013,41288:.012,41561:.013,42128:.015,43385:.024,45212:.011,45507:.019,46587:.016,47092:.01,48490:.023,50148:.005,50308:.016,50707:.011,51315:.029,51455:.018,51605:.024,51613:.028,53165:.01,53538:.056,54962:.02,56023:.009,56768:.01,57112:.012,64142:.016,65087:.008,67686:.012,69246:.017,70084:.006,71425:.015,71934:.006,73347:.019,73402:.024,73706:.011,74461:.033,74693:.011,75761:.26,80266:.014,80880:.032,81221:.017,82128:.016,82351:.004,85244:.017,87585:.019,89158:.025,89741:.01,90863:.012,91600:.004,94243:.013,94320:.014,95532:.021,95636:.019,95883:.017,97197:.02,98510:.013,100642:.01,101098:.011,102248:.008,102285:.011,104445:.016,105024:.014,105574:.016,106871:.006,107012:.01,107513:.032,107844:.012}},Z0=()=>({normalizedMetric:0,rawMetric:0}),we={"Global RCA":ke,"Continent level RCA":Ee};function ye(e,i,t,l,n){const s=we[e];return s===void 0?Z0:s(i,t,l,n)}function ke(e,i,t){const l=e.bifurcations[i].attribute_kind,n=Ie[l];return E1(t,n)}function Ee(e,i,t,l){const n=e.bifurcations[i].attribute_kind,s=l.continent,r=Re[n];if(r===void 0)return Z0;const f=r[s||""];return E1(t,f)}function E1(e,i){if(i==null)return Z0;const t=(e==null?void 0:e.weight)||1;return(l,n)=>{const r=l/t/i[n],f=Math.log2(r)/2;return{rawMetric:r,normalizedMetric:f}}}const Oe={44783:.011,11568:.028,18966:.027,44048:.141,21044:.077,64020:.042,4578:.015,16583:.515,10484:.05,11797:.428,58847:.35,32279:.074,7501:.122,7922:.027,25155:.136,19974:.1,38043:.008,48940:.032,31340:.253},Ie={Concept:Oe},Re={Country:pe,Institution:Se};function o1(e,i,t){const l=e.slice();return l[51]=i[t].id,l[52]=i[t].parsedChild,l}function f1(e){let i,t;const l=[e[52].cachedProps,{qcSpec:e[0]},{attributeLabels:e[1]},{visibleTreeInfo:e[2]},{selectedTreeInfo:e[3]},{levelVisuals:e[4]},{levelMetrics:e[5]},{rootMeta:e[6]},{treeWidth:e[7]},{treeXOffset:e[11]},{childRate:e[8]},{overHangRate:e[9]},{preStraightRate:e[10]}];let n={};for(let s=0;s<l.length;s+=1)n=D1(n,l[s]);return i=new O1({props:n}),i.$on("tree-interaction",e[36]),{c(){s0(i.$$.fragment)},l(s){a0(i.$$.fragment,s)},m(s,r){o0(i,s,r),t=!0},p(s,r){const f=r[0]&36863?Q1(l,[r[0]&32768&&Z1(s[52].cachedProps),r[0]&1&&{qcSpec:s[0]},r[0]&2&&{attributeLabels:s[1]},r[0]&4&&{visibleTreeInfo:s[2]},r[0]&8&&{selectedTreeInfo:s[3]},r[0]&16&&{levelVisuals:s[4]},r[0]&32&&{levelMetrics:s[5]},r[0]&64&&{rootMeta:s[6]},r[0]&128&&{treeWidth:s[7]},r[0]&2048&&{treeXOffset:s[11]},r[0]&256&&{childRate:s[8]},r[0]&512&&{overHangRate:s[9]},r[0]&1024&&{preStraightRate:s[10]}]):{};i.$set(f)},i(s){t||(D(i.$$.fragment,s),t=!0)},o(s){Z(i.$$.fragment,s),t=!1},d(s){f0(i,s)}}}function c1(e){let i,t,l,n,s,r,f,a,o,u,h,S,w,k,W,C,_,d,I,g,E,O,Q,N,x,V,R,K,v,p,q,Y;R=new Q0({props:{text:e[52].name,width:e[52].width,height:e[13]}});let B=e[52].isSelected&&f1(e);return{c(){i=F("defs"),t=F("linearGradient"),l=F("stop"),r=F("stop"),o=F("stop"),w=i0(),k=F("path"),d=i0(),I=F("rect"),x=i0(),V=F("g"),s0(R.$$.fragment),K=i0(),B&&B.c(),v=$(),this.h()},l(M){i=G(M,"defs",{});var y=P(i);t=G(y,"linearGradient",{id:!0,gradientTransform:!0});var J=P(t);l=G(J,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),P(l).forEach(b),r=G(J,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),P(r).forEach(b),o=G(J,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),P(o).forEach(b),J.forEach(b),y.forEach(b),w=l0(M),k=G(M,"path",{d:!0,fill:!0,class:!0}),P(k).forEach(b),d=l0(M),I=G(M,"rect",{"fill-opacity":!0,x:!0,y:!0,height:!0,width:!0,class:!0}),P(I).forEach(b),x=l0(M),V=G(M,"g",{style:!0,class:!0});var T=P(V);a0(R.$$.fragment,T),T.forEach(b),K=l0(M),B&&B.l(M),v=$(),this.h()},h(){c(l,"offset","0%"),c(l,"stop-opacity",n=e[52].isSelected?"80%":"0%"),c(l,"stop-color",s=e[52].colorStr),c(l,"class","svelte-p699pa"),c(r,"offset","20%"),c(r,"stop-opacity",f=e[52].isSelected?"80%":"5%"),c(r,"stop-color",a=e[52].colorStr),c(r,"class","svelte-p699pa"),c(o,"offset","50%"),c(o,"stop-opacity",u=e[52].isSelected?"80%":"25%"),c(o,"stop-color",h=e[52].colorStr),c(o,"class","svelte-p699pa"),c(t,"id",S="path-grad-"+e[52].strId),c(t,"gradientTransform","rotate(90)"),c(k,"d",W=e[52].linkPath),c(k,"fill",C="url('#path-grad-"+e[52].strId+"')"),c(k,"class","svelte-p699pa"),c(I,"fill-opacity",g=.25+Math.abs(e[52].specMetric.normalizedMetric)/1.5),c(I,"x",E=e[52].cachedProps.xOffset+e[12]/4),c(I,"y",O=e[14]+e[13]/2-(e[52].specMetric.normalizedMetric<0?0:e[52].specMetric.normalizedMetric*e[13]/2)),c(I,"height",Q=Math.abs(e[52].specMetric.normalizedMetric)*e[13]/2),c(I,"width",N=e[7]/200),c(I,"class","svelte-p699pa"),X(V,"--y-off",e[16]+"px"),X(V,"--x-off",e[52].cachedProps.xOffset+.5+"px"),c(V,"class","svelte-p699pa")},m(M,y){j(M,i,y),L(i,t),L(t,l),L(t,r),L(t,o),j(M,w,y),j(M,k,y),j(M,d,y),j(M,I,y),j(M,x,y),j(M,V,y),o0(R,V,null),j(M,K,y),B&&B.m(M,y),j(M,v,y),p=!0,q||(Y=[v0(k,"mouseover",function(){H0(e[17]("highlight",e[51],e[52].specMetric.rawMetric))&&e[17]("highlight",e[51],e[52].specMetric.rawMetric).apply(this,arguments)}),v0(k,"mouseleave",function(){H0(e[17]("de-highlight",e[51],0))&&e[17]("de-highlight",e[51],0).apply(this,arguments)}),v0(k,"click",function(){H0(e[17]("toggle-select",e[51],0))&&e[17]("toggle-select",e[51],0).apply(this,arguments)})],q=!0)},p(M,y){e=M,(!p||y[0]&32768&&n!==(n=e[52].isSelected?"80%":"0%"))&&c(l,"stop-opacity",n),(!p||y[0]&32768&&s!==(s=e[52].colorStr))&&c(l,"stop-color",s),(!p||y[0]&32768&&f!==(f=e[52].isSelected?"80%":"5%"))&&c(r,"stop-opacity",f),(!p||y[0]&32768&&a!==(a=e[52].colorStr))&&c(r,"stop-color",a),(!p||y[0]&32768&&u!==(u=e[52].isSelected?"80%":"25%"))&&c(o,"stop-opacity",u),(!p||y[0]&32768&&h!==(h=e[52].colorStr))&&c(o,"stop-color",h),(!p||y[0]&32768&&S!==(S="path-grad-"+e[52].strId))&&c(t,"id",S),(!p||y[0]&32768&&W!==(W=e[52].linkPath))&&c(k,"d",W),(!p||y[0]&32768&&C!==(C="url('#path-grad-"+e[52].strId+"')"))&&c(k,"fill",C),(!p||y[0]&32768&&g!==(g=.25+Math.abs(e[52].specMetric.normalizedMetric)/1.5))&&c(I,"fill-opacity",g),(!p||y[0]&36864&&E!==(E=e[52].cachedProps.xOffset+e[12]/4))&&c(I,"x",E),(!p||y[0]&57344&&O!==(O=e[14]+e[13]/2-(e[52].specMetric.normalizedMetric<0?0:e[52].specMetric.normalizedMetric*e[13]/2)))&&c(I,"y",O),(!p||y[0]&40960&&Q!==(Q=Math.abs(e[52].specMetric.normalizedMetric)*e[13]/2))&&c(I,"height",Q),(!p||y[0]&128&&N!==(N=e[7]/200))&&c(I,"width",N);const J={};y[0]&32768&&(J.text=e[52].name),y[0]&32768&&(J.width=e[52].width),y[0]&8192&&(J.height=e[13]),R.$set(J),(!p||y[0]&65536)&&X(V,"--y-off",e[16]+"px"),(!p||y[0]&32768)&&X(V,"--x-off",e[52].cachedProps.xOffset+.5+"px"),e[52].isSelected?B?(B.p(e,y),y[0]&32768&&D(B,1)):(B=f1(e),B.c(),D(B,1),B.m(v.parentNode,v)):B&&(O0(),Z(B,1,1,()=>{B=null}),I0())},i(M){p||(M&&E0(()=>{p&&(_||(_=M0(k,w0,{duration:300},!0)),_.run(1))}),D(R.$$.fragment,M),D(B),p=!0)},o(M){M&&(_||(_=M0(k,w0,{duration:300},!1)),_.run(0)),Z(R.$$.fragment,M),Z(B),p=!1},d(M){M&&(b(i),b(w),b(k),b(d),b(I),b(x),b(V),b(K),b(v)),M&&_&&_.end(),f0(R),B&&B.d(M),q=!1,F1(Y)}}}function Ce(e){let i,t,l=S0(e[15]),n=[];for(let r=0;r<l.length;r+=1)n[r]=c1(o1(e,l,r));const s=r=>Z(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();i=$()},l(r){for(let f=0;f<n.length;f+=1)n[f].l(r);i=$()},m(r,f){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,f);j(r,i,f),t=!0},p(r,f){if(f[0]&262143){l=S0(r[15]);let a;for(a=0;a<l.length;a+=1){const o=o1(r,l,a);n[a]?(n[a].p(o,f),D(n[a],1)):(n[a]=c1(o),n[a].c(),D(n[a],1),n[a].m(i.parentNode,i))}for(O0(),a=l.length;a<n.length;a+=1)s(a);I0()}},i(r){if(!t){for(let f=0;f<l.length;f+=1)D(n[f]);t=!0}},o(r){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)Z(n[f]);t=!1},d(r){r&&b(i),J0(n,r)}}}function u1(e,i,t,l,n){return((e==null?void 0:e.rank)||0)*i+t*((e==null?void 0:e.weight)||0)/l+n}function Te(e,i,t){let l,n,s,r,f,a,o,u,h,S,w,k,W,C,_,d,I,g,E,O,Q,N,{qcSpec:x}=i,{attributeLabels:V}=i,{visibleTreeInfo:R}=i,{selectedTreeInfo:K}=i,{levelVisuals:v=[]}=i,{levelMetrics:p=[]}=i,{rootMeta:q={}}=i,{pathInCompleteTree:Y=[]}=i,{rootWidth:B=30}=i,{treeWidth:M=70}=i,{childRate:y=.2}=i,{overHangRate:J=.05}=i,{preStraightRate:T=.05}=i,{treeXOffset:z=0}=i,{childrenMargin:A=.2}=i,{minimumChildWidth:n0=A*2+1}=i,{linkEdgePadding:U=n0/3}=i,{linkBetweenPadRate:d0=.2}=i,{width:h0=B}=i,{xOffset:p0=(M-B)/2+z}=i,{levelColorScaleMin:_0=0}=i,{levelColorScaleMax:A0=1}=i;const C1=H1();function T1(m,H,r0){return()=>{C1("tree-interaction",{path:[...Y,H],action:m,metricValue:r0})}}const U0=_e().source(m=>m.start).target(m=>m.end),N0=m=>m===void 0?0:m;function W1(m,H){const r0=[...Y,m],g0=Object.hasOwn((s==null?void 0:s.children)||{},m),V0=((H==null?void 0:H.weight)||0)/O,z1=((H==null?void 0:H.weight)||0)/Q,x0=u1(H==null?void 0:H.totalOffsetOnLevel,g,E,O,A)+z,$0=n0+E*V0,y0={parent:_*z1,child:$0-2*U},j0={start:[p0+U+u1(H==null?void 0:H.totalOffsetAmongSiblings,d,_,Q,0),w],end:[x0+U,h]},L1={start:[j0.end[0]+y0.child,h],end:[j0.start[0]+y0.parent,w]},e1=a+(g0?u:0),A1=`${U0(j0)} v ${e1} h ${y0.child}`,V1=`v ${-e1} ${U0(L1)} v ${-o} h ${-y0.parent}`,j1=A1+V1+` v ${o}`,q0=_0+((H==null?void 0:H.totalOffsetAmongSiblings.rank)||0)*C,t1=q0+C,i1=(t1+q0)/2,q1=k(H==null?void 0:H.weight,m);return{cachedProps:{width:$0,xOffset:x0,pathInCompleteTree:r0,levelColorScaleMax:t1,levelColorScaleMin:q0},linkPath:j1,isSelected:g0,colorRate:i1,specMetric:q1,name:y1(m,V,x,l)||"",width:y0.child,colorStr:ee(i1),strId:r0.join("-")}}function B1(m,H,r0){return Object.entries((m==null?void 0:m.children)||{}).map(([g0,V0])=>({id:g0,parsedChild:W1(g0,V0)}))}function P1(m){G1.call(this,e,m)}return e.$$set=m=>{"qcSpec"in m&&t(0,x=m.qcSpec),"attributeLabels"in m&&t(1,V=m.attributeLabels),"visibleTreeInfo"in m&&t(2,R=m.visibleTreeInfo),"selectedTreeInfo"in m&&t(3,K=m.selectedTreeInfo),"levelVisuals"in m&&t(4,v=m.levelVisuals),"levelMetrics"in m&&t(5,p=m.levelMetrics),"rootMeta"in m&&t(6,q=m.rootMeta),"pathInCompleteTree"in m&&t(18,Y=m.pathInCompleteTree),"rootWidth"in m&&t(19,B=m.rootWidth),"treeWidth"in m&&t(7,M=m.treeWidth),"childRate"in m&&t(8,y=m.childRate),"overHangRate"in m&&t(9,J=m.overHangRate),"preStraightRate"in m&&t(10,T=m.preStraightRate),"treeXOffset"in m&&t(11,z=m.treeXOffset),"childrenMargin"in m&&t(20,A=m.childrenMargin),"minimumChildWidth"in m&&t(21,n0=m.minimumChildWidth),"linkEdgePadding"in m&&t(12,U=m.linkEdgePadding),"linkBetweenPadRate"in m&&t(22,d0=m.linkBetweenPadRate),"width"in m&&t(23,h0=m.width),"xOffset"in m&&t(24,p0=m.xOffset),"levelColorScaleMin"in m&&t(25,_0=m.levelColorScaleMin),"levelColorScaleMax"in m&&t(26,A0=m.levelColorScaleMax)},e.$$.update=()=>{var m,H,r0;e.$$.dirty[0]&262144&&t(30,l=Y.length),e.$$.dirty[0]&262148&&t(29,n=b0(Y,R.tree)),e.$$.dirty[0]&262152&&(s=b0(Y,K.tree)),e.$$.dirty[0]&1073741840&&t(28,r=v[l]),e.$$.dirty[0]&268437248&&t(35,[f,a,o,u]=[r==null?void 0:r.topOffset,...[y,T,J].map(g0=>(r==null?void 0:r.totalSize)*g0)].map(N0),f,(t(13,a),t(28,r),t(8,y),t(10,T),t(9,J),t(4,v),t(30,l),t(18,Y)),(t(31,o),t(28,r),t(8,y),t(10,T),t(9,J),t(4,v),t(30,l),t(18,Y))),e.$$.dirty[0]&268436736|e.$$.dirty[1]&16&&t(14,h=f+N0((r==null?void 0:r.totalSize)*(1-y-T))),e.$$.dirty[0]&24576&&t(16,S=h+a),e.$$.dirty[1]&17&&(w=f+o),e.$$.dirty[0]&1610612833&&t(27,k=ye((m=p[l])==null?void 0:m.selectedMetric,x,l,n,q)),e.$$.dirty[0]&536870912&&t(34,W=Object.keys((n==null?void 0:n.children)||{}).length),e.$$.dirty[0]&100663296|e.$$.dirty[1]&8&&(C=(A0-_0)/(W||1)),e.$$.dirty[0]&12587008|e.$$.dirty[1]&8&&(_=(h0-2*U)*(W>1?1-d0:1)),e.$$.dirty[0]&12587008|e.$$.dirty[1]&8&&(d=(h0-2*U)*d0/(W>1?W-1:1)),e.$$.dirty[0]&1073741824&&t(33,I=l+1),e.$$.dirty[0]&3145728&&t(32,g=n0+2*A),e.$$.dirty[0]&132|e.$$.dirty[1]&6&&(E=M-g*((H=R.meta[I])==null?void 0:H.totalNodes)),e.$$.dirty[0]&4|e.$$.dirty[1]&4&&(O=(r0=R.meta[I])==null?void 0:r0.totalWeight),e.$$.dirty[0]&536870912&&(Q=(n==null?void 0:n.childrenSumWeight)||1),e.$$.dirty[0]&939524096&&t(15,N=B1(n))},[x,V,R,K,v,p,q,M,y,J,T,z,U,a,h,N,S,T1,Y,B,A,n0,d0,h0,p0,_0,A0,k,r,n,l,o,g,I,W,f,P1]}class O1 extends z0{constructor(i){super(),L0(this,i,Te,Ce,P0,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectedTreeInfo:3,levelVisuals:4,levelMetrics:5,rootMeta:6,pathInCompleteTree:18,rootWidth:19,treeWidth:7,childRate:8,overHangRate:9,preStraightRate:10,treeXOffset:11,childrenMargin:20,minimumChildWidth:21,linkEdgePadding:12,linkBetweenPadRate:22,width:23,xOffset:24,levelColorScaleMin:25,levelColorScaleMax:26},null,[-1,-1])}}function h1(e){var d,I;let i,t,l,n,s,r,f,a,o,u,h,S,w,k,W;u=new Q0({props:{text:((d=e[0])==null?void 0:d.name)||"",width:e[2]*.9,height:C0*.3,anchor:"middle"}});let C=((I=e[0].path)==null?void 0:I.length)&&_1(e),_=e[0].metricName&&m1(e);return{c(){i=F("filter"),t=F("feGaussianBlur"),n=i0(),s=F("rect"),a=i0(),o=F("g"),s0(u.$$.fragment),S=i0(),C&&C.c(),w=i0(),_&&_.c(),k=$(),this.h()},l(g){i=G(g,"filter",{id:!0});var E=P(i);t=G(E,"feGaussianBlur",{in:!0,stdDeviation:!0}),P(t).forEach(b),E.forEach(b),n=l0(g),s=G(g,"rect",{x:!0,y:!0,height:!0,width:!0,rx:!0,opacity:!0,filter:!0,class:!0}),P(s).forEach(b),a=l0(g),o=G(g,"g",{transform:!0});var O=P(o);a0(u.$$.fragment,O),O.forEach(b),S=l0(g),C&&C.l(g),w=l0(g),_&&_.l(g),k=$(),this.h()},h(){c(t,"in","SourceGraphic"),c(t,"stdDeviation",l=e[1]*.008),c(i,"id","blurry"),c(s,"x",r=e[1]*.1),c(s,"y",F0),c(s,"height",C0),c(s,"width",e[2]),c(s,"rx",.3),c(s,"opacity",.95),c(s,"filter","url(#blurry)"),c(s,"class","svelte-12uigco"),c(o,"transform",h="translate("+e[1]*.5+", "+(F0+C0*.25)+")")},m(g,E){j(g,i,E),L(i,t),j(g,n,E),j(g,s,E),j(g,a,E),j(g,o,E),o0(u,o,null),j(g,S,E),C&&C.m(g,E),j(g,w,E),_&&_.m(g,E),j(g,k,E),W=!0},p(g,E){var Q,N;(!W||E&2&&l!==(l=g[1]*.008))&&c(t,"stdDeviation",l),(!W||E&2&&r!==(r=g[1]*.1))&&c(s,"x",r),(!W||E&4)&&c(s,"width",g[2]);const O={};E&1&&(O.text=((Q=g[0])==null?void 0:Q.name)||""),E&4&&(O.width=g[2]*.9),u.$set(O),(!W||E&2&&h!==(h="translate("+g[1]*.5+", "+(F0+C0*.25)+")"))&&c(o,"transform",h),(N=g[0].path)!=null&&N.length?C?C.p(g,E):(C=_1(g),C.c(),C.m(w.parentNode,w)):C&&(C.d(1),C=null),g[0].metricName?_?_.p(g,E):(_=m1(g),_.c(),_.m(k.parentNode,k)):_&&(_.d(1),_=null)},i(g){W||(g&&E0(()=>{W&&(f||(f=M0(s,w0,{duration:200},!0)),f.run(1))}),D(u.$$.fragment,g),W=!0)},o(g){g&&(f||(f=M0(s,w0,{duration:200},!1)),f.run(0)),Z(u.$$.fragment,g),W=!1},d(g){g&&(b(i),b(n),b(s),b(a),b(o),b(S),b(w),b(k)),g&&f&&f.end(),f0(u),C&&C.d(g),_&&_.d(g)}}}function _1(e){let i,t=r1(e[3])+"",l,n,s,r=e[3]>1&&g1();return{c(){i=F("text"),l=c0(t),n=c0(" citation"),r&&r.c(),this.h()},l(f){i=G(f,"text",{class:!0,x:!0,y:!0});var a=P(i);l=u0(a,t),n=u0(a," citation"),r&&r.l(a),a.forEach(b),this.h()},h(){c(i,"class","hover-inner svelte-12uigco"),c(i,"x",s=e[1]*.2),c(i,"y",7.5)},m(f,a){j(f,i,a),L(i,l),L(i,n),r&&r.m(i,null)},p(f,a){a&8&&t!==(t=r1(f[3])+"")&&T0(l,t),f[3]>1?r||(r=g1(),r.c(),r.m(i,null)):r&&(r.d(1),r=null),a&2&&s!==(s=f[1]*.2)&&c(i,"x",s)},d(f){f&&b(i),r&&r.d()}}}function g1(e){let i;return{c(){i=c0("s")},l(t){i=u0(t,"s")},m(t,l){j(t,i,l)},d(t){t&&b(i)}}}function m1(e){var o;let i,t,l=e[0].metricName+"",n,s,r=((o=e[0].metricValue)==null?void 0:o.toFixed(2))+"",f,a;return{c(){i=F("g"),t=F("text"),n=c0(l),s=F("text"),f=c0(r),this.h()},l(u){i=G(u,"g",{transform:!0});var h=P(i);t=G(h,"text",{class:!0});var S=P(t);n=u0(S,l),S.forEach(b),s=G(h,"text",{class:!0,y:!0});var w=P(s);f=u0(w,r),w.forEach(b),h.forEach(b),this.h()},h(){c(t,"class","hover-inner metric-value svelte-12uigco"),c(s,"class","hover-inner metric-value svelte-12uigco"),c(s,"y",.85),c(i,"transform",a="translate("+e[1]*.5+", "+6.65+")")},m(u,h){j(u,i,h),L(i,t),L(t,n),L(i,s),L(s,f)},p(u,h){var S;h&1&&l!==(l=u[0].metricName+"")&&T0(n,l),h&1&&r!==(r=((S=u[0].metricValue)==null?void 0:S.toFixed(2))+"")&&T0(f,r),h&2&&a!==(a="translate("+u[1]*.5+", "+6.65+")")&&c(i,"transform",a)},d(u){u&&b(i)}}}function We(e){let i,t,l=e[0]!=null&&h1(e);return{c(){l&&l.c(),i=$()},l(n){l&&l.l(n),i=$()},m(n,s){l&&l.m(n,s),j(n,i,s),t=!0},p(n,[s]){n[0]!=null?l?(l.p(n,s),s&1&&D(l,1)):(l=h1(n),l.c(),D(l,1),l.m(i.parentNode,i)):l&&(O0(),Z(l,1,1,()=>{l=null}),I0())},i(n){t||(D(l),t=!0)},o(n){Z(l),t=!1},d(n){n&&b(i),l&&l.d(n)}}}let C0=5,F0=3;function Be(e,i,t){let l,n,{hInfo:s}=i,{sideBarWidth:r}=i;return e.$$set=f=>{"hInfo"in f&&t(0,s=f.hInfo),"sideBarWidth"in f&&t(1,r=f.sideBarWidth)},e.$$.update=()=>{e.$$.dirty&1&&t(3,l=(s==null?void 0:s.weight)||0),e.$$.dirty&2&&t(2,n=r*.8)},[s,r,n,l]}class Pe extends z0{constructor(i){super(),L0(this,i,Be,We,P0,{hInfo:0,sideBarWidth:1})}}function d1(e,i,t){const l=e.slice();return l[19]=i[t],l}function p1(e){var k,W,C;let i,t,l,n,s,r,f,a,o,u,h,S;n=new Q0({props:{text:((W=(k=e[5])==null?void 0:k.bifurcations[e[2]])==null?void 0:W.description)||"",width:e[3],height:e[8]*.22}});let w=((C=e[13].available_metrics)==null?void 0:C.length)&&b1(e);return{c(){i=F("g"),t=F("rect"),l=F("g"),s0(n.$$.fragment),w&&w.c(),s=F("g"),r=F("foreignObject"),f=e0("input"),this.h()},l(_){i=G(_,"g",{style:!0,class:!0});var d=P(i);t=G(d,"rect",{fill:!0,"fill-opacity":!0,height:!0,width:!0,class:!0}),P(t).forEach(b),l=G(d,"g",{style:!0,class:!0});var I=P(l);a0(n.$$.fragment,I),I.forEach(b),w&&w.l(d),s=G(d,"g",{style:!0,class:!0});var g=P(s);r=G(g,"foreignObject",{width:!0,height:!0,transform:!0});var E=P(r);f=t0(E,"INPUT",{type:!0,min:!0,max:!0,class:!0}),E.forEach(b),g.forEach(b),d.forEach(b),this.h()},h(){c(t,"fill","grey"),c(t,"fill-opacity","0.3"),c(t,"height",e[8]),c(t,"width",e[4]),c(t,"class","svelte-1wyfc2b"),X(l,"--y-off",e[8]*.25+"px"),X(l,"--x-off",e[11]+"px"),c(l,"class","svelte-1wyfc2b"),c(f,"type","number"),c(f,"min","1"),c(f,"max",e[7]),c(f,"class","svelte-1wyfc2b"),c(r,"width","50"),c(r,"height","30"),c(r,"transform",a="scale("+e[10]+","+e[10]+")"),X(s,"--y-off",e[8]*.75+"px"),X(s,"--x-off",e[11]+"px"),c(s,"class","svelte-1wyfc2b"),X(i,"--y-off",e[12]+"px"),X(i,"--x-off","0px"),c(i,"class","svelte-1wyfc2b")},m(_,d){j(_,i,d),L(i,t),L(i,l),o0(n,l,null),w&&w.m(i,null),L(i,s),L(s,r),L(r,f),W0(f,e[0][e[2]].top_n),u=!0,h||(S=v0(f,"input",e[18]),h=!0)},p(_,d){var g,E,O;(!u||d&256)&&c(t,"height",_[8]),(!u||d&16)&&c(t,"width",_[4]);const I={};d&36&&(I.text=((E=(g=_[5])==null?void 0:g.bifurcations[_[2]])==null?void 0:E.description)||""),d&8&&(I.width=_[3]),d&256&&(I.height=_[8]*.22),n.$set(I),(!u||d&256)&&X(l,"--y-off",_[8]*.25+"px"),(!u||d&2048)&&X(l,"--x-off",_[11]+"px"),(O=_[13].available_metrics)!=null&&O.length?w?w.p(_,d):(w=b1(_),w.c(),w.m(i,s)):w&&(w.d(1),w=null),(!u||d&128)&&c(f,"max",_[7]),d&5&&w1(f.value)!==_[0][_[2]].top_n&&W0(f,_[0][_[2]].top_n),(!u||d&1024&&a!==(a="scale("+_[10]+","+_[10]+")"))&&c(r,"transform",a),(!u||d&256)&&X(s,"--y-off",_[8]*.75+"px"),(!u||d&2048)&&X(s,"--x-off",_[11]+"px"),(!u||d&4096)&&X(i,"--y-off",_[12]+"px")},i(_){u||(D(n.$$.fragment,_),_&&E0(()=>{u&&(o||(o=M0(i,w0,{duration:1e3},!0)),o.run(1))}),u=!0)},o(_){Z(n.$$.fragment,_),_&&(o||(o=M0(i,w0,{duration:1e3},!1)),o.run(0)),u=!1},d(_){_&&b(i),f0(n),w&&w.d(),_&&o&&o.end(),h=!1,S()}}}function b1(e){let i,t,l,n,s,r,f=S0(e[6]),a=[];for(let o=0;o<f.length;o+=1)a[o]=v1(d1(e,f,o));return{c(){i=F("g"),t=F("foreignObject"),l=e0("select");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){i=G(o,"g",{style:!0,class:!0});var u=P(i);t=G(u,"foreignObject",{width:!0,height:!0,transform:!0});var h=P(t);l=t0(h,"SELECT",{class:!0});var S=P(l);for(let w=0;w<a.length;w+=1)a[w].l(S);S.forEach(b),h.forEach(b),u.forEach(b),this.h()},h(){c(l,"class","svelte-1wyfc2b"),e[1]===void 0&&E0(()=>e[17].call(l)),c(t,"width","500"),c(t,"height","200"),c(t,"transform",n="scale("+e[9]+","+e[9]+")"),X(i,"--y-off",e[8]*.4+"px"),X(i,"--x-off",e[11]+"px"),c(i,"class","svelte-1wyfc2b")},m(o,u){j(o,i,u),L(i,t),L(t,l);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(l,null);l1(l,e[1],!0),s||(r=v0(l,"change",e[17]),s=!0)},p(o,u){if(u&64){f=S0(o[6]);let h;for(h=0;h<f.length;h+=1){const S=d1(o,f,h);a[h]?a[h].p(S,u):(a[h]=v1(S),a[h].c(),a[h].m(l,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=f.length}u&66&&l1(l,o[1]),u&512&&n!==(n="scale("+o[9]+","+o[9]+")")&&c(t,"transform",n),u&256&&X(i,"--y-off",o[8]*.4+"px"),u&2048&&X(i,"--x-off",o[11]+"px")},d(o){o&&b(i),J0(a,o),s=!1,r()}}}function v1(e){let i,t=e[19]+"",l,n;return{c(){i=e0("option"),l=c0(t),this.h()},l(s){i=t0(s,"OPTION",{});var r=P(i);l=u0(r,t),r.forEach(b),this.h()},h(){i.__value=n=e[19],W0(i,i.__value)},m(s,r){j(s,i,r),L(i,l)},p(s,r){r&64&&t!==(t=s[19]+"")&&T0(l,t),r&64&&n!==(n=s[19])&&(i.__value=n,W0(i,i.__value))},d(s){s&&b(i)}}}function ze(e){let i,t,l=e[13]!=null&&p1(e);return{c(){l&&l.c(),i=$()},l(n){l&&l.l(n),i=$()},m(n,s){l&&l.m(n,s),j(n,i,s),t=!0},p(n,[s]){n[13]!=null?l?(l.p(n,s),s&8192&&D(l,1)):(l=p1(n),l.c(),D(l,1),l.m(i.parentNode,i)):l&&(O0(),Z(l,1,1,()=>{l=null}),I0())},i(n){t||(D(l),t=!0)},o(n){Z(l),t=!1},d(n){n&&b(i),l&&l.d(n)}}}function Le(e,i,t){let l,n,s,r,f,a,{lVis:o}=i,{index:u}=i,{childRate:h}=i,{overHangRate:S}=i,{sideBarWidth:w}=i,{svgWidth:k}=i,{currentQcSpec:W}=i,{filterSpecs:C}=i,{metricOptions:_=["RCA A","Another longer named thing"]}=i,{selectedMetric:d}=i,{maxOnOneLevel:I=15}=i;function g(){d=X1(this),t(1,d),t(6,_)}function E(){C[u].top_n=w1(this.value),t(0,C)}return e.$$set=O=>{"lVis"in O&&t(14,o=O.lVis),"index"in O&&t(2,u=O.index),"childRate"in O&&t(15,h=O.childRate),"overHangRate"in O&&t(16,S=O.overHangRate),"sideBarWidth"in O&&t(3,w=O.sideBarWidth),"svgWidth"in O&&t(4,k=O.svgWidth),"currentQcSpec"in O&&t(5,W=O.currentQcSpec),"filterSpecs"in O&&t(0,C=O.filterSpecs),"metricOptions"in O&&t(6,_=O.metricOptions),"selectedMetric"in O&&t(1,d=O.selectedMetric),"maxOnOneLevel"in O&&t(7,I=O.maxOnOneLevel)},e.$$.update=()=>{e.$$.dirty&36&&t(13,l=W==null?void 0:W.bifurcations[u]),e.$$.dirty&114688&&t(12,n=o.topOffset+o.totalSize-o.totalSize*(h+S)),e.$$.dirty&49152&&t(8,s=o.totalSize*h),e.$$.dirty&8&&t(11,r=w*.02),e.$$.dirty&256&&t(10,f=s*.22/28),e.$$.dirty&328&&t(9,a=Math.min(s*.22/28,w/(18*.65*_.reduce((O,Q)=>O>Q.length?O:Q.length,0))))},[C,d,u,w,k,W,_,I,s,a,f,r,n,l,o,h,S,g,E]}class Ae extends z0{constructor(i){super(),L0(this,i,Le,ze,P0,{lVis:14,index:2,childRate:15,overHangRate:16,sideBarWidth:3,svgWidth:4,currentQcSpec:5,filterSpecs:0,metricOptions:6,selectedMetric:1,maxOnOneLevel:7})}}function M1(e,i,t){const l=e.slice();return l[35]=i[t],l[36]=i,l[37]=t,l}function S1(e){let i,t,l,n;function s(a){e[24](a)}function r(a){e[25](a,e[37])}let f={lVis:e[35],index:e[37],childRate:I1,overHangRate:R1,sideBarWidth:k0,svgWidth:B0,currentQcSpec:e[11],metricOptions:e[9][e[37]].possibleMetrics};return e[3]!==void 0&&(f.filterSpecs=e[3]),e[9][e[37]].selectedMetric!==void 0&&(f.selectedMetric=e[9][e[37]].selectedMetric),i=new Ae({props:f}),G0.push(()=>X0(i,"filterSpecs",s)),G0.push(()=>X0(i,"selectedMetric",r)),{c(){s0(i.$$.fragment)},l(a){a0(i.$$.fragment,a)},m(a,o){o0(i,a,o),n=!0},p(a,o){e=a;const u={};o[0]&4096&&(u.lVis=e[35]),o[0]&2048&&(u.currentQcSpec=e[11]),o[0]&512&&(u.metricOptions=e[9][e[37]].possibleMetrics),!t&&o[0]&8&&(t=!0,u.filterSpecs=e[3],D0(()=>t=!1)),!l&&o[0]&512&&(l=!0,u.selectedMetric=e[9][e[37]].selectedMetric,D0(()=>l=!1)),i.$set(u)},i(a){n||(D(i.$$.fragment,a),n=!0)},o(a){Z(i.$$.fragment,a),n=!1},d(a){f0(i,a)}}}function Ve(e){let i,t,l,n,s,r,f,a,o,u,h,S,w,k,W,C,_,d,I,g,E,O,Q;E0(e[22]);function N(v){e[23](v)}let x={items:e[6],labelFieldName:"name",valueFieldName:"id",hideArrow:!0};e[2]!==void 0&&(x.selectedItem=e[2]),f=new U1({props:x}),G0.push(()=>X0(f,"selectedItem",N)),S=new Pe({props:{hInfo:e[10],sideBarWidth:k0}});let V=S0(e[12]||[]),R=[];for(let v=0;v<V.length;v+=1)R[v]=S1(M1(e,V,v));const K=v=>Z(R[v],1,1,()=>{R[v]=null});return k=new O1({props:{qcSpec:e[11],attributeLabels:e[7],visibleTreeInfo:e[5],selectedTreeInfo:e[13],levelVisuals:e[12],levelMetrics:e[9],rootMeta:e[8],treeWidth:e[14],treeXOffset:e[15],childRate:I1,overHangRate:R1}}),k.$on("tree-interaction",e[16]),{c(){i=e0("div"),t=e0("div"),l=e0("div"),n=c0("FILTER"),s=i0(),r=e0("div"),s0(f.$$.fragment),o=i0(),u=e0("div"),h=F("svg"),s0(S.$$.fragment);for(let v=0;v<R.length;v+=1)R[v].c();w=$(),s0(k.$$.fragment),C=i0(),_=e0("div"),d=e0("p"),I=e0("b"),g=c0(s1),this.h()},l(v){i=t0(v,"DIV",{class:!0});var p=P(i);t=t0(p,"DIV",{class:!0});var q=P(t);l=t0(q,"DIV",{class:!0,style:!0});var Y=P(l);n=u0(Y,"FILTER"),Y.forEach(b),s=l0(q),r=t0(q,"DIV",{class:!0,style:!0});var B=P(r);a0(f.$$.fragment,B),B.forEach(b),q.forEach(b),o=l0(p),u=t0(p,"DIV",{class:!0});var M=P(u);h=G(M,"svg",{viewBox:!0,xmlns:!0,class:!0});var y=P(h);a0(S.$$.fragment,y);for(let A=0;A<R.length;A+=1)R[A].l(y);w=$(),a0(k.$$.fragment,y),y.forEach(b),M.forEach(b),C=l0(p),_=t0(p,"DIV",{class:!0});var J=P(_);d=t0(J,"P",{style:!0});var T=P(d);I=t0(T,"B",{});var z=P(I);g=u0(z,s1),z.forEach(b),T.forEach(b),J.forEach(b),p.forEach(b),this.h()},h(){c(l,"class","filt-side svelte-1r1z8yl"),X(l,"--sb-size",k0),c(r,"class","main-side svelte-1r1z8yl"),X(r,"--tree-size",e[14]),c(t,"class","treehead svelte-1r1z8yl"),c(h,"viewBox",W="0 0 "+B0+" "+e[4]),c(h,"xmlns","http://www.w3.org/2000/svg"),c(h,"class","svelte-1r1z8yl"),c(u,"class","treecontent svelte-1r1z8yl"),X(d,"text-align","center"),c(_,"class","treefoot svelte-1r1z8yl"),c(i,"class","treefix svelte-1r1z8yl")},m(v,p){j(v,i,p),L(i,t),L(t,l),L(l,n),L(t,s),L(t,r),o0(f,r,null),L(i,o),L(i,u),L(u,h),o0(S,h,null);for(let q=0;q<R.length;q+=1)R[q]&&R[q].m(h,null);L(h,w),o0(k,h,null),L(i,C),L(i,_),L(_,d),L(d,I),L(I,g),E=!0,O||(Q=v0(window,"resize",e[22]),O=!0)},p(v,p){const q={};p[0]&64&&(q.items=v[6]),!a&&p[0]&4&&(a=!0,q.selectedItem=v[2],D0(()=>a=!1)),f.$set(q);const Y={};if(p[0]&1024&&(Y.hInfo=v[10]),S.$set(Y),p[0]&6664){V=S0(v[12]||[]);let M;for(M=0;M<V.length;M+=1){const y=M1(v,V,M);R[M]?(R[M].p(y,p),D(R[M],1)):(R[M]=S1(y),R[M].c(),D(R[M],1),R[M].m(h,w))}for(O0(),M=V.length;M<R.length;M+=1)K(M);I0()}const B={};p[0]&2048&&(B.qcSpec=v[11]),p[0]&128&&(B.attributeLabels=v[7]),p[0]&32&&(B.visibleTreeInfo=v[5]),p[0]&8192&&(B.selectedTreeInfo=v[13]),p[0]&4096&&(B.levelVisuals=v[12]),p[0]&512&&(B.levelMetrics=v[9]),p[0]&256&&(B.rootMeta=v[8]),k.$set(B),(!E||p[0]&16&&W!==(W="0 0 "+B0+" "+v[4]))&&c(h,"viewBox",W)},i(v){if(!E){D(f.$$.fragment,v),D(S.$$.fragment,v);for(let p=0;p<V.length;p+=1)D(R[p]);D(k.$$.fragment,v),E=!0}},o(v){Z(f.$$.fragment,v),Z(S.$$.fragment,v),R=R.filter(Boolean);for(let p=0;p<R.length;p+=1)Z(R[p]);Z(k.$$.fragment,v),E=!1},d(v){v&&b(i),f0(f),f0(S),J0(R,v),f0(k),O=!1,Q()}}}let B0=100,k0=17,I1=.3,R1=.05;const je=15;function qe(e,i){const t=[],l=Math.max((((e==null?void 0:e.meta)||[]).length||0)-1,1);let n=0;const s=i/l;for(let r=0;r<l;r++)t.push({totalSize:s,topOffset:n}),n+=s;return t}function He(e,i){let t=new RegExp("\\{pc_id\\}","gi");return e.replace(t,i)}function Fe(e,i,t){let l,n,s,r,f,a,o;K1(e,J1,T=>t(27,o=T));let u,h,S=B0-k0,w=k0,k={},W=[],C,_,d,I={};const g=T=>({id:T[0],name:T[1].title});Y1(()=>{R0("root-descriptions",T=>{t(6,_=T[o.params.rootType]),t(2,d=_.filter(z=>z.id==o.params.rootId)[0])}),R0("attribute-statics",T=>{t(7,I=T)}),R0("qc-specs",T=>{t(17,k=Object.fromEntries(Object.entries(T).filter(([z,A])=>A.root_entity_type==o.params.rootType))),W=Object.entries(k).map(g),t(18,C=W[0])})});function E(T,z){[T,z].includes(void 0)||(x1(`${$1}/view/${o.params.rootType}/${z}`),R0(`qc-builds/${T}/${z}`,A=>{x(),t(19,[v,R,K,V]=[{name:"Selected!",...A},R,K,O()],v,t(3,R),t(9,K),t(8,V))}))}function O(){try{return JSON.parse(I[n.root_entity_type][(d==null?void 0:d.id)||""].meta)}catch{return{}}}function Q(T){return(z,A,n0)=>b0(A,T)===void 0?{}:z}function N(T){return(z,A,n0)=>Object.fromEntries(Object.entries(z).filter(([U,d0])=>b0([...A,U],T)!=null))}function x(){const T=d==null?void 0:d.id;for(let A of[R,K])for(;A.length>0;)A.pop();if(![n,T].includes(void 0))for(var z of n.bifurcations){R.push(JSON.parse(He(z.filter_format_str,T)));const A=z.available_metrics||[];K.push({possibleMetrics:A,selectedMetric:A[0]||""})}}let V={},R=[{include:[],exclude:[],top_n:je}],K=[{possibleMetrics:[""],selectedMetric:""}],v={name:"Root",weight:10},p={children:{}},q;function Y(T){var h0,p0;const z=T.detail.path,A=z[z.length-1],n0=T.detail.action;if(n0=="highlight"){const _0=b0(z,s.tree);if(_0===void 0)return;t(10,q={name:y1(A,I,n,z.length-1),path:z,weight:_0.weight,metricName:(h0=K[z.length-1])==null?void 0:h0.selectedMetric,metricValue:T.detail.metricValue});return}else if(n0=="de-highlight")return;let U=b0(z.slice(0,z.length-1),p);if(U===void 0)return;Object.keys(U.children).includes(A)?delete U.children[A]:U.children[A]={children:((p0=U.children[A])==null?void 0:p0.children)||{}},t(20,p)}function B(){t(1,h=window.innerWidth),t(0,u=window.innerHeight)}function M(T){d=T,t(2,d)}function y(T){R=T,t(3,R)}function J(T,z){e.$$.not_equal(K[z].selectedMetric,T)&&(K[z].selectedMetric=T,t(9,K))}return e.$$.update=()=>{e.$$.dirty[0]&3&&t(4,l=u*.8/h*100),e.$$.dirty[0]&393216&&t(11,n=k[(C==null?void 0:C.id)||""]),e.$$.dirty[0]&262148&&E(C==null?void 0:C.id,d==null?void 0:d.id),e.$$.dirty[0]&524296&&t(21,s=N1(v,R)),e.$$.dirty[0]&3145728&&t(5,r=n1(s.tree,Q(p))),e.$$.dirty[0]&1048608&&t(13,f=n1(r.tree,N(p))),e.$$.dirty[0]&48&&t(12,a=qe(r,l))},[u,h,d,R,l,r,_,I,V,K,q,n,a,f,S,w,Y,k,C,v,p,s,B,M,y,J]}class Ue extends z0{constructor(i){super(),L0(this,i,Fe,Ve,P0,{},null,[-1,-1])}}export{Ue as component};

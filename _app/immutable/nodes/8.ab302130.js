import{s as P0,e as n0,i as V,d as v,D as J0,G as Fe,E as H,a as i0,F,h as A,c as l0,j as c,k as K,y as P,H as M0,I as H0,J as E0,K as De,L as Ge,M as Xe,l as m0,m as d0,n as W0,f as e0,g as t0,N as B0,O as ye,P as le,Q as Ke,p as D0,B as ne,R as G0,A as Ye,o as Je}from"../chunks/scheduler.818ef87d.js";import{S as A0,i as L0,a as G,g as C0,c as I0,t as Z,b as o0,d as f0,m as c0,f as S0,e as u0,h as X0}from"../chunks/index.f7ab21c9.js";import{e as w0}from"../chunks/each.d7da38fb.js";import{p as Qe}from"../chunks/stores.410a81ed.js";import{a as b0,b as Ze,c as Ue,f as y0,d as ke,S as Ne,h as R0,e as xe,i as re,g as $e}from"../chunks/SimpleAutocomplete.14d69226.js";import{b as e1}from"../chunks/paths.242c7fac.js";import{B as Q0,a as t1,f as se}from"../chunks/BrokenFittedText.7f5654a1.js";import{A as ae}from"../chunks/constants.64b06403.js";function oe(e){return function(){return e}}const K0=Math.PI,Y0=2*K0,g0=1e-6,i1=Y0-g0;function Oe(e){this._+=e[0];for(let i=1,t=e.length;i<t;++i)this._+=arguments[i]+e[i]}function l1(e){let i=Math.floor(e);if(!(i>=0))throw new Error(`invalid digits: ${e}`);if(i>15)return Oe;const t=10**i;return function(l){this._+=l[0];for(let n=1,r=l.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+l[n]}}class n1{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?Oe:l1(i)}moveTo(i,t){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,t){this._append`L${this._x1=+i},${this._y1=+t}`}quadraticCurveTo(i,t,l,n){this._append`Q${+i},${+t},${this._x1=+l},${this._y1=+n}`}bezierCurveTo(i,t,l,n,r,s){this._append`C${+i},${+t},${+l},${+n},${this._x1=+r},${this._y1=+s}`}arcTo(i,t,l,n,r){if(i=+i,t=+t,l=+l,n=+n,r=+r,r<0)throw new Error(`negative radius: ${r}`);let s=this._x1,f=this._y1,a=l-i,o=n-t,u=s-i,h=f-t,E=u*u+h*h;if(this._x1===null)this._append`M${this._x1=i},${this._y1=t}`;else if(E>g0)if(!(Math.abs(h*a-o*u)>g0)||!r)this._append`L${this._x1=i},${this._y1=t}`;else{let S=l-s,R=n-f,C=a*a+o*o,w=S*S+R*R,_=Math.sqrt(C),b=Math.sqrt(E),T=r*Math.tan((K0-Math.acos((C+E-w)/(2*_*b)))/2),g=T/b,O=T/_;Math.abs(g-1)>g0&&this._append`L${i+g*u},${t+g*h}`,this._append`A${r},${r},0,0,${+(h*S>u*R)},${this._x1=i+O*a},${this._y1=t+O*o}`}}arc(i,t,l,n,r,s){if(i=+i,t=+t,l=+l,s=!!s,l<0)throw new Error(`negative radius: ${l}`);let f=l*Math.cos(n),a=l*Math.sin(n),o=i+f,u=t+a,h=1^s,E=s?n-r:r-n;this._x1===null?this._append`M${o},${u}`:(Math.abs(this._x1-o)>g0||Math.abs(this._y1-u)>g0)&&this._append`L${o},${u}`,l&&(E<0&&(E=E%Y0+Y0),E>i1?this._append`A${l},${l},0,1,${h},${i-f},${t-a}A${l},${l},0,1,${h},${this._x1=o},${this._y1=u}`:E>g0&&this._append`A${l},${l},0,${+(E>=K0)},${h},${this._x1=i+l*Math.cos(r)},${this._y1=t+l*Math.sin(r)}`)}rect(i,t,l,n){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+t}h${l=+l}v${+n}h${-l}Z`}toString(){return this._}}function r1(e){let i=3;return e.digits=function(t){if(!arguments.length)return i;if(t==null)i=null;else{const l=Math.floor(t);if(!(l>=0))throw new RangeError(`invalid digits: ${t}`);i=l}return e},()=>new n1(i)}var s1=Array.prototype.slice;function a1(e){return e[0]}function o1(e){return e[1]}class f1{constructor(i,t){this._context=i,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,t){switch(i=+i,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(i,t):this._context.moveTo(i,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,t,i,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,i,this._y0,i,t);break}}this._x0=i,this._y0=t}}function c1(e){return new f1(e,!1)}function u1(e){return e.source}function h1(e){return e.target}function _1(e){let i=u1,t=h1,l=a1,n=o1,r=null,s=null,f=r1(a);function a(){let o;const u=s1.call(arguments),h=i.apply(this,u),E=t.apply(this,u);if(r==null&&(s=e(o=f())),s.lineStart(),u[0]=h,s.point(+l.apply(this,u),+n.apply(this,u)),u[0]=E,s.point(+l.apply(this,u),+n.apply(this,u)),s.lineEnd(),o)return s=null,o+""||null}return a.source=function(o){return arguments.length?(i=o,a):i},a.target=function(o){return arguments.length?(t=o,a):t},a.x=function(o){return arguments.length?(l=typeof o=="function"?o:oe(+o),a):l},a.y=function(o){return arguments.length?(n=typeof o=="function"?o:oe(+o),a):n},a.context=function(o){return arguments.length?(o==null?r=s=null:s=e(r=o),a):r},a}function g1(){return _1(c1)}const m1={0:0,1:0,2:.699,3:0,4:.001,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:0,14:.002,15:0,16:0,17:0,18:.001,19:0,20:.002,21:.008,22:0,23:0,24:0,25:.015,26:.002,27:.009,28:.005,29:.002,30:.002,31:.003,32:0,33:0,34:0,35:0,36:0,37:.014,38:.002,39:.006,40:.014,41:.001,42:0,43:0,44:0,45:0,46:0,47:.002,48:0,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.004,57:.004,58:.001,59:0,60:0,61:0,62:0,63:0,64:.003,65:0,66:0,67:0,68:0,70:0,71:.001,72:.001,73:.038,74:0,75:0,76:0,77:0,78:.012,79:.006,80:.002,81:.001,82:.001,83:0,84:0,85:0,86:0,87:.002,88:.001,89:0,90:0,91:0,92:0,93:.001,94:.001,95:0,96:0,97:0,98:0,99:.059,100:0,101:0,102:.024,103:0,104:.001,105:0,106:0,107:.007,108:0,109:.002,110:.012,111:.019,112:0,113:0,114:.002,115:.047,116:0,117:0,118:0,119:0,120:.004,121:0,122:0,123:0,124:0,125:0,127:.032,128:0,129:0,130:.003,131:.002,132:0,133:.03,134:0,135:0,136:.006,137:.001,138:.006,139:0,140:0,141:0,142:0,143:.001,144:.002,145:0,146:.084,147:0,148:.001,149:0,150:0,151:0,152:0,153:.005,154:.01,155:0,156:0,157:.002,158:.063,159:0,160:0,161:.005,162:0,163:0,164:0,165:0,166:.053,167:0,168:0,169:0,170:0,171:.001,172:0,173:0,174:0,175:0,176:0,177:0,178:.022,179:0,180:0,181:.005,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:.002,190:0,191:.001,192:0,193:.005,194:0,195:.001,196:0,197:0,198:0,199:.006,200:0,201:0,202:.047,203:0,204:0,205:0,206:.002,207:0,208:0,209:0,210:.253,211:0,212:0,213:.019,214:0,215:0,216:.006,217:0,218:.007,219:0,220:.002,221:.001,222:0,223:.002,224:.006},d1={0:0,1:.001,2:.204,3:0,4:.002,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:.001,14:.003,15:0,16:0,17:0,18:.002,19:0,20:.002,21:.022,22:0,23:0,24:0,25:.065,26:.006,27:.034,28:.015,29:.005,30:.002,31:.007,32:0,33:0,34:0,35:.001,36:0,37:.02,38:.004,39:.022,40:.059,41:.004,42:0,43:0,44:0,45:.001,46:0,47:.003,48:0,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.01,57:.007,58:.003,59:0,60:0,61:0,62:0,63:0,64:.009,65:0,66:0,67:0,68:0,70:0,71:.001,72:.001,73:.026,74:0,75:0,76:0,77:.001,78:.033,79:.015,80:.005,81:.003,82:.002,83:0,84:0,85:0,86:.001,87:.005,88:.002,89:0,90:0,91:0,92:.001,93:.003,94:.003,95:0,96:0,97:0,98:0,99:.023,100:0,101:0,102:.105,103:0,104:.002,105:0,106:0,107:.006,108:0,109:.003,110:.013,111:.072,112:0,113:0,114:.002,115:.099,116:0,117:0,118:0,119:0,120:.006,121:0,122:0,123:0,124:0,125:0,127:.12,128:0,129:0,130:.004,131:.007,132:0,133:.088,134:0,135:0,136:.006,137:.002,138:.017,139:0,140:.001,141:0,142:0,143:.002,144:.004,145:0,146:.28,147:0,148:.002,149:0,150:0,151:0,152:0,153:.015,154:.019,155:.001,156:.001,157:.006,158:.108,159:0,160:.001,161:.013,162:0,163:0,164:.001,165:0,166:.047,167:0,168:0,169:0,170:.002,171:.003,172:.001,173:0,174:.001,175:0,176:0,177:0,178:.081,179:.001,180:0,181:.011,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:.006,190:0,191:0,192:0,193:.018,194:0,195:.002,196:0,197:0,198:.001,199:.025,200:0,201:.001,202:.13,203:0,204:.001,205:0,206:.003,207:0,208:0,209:0,210:.442,211:0,212:0,213:.06,214:0,215:0,216:.012,217:.001,218:.017,219:0,220:.004,221:.003,222:0,223:.007,224:.006},p1={0:0,1:.001,2:.242,3:0,4:.001,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:.001,14:.004,15:0,16:0,17:0,18:.001,19:0,20:.001,21:.013,22:0,23:0,24:0,25:.039,26:.004,27:.018,28:.011,29:.002,30:.003,31:.003,32:0,33:0,34:0,35:.001,36:0,37:.02,38:.002,39:.015,40:.035,41:.002,42:0,43:0,44:0,45:.001,46:0,47:.003,48:0,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.007,57:.006,58:.001,59:0,60:0,61:0,62:0,63:0,64:.005,65:0,66:0,67:0,68:0,70:.001,71:.002,72:0,73:.024,74:0,75:0,76:0,77:0,78:.029,79:.009,80:.002,81:.002,82:.002,83:0,84:0,85:0,86:.001,87:.002,88:.002,89:0,90:0,91:0,92:.001,93:.002,94:.004,95:0,96:0,97:0,98:0,99:.028,100:0,101:0,102:.068,103:0,104:.002,105:0,106:0,107:.007,108:0,109:.004,110:.01,111:.045,112:0,113:0,114:.002,115:.101,116:0,117:0,118:0,119:0,120:.006,121:0,122:0,123:0,124:0,125:0,127:.068,128:0,129:0,130:.004,131:.004,132:0,133:.057,134:0,135:0,136:.007,137:.003,138:.01,139:0,140:.001,141:0,142:0,143:.001,144:.001,145:0,146:.194,147:0,148:.001,149:0,150:0,151:0,152:0,153:.011,154:.011,155:.001,156:0,157:.004,158:.339,159:0,160:.001,161:.009,162:0,163:0,164:0,165:0,166:.041,167:0,168:0,169:0,170:.002,171:.001,172:.001,173:0,174:.001,175:0,176:0,177:0,178:.046,179:.001,180:0,181:.017,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:.003,190:.001,191:0,192:0,193:.017,194:0,195:.002,196:0,197:0,198:.001,199:.018,200:0,201:.001,202:.085,203:0,204:.001,205:0,206:.004,207:0,208:0,209:0,210:.409,211:0,212:0,213:.042,214:0,215:0,216:.008,217:.001,218:.013,219:0,220:.002,221:.003,222:0,223:.006,224:.005},b1={Asia:m1,Europe:d1,"North America":{0:0,1:.001,2:.214,3:0,4:.001,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:.001,14:.003,15:0,16:0,17:0,18:.001,19:0,20:.001,21:.014,22:0,23:0,24:0,25:.032,26:.003,27:.017,28:.009,29:.004,30:.002,31:.004,32:0,33:0,34:0,35:.001,36:0,37:.018,38:.003,39:.014,40:.03,41:.002,42:0,43:0,44:0,45:.001,46:0,47:.002,48:0,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.008,57:.005,58:.002,59:0,60:0,61:0,62:0,63:0,64:.006,65:0,66:0,67:0,68:0,70:0,71:.001,72:.001,73:.027,74:0,75:0,76:0,77:0,78:.026,79:.01,80:.003,81:.002,82:.001,83:0,84:0,85:0,86:0,87:.003,88:.002,89:0,90:0,91:0,92:.001,93:.002,94:.003,95:0,96:0,97:0,98:0,99:.022,100:0,101:0,102:.06,103:0,104:.002,105:0,106:0,107:.005,108:0,109:.004,110:.012,111:.04,112:0,113:0,114:.002,115:.116,116:0,117:0,118:0,119:0,120:.005,121:0,122:0,123:0,124:0,125:0,127:.067,128:0,129:0,130:.003,131:.005,132:0,133:.059,134:0,135:0,136:.005,137:.002,138:.01,139:0,140:0,141:0,142:0,143:.002,144:.002,145:0,146:.158,147:0,148:.002,149:0,150:0,151:0,152:0,153:.01,154:.013,155:0,156:0,157:.003,158:.086,159:0,160:.001,161:.01,162:0,163:0,164:0,165:0,166:.042,167:0,168:0,169:0,170:.001,171:.002,172:.001,173:0,174:.001,175:0,176:0,177:0,178:.048,179:.001,180:0,181:.009,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:.004,190:0,191:0,192:0,193:.015,194:0,195:.002,196:0,197:0,198:.001,199:.015,200:0,201:0,202:.087,203:0,204:0,205:0,206:.002,207:0,208:0,209:0,210:.631,211:0,212:0,213:.041,214:0,215:0,216:.008,217:.001,218:.015,219:0,220:.003,221:.002,222:0,223:.006,224:.004},Oceania:p1,"South America":{0:.001,1:.001,2:.195,3:0,4:.001,5:0,6:0,7:.001,9:0,10:0,11:0,12:0,13:.002,14:.004,15:0,16:0,17:0,18:.001,19:0,20:.001,21:.025,22:0,23:0,24:0,25:.042,26:.007,27:.022,28:.023,29:.006,30:.003,31:.008,32:0,33:.001,34:0,35:.001,36:0,37:.028,38:.008,39:.016,40:.038,41:.003,42:0,43:0,44:0,45:.001,46:0,47:.004,48:.001,49:0,50:0,51:0,52:0,53:.001,54:0,55:0,56:.017,57:.008,58:.004,59:.001,60:0,61:0,62:0,63:0,64:.008,65:0,66:0,67:0,68:0,70:0,71:.002,72:.001,73:.027,74:0,75:0,76:0,77:.001,78:.305,79:.016,80:.008,81:.005,82:.002,83:0,84:0,85:0,86:.001,87:.005,88:.009,89:0,90:0,91:0,92:.003,93:.001,94:.004,95:0,96:0,97:0,98:0,99:.019,100:0,101:0,102:.07,103:0,104:.002,105:0,106:0,107:.006,108:0,109:.004,110:.015,111:.049,112:0,113:0,114:.002,115:.104,116:0,117:0,118:0,119:0,120:.007,121:0,122:0,123:.001,124:0,125:0,127:.095,128:0,129:0,130:.005,131:.014,132:0,133:.083,134:0,135:0,136:.008,137:.004,138:.017,139:0,140:.001,141:0,142:0,143:.004,144:.004,145:0,146:.19,147:0,148:.005,149:0,150:0,151:0,152:0,153:.013,154:.02,155:.001,156:0,157:.008,158:.113,159:0,160:.002,161:.023,162:0,163:0,164:.001,165:.001,166:.044,167:0,168:0,169:0,170:.001,171:.004,172:.003,173:0,174:.001,175:0,176:0,177:0,178:.06,179:.002,180:0,181:.011,182:0,183:.001,184:0,185:0,186:0,187:0,188:.001,189:.004,190:0,191:0,192:0,193:.022,194:0,195:.002,196:0,197:0,198:.001,199:.022,200:0,201:.002,202:.108,203:0,204:.001,205:0,206:.003,207:.001,208:0,209:0,210:.45,211:0,212:0,213:.071,214:0,215:0,216:.013,217:.001,218:.018,219:0,220:.003,221:.004,222:0,223:.018,224:.008}},v1={597:.005,1945:.005,1979:.008,2351:.032,2498:.007,2910:.008,3750:.007,4416:.006,5033:.055,10390:.005,11868:.023,12259:.012,13048:.005,13578:.006,14063:.005,16444:.01,17942:.008,19884:.005,20630:.01,21032:.003,22125:.004,23482:.012,25714:.005,27327:.004,27828:.037,28303:.034,28882:.006,30493:.006,30515:.012,30722:.004,32057:.031,33070:.007,34592:.01,35431:.008,36340:.028,37850:.007,41288:.005,41561:.005,42128:.049,43385:.007,45212:.004,45507:.008,46587:.006,47092:.03,48490:.008,50148:.026,50308:.011,50707:.016,51315:.012,51455:.005,51605:.007,51613:.01,53165:.032,53538:.02,54962:.047,56023:.014,56768:.043,57112:.034,64142:.005,65087:.012,67686:.004,69246:.075,70084:.031,71425:.006,71934:.026,73347:.008,73402:.007,73706:.004,74461:.011,74693:.005,75761:.007,80266:.005,80880:.013,81221:.007,82128:.005,82351:.033,85244:.005,87585:.008,89158:.01,89741:.005,90863:.008,91600:.031,94243:.007,94320:.006,95532:.007,95636:.007,95883:.006,97197:.007,98510:.007,100642:.041,101098:.01,102248:.004,102285:.032,104445:.009,105024:.007,105574:.007,106871:.025,107012:.004,107513:.011,107844:.019},M1={597:.009,1945:.018,1979:.011,2351:.006,2498:.016,2910:.023,3750:.024,4416:.017,5033:.015,10390:.025,11868:.018,12259:.026,13048:.024,13578:.013,14063:.023,16444:.017,17942:.015,19884:.023,20630:.019,21032:.009,22125:.011,23482:.043,25714:.02,27327:.016,27828:.017,28303:.004,28882:.013,30493:.024,30515:.031,30722:.013,32057:.012,33070:.01,34592:.02,35431:.019,36340:.008,37850:.024,41288:.013,41561:.011,42128:.015,43385:.035,45212:.012,45507:.025,46587:.014,47092:.009,48490:.02,50148:.007,50308:.016,50707:.011,51315:.048,51455:.033,51605:.021,51613:.024,53165:.009,53538:.052,54962:.017,56023:.01,56768:.011,57112:.011,64142:.021,65087:.007,67686:.022,69246:.02,70084:.006,71425:.009,71934:.006,73347:.019,73402:.015,73706:.011,74461:.047,74693:.019,75761:.015,80266:.013,80880:.055,81221:.025,82128:.031,82351:.005,85244:.012,87585:.019,89158:.025,89741:.01,90863:.015,91600:.004,94243:.011,94320:.025,95532:.028,95636:.014,95883:.02,97197:.015,98510:.016,100642:.01,101098:.016,102248:.008,102285:.013,104445:.018,105024:.015,105574:.01,106871:.005,107012:.018,107513:.024,107844:.011},S1={597:.007,1945:.009,1979:.009,2351:.01,2498:.015,2910:.02,3750:.011,4416:.013,5033:.015,10390:.015,11868:.014,12259:.023,13048:.011,13578:.011,14063:.011,16444:.073,17942:.011,19884:.01,20630:.079,21032:.009,22125:.01,23482:.023,25714:.012,27327:.016,27828:.013,28303:.007,28882:.01,30493:.012,30515:.03,30722:.011,32057:.012,33070:.009,34592:.075,35431:.02,36340:.009,37850:.009,41288:.013,41561:.01,42128:.016,43385:.018,45212:.011,45507:.011,46587:.013,47092:.008,48490:.017,50148:.009,50308:.073,50707:.008,51315:.026,51455:.022,51605:.018,51613:.024,53165:.01,53538:.046,54962:.018,56023:.008,56768:.012,57112:.013,64142:.011,65087:.007,67686:.011,69246:.02,70084:.008,71425:.006,71934:.007,73347:.016,73402:.012,73706:.011,74461:.027,74693:.008,75761:.014,80266:.009,80880:.031,81221:.014,82128:.02,82351:.006,85244:.009,87585:.016,89158:.09,89741:.007,90863:.012,91600:.006,94243:.011,94320:.014,95532:.017,95636:.01,95883:.009,97197:.014,98510:.012,100642:.009,101098:.01,102248:.01,102285:.015,104445:.015,105024:.012,105574:.008,106871:.007,107012:.01,107513:.02,107844:.012},w1={Asia:v1,Europe:M1,"North America":{597:.012,1945:.008,1979:.016,2351:.007,2498:.019,2910:.035,3750:.012,4416:.024,5033:.017,10390:.013,11868:.016,12259:.041,13048:.013,13578:.019,14063:.011,16444:.014,17942:.022,19884:.011,20630:.015,21032:.016,22125:.017,23482:.02,25714:.01,27327:.03,27828:.016,28303:.004,28882:.019,30493:.013,30515:.038,30722:.018,32057:.013,33070:.016,34592:.016,35431:.023,36340:.008,37850:.011,41288:.024,41561:.016,42128:.016,43385:.017,45212:.021,45507:.014,46587:.023,47092:.009,48490:.03,50148:.007,50308:.013,50707:.009,51315:.025,51455:.016,51605:.035,51613:.038,53165:.01,53538:.075,54962:.018,56023:.01,56768:.012,57112:.012,64142:.01,65087:.007,67686:.01,69246:.021,70084:.006,71425:.012,71934:.006,73347:.03,73402:.021,73706:.02,74461:.024,74693:.009,75761:.012,80266:.018,80880:.027,81221:.012,82128:.016,82351:.005,85244:.016,87585:.028,89158:.021,89741:.014,90863:.024,91600:.004,94243:.014,94320:.012,95532:.014,95636:.021,95883:.01,97197:.025,98510:.022,100642:.01,101098:.021,102248:.012,102285:.012,104445:.029,105024:.022,105574:.015,106871:.006,107012:.007,107513:.038,107844:.011},Oceania:S1,"South America":{597:.012,1945:.011,1979:.014,2351:.007,2498:.017,2910:.022,3750:.017,4416:.017,5033:.014,10390:.018,11868:.019,12259:.027,13048:.013,13578:.018,14063:.014,16444:.02,17942:.017,19884:.014,20630:.018,21032:.009,22125:.009,23482:.025,25714:.012,27327:.015,27828:.014,28303:.003,28882:.018,30493:.02,30515:.033,30722:.011,32057:.012,33070:.009,34592:.023,35431:.02,36340:.011,37850:.013,41288:.012,41561:.013,42128:.015,43385:.024,45212:.011,45507:.019,46587:.016,47092:.01,48490:.023,50148:.005,50308:.016,50707:.011,51315:.029,51455:.018,51605:.024,51613:.028,53165:.01,53538:.056,54962:.02,56023:.009,56768:.01,57112:.012,64142:.016,65087:.008,67686:.012,69246:.017,70084:.006,71425:.015,71934:.006,73347:.019,73402:.024,73706:.011,74461:.033,74693:.011,75761:.26,80266:.014,80880:.032,81221:.017,82128:.016,82351:.004,85244:.017,87585:.019,89158:.025,89741:.01,90863:.012,91600:.004,94243:.013,94320:.014,95532:.021,95636:.019,95883:.017,97197:.02,98510:.013,100642:.01,101098:.011,102248:.008,102285:.011,104445:.016,105024:.014,105574:.016,106871:.006,107012:.01,107513:.032,107844:.012}},Z0=()=>({normalizedMetric:0,rawMetric:0}),y1={"Global RCA":O1,"Continent level RCA":E1};function k1(e,i,t,l,n){const r=y1[e];return r===void 0?Z0:r(i,t,l,n)}function O1(e,i,t){const l=e.bifurcations[i].attribute_kind,n=I1[l];return Ee(t,n)}function E1(e,i,t,l){const n=e.bifurcations[i].attribute_kind,r=l.continent,s=R1[n];if(s===void 0)return Z0;const f=s[r||""];return Ee(t,f)}function Ee(e,i){if(i==null)return Z0;const t=(e==null?void 0:e.weight)||1;return(l,n)=>{const s=l/t/i[n],f=Math.log2(s)/2;return{rawMetric:s,normalizedMetric:f}}}const C1={44783:.011,11568:.028,18966:.027,44048:.141,21044:.077,64020:.042,4578:.015,16583:.515,10484:.05,11797:.428,58847:.35,32279:.074,7501:.122,7922:.027,25155:.136,19974:.1,38043:.008,48940:.032,31340:.253},I1={Concept:C1},R1={Country:b1,Institution:w1};function fe(e,i,t){const l=e.slice();return l[51]=i[t].id,l[52]=i[t].parsedChild,l}function ce(e){let i,t;const l=[e[52].cachedProps,{qcSpec:e[0]},{attributeLabels:e[1]},{visibleTreeInfo:e[2]},{selectedTreeInfo:e[3]},{levelVisuals:e[4]},{levelMetrics:e[5]},{rootMeta:e[6]},{treeWidth:e[7]},{treeXOffset:e[11]},{childRate:e[8]},{overHangRate:e[9]},{preStraightRate:e[10]}];let n={};for(let r=0;r<l.length;r+=1)n=Xe(n,l[r]);return i=new Ce({props:n}),i.$on("tree-interaction",e[36]),{c(){o0(i.$$.fragment)},l(r){f0(i.$$.fragment,r)},m(r,s){c0(i,r,s),t=!0},p(r,s){const f=s[0]&36863?Ze(l,[s[0]&32768&&Ue(r[52].cachedProps),s[0]&1&&{qcSpec:r[0]},s[0]&2&&{attributeLabels:r[1]},s[0]&4&&{visibleTreeInfo:r[2]},s[0]&8&&{selectedTreeInfo:r[3]},s[0]&16&&{levelVisuals:r[4]},s[0]&32&&{levelMetrics:r[5]},s[0]&64&&{rootMeta:r[6]},s[0]&128&&{treeWidth:r[7]},s[0]&2048&&{treeXOffset:r[11]},s[0]&256&&{childRate:r[8]},s[0]&512&&{overHangRate:r[9]},s[0]&1024&&{preStraightRate:r[10]}]):{};i.$set(f)},i(r){t||(G(i.$$.fragment,r),t=!0)},o(r){Z(i.$$.fragment,r),t=!1},d(r){u0(i,r)}}}function ue(e){let i,t,l,n,r,s,f,a,o,u,h,E,S,R,C,w,_,b,T,g,O,y,X,N,U,D,z,Y,J,W,B,x;z=new Q0({props:{text:e[52].name,width:e[52].width,height:e[13]}});let m=e[52].isSelected&&ce(e);return{c(){i=H("defs"),t=H("linearGradient"),l=H("stop"),s=H("stop"),o=H("stop"),S=i0(),R=H("path"),b=i0(),T=H("rect"),U=i0(),D=H("g"),o0(z.$$.fragment),Y=i0(),m&&m.c(),J=n0(),this.h()},l(d){i=F(d,"defs",{});var M=A(i);t=F(M,"linearGradient",{id:!0,gradientTransform:!0});var j=A(t);l=F(j,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),A(l).forEach(v),s=F(j,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),A(s).forEach(v),o=F(j,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),A(o).forEach(v),j.forEach(v),M.forEach(v),S=l0(d),R=F(d,"path",{d:!0,fill:!0,class:!0}),A(R).forEach(v),b=l0(d),T=F(d,"rect",{"fill-opacity":!0,x:!0,y:!0,height:!0,width:!0,class:!0}),A(T).forEach(v),U=l0(d),D=F(d,"g",{style:!0,class:!0});var k=A(D);f0(z.$$.fragment,k),k.forEach(v),Y=l0(d),m&&m.l(d),J=n0(),this.h()},h(){c(l,"offset","0%"),c(l,"stop-opacity",n=e[52].isSelected?"80%":"0%"),c(l,"stop-color",r=e[52].colorStr),c(l,"class","svelte-p699pa"),c(s,"offset","20%"),c(s,"stop-opacity",f=e[52].isSelected?"80%":"5%"),c(s,"stop-color",a=e[52].colorStr),c(s,"class","svelte-p699pa"),c(o,"offset","50%"),c(o,"stop-opacity",u=e[52].isSelected?"80%":"25%"),c(o,"stop-color",h=e[52].colorStr),c(o,"class","svelte-p699pa"),c(t,"id",E="path-grad-"+e[52].strId),c(t,"gradientTransform","rotate(90)"),c(R,"d",C=e[52].linkPath),c(R,"fill",w="url('#path-grad-"+e[52].strId+"')"),c(R,"class","svelte-p699pa"),c(T,"fill-opacity",g=.25+Math.abs(e[52].specMetric.normalizedMetric)/1.5),c(T,"x",O=e[52].cachedProps.xOffset+e[12]/4),c(T,"y",y=e[14]+e[13]/2-(e[52].specMetric.normalizedMetric<0?0:e[52].specMetric.normalizedMetric*e[13]/2)),c(T,"height",X=Math.abs(e[52].specMetric.normalizedMetric)*e[13]/2),c(T,"width",N=e[7]/200),c(T,"class","svelte-p699pa"),K(D,"--y-off",e[16]+"px"),K(D,"--x-off",e[52].cachedProps.xOffset+.5+"px"),c(D,"class","svelte-p699pa")},m(d,M){V(d,i,M),P(i,t),P(t,l),P(t,s),P(t,o),V(d,S,M),V(d,R,M),V(d,b,M),V(d,T,M),V(d,U,M),V(d,D,M),c0(z,D,null),V(d,Y,M),m&&m.m(d,M),V(d,J,M),W=!0,B||(x=[M0(R,"mouseover",function(){H0(e[17]("highlight",e[51],e[52].specMetric.rawMetric))&&e[17]("highlight",e[51],e[52].specMetric.rawMetric).apply(this,arguments)}),M0(R,"mouseleave",function(){H0(e[17]("de-highlight",e[51],0))&&e[17]("de-highlight",e[51],0).apply(this,arguments)}),M0(R,"click",function(){H0(e[17]("toggle-select",e[51],0))&&e[17]("toggle-select",e[51],0).apply(this,arguments)})],B=!0)},p(d,M){e=d,(!W||M[0]&32768&&n!==(n=e[52].isSelected?"80%":"0%"))&&c(l,"stop-opacity",n),(!W||M[0]&32768&&r!==(r=e[52].colorStr))&&c(l,"stop-color",r),(!W||M[0]&32768&&f!==(f=e[52].isSelected?"80%":"5%"))&&c(s,"stop-opacity",f),(!W||M[0]&32768&&a!==(a=e[52].colorStr))&&c(s,"stop-color",a),(!W||M[0]&32768&&u!==(u=e[52].isSelected?"80%":"25%"))&&c(o,"stop-opacity",u),(!W||M[0]&32768&&h!==(h=e[52].colorStr))&&c(o,"stop-color",h),(!W||M[0]&32768&&E!==(E="path-grad-"+e[52].strId))&&c(t,"id",E),(!W||M[0]&32768&&C!==(C=e[52].linkPath))&&c(R,"d",C),(!W||M[0]&32768&&w!==(w="url('#path-grad-"+e[52].strId+"')"))&&c(R,"fill",w),(!W||M[0]&32768&&g!==(g=.25+Math.abs(e[52].specMetric.normalizedMetric)/1.5))&&c(T,"fill-opacity",g),(!W||M[0]&36864&&O!==(O=e[52].cachedProps.xOffset+e[12]/4))&&c(T,"x",O),(!W||M[0]&57344&&y!==(y=e[14]+e[13]/2-(e[52].specMetric.normalizedMetric<0?0:e[52].specMetric.normalizedMetric*e[13]/2)))&&c(T,"y",y),(!W||M[0]&40960&&X!==(X=Math.abs(e[52].specMetric.normalizedMetric)*e[13]/2))&&c(T,"height",X),(!W||M[0]&128&&N!==(N=e[7]/200))&&c(T,"width",N);const j={};M[0]&32768&&(j.text=e[52].name),M[0]&32768&&(j.width=e[52].width),M[0]&8192&&(j.height=e[13]),z.$set(j),(!W||M[0]&65536)&&K(D,"--y-off",e[16]+"px"),(!W||M[0]&32768)&&K(D,"--x-off",e[52].cachedProps.xOffset+.5+"px"),e[52].isSelected?m?(m.p(e,M),M[0]&32768&&G(m,1)):(m=ce(e),m.c(),G(m,1),m.m(J.parentNode,J)):m&&(C0(),Z(m,1,1,()=>{m=null}),I0())},i(d){W||(d&&E0(()=>{W&&(_||(_=S0(R,y0,{duration:300},!0)),_.run(1))}),G(z.$$.fragment,d),G(m),W=!0)},o(d){d&&(_||(_=S0(R,y0,{duration:300},!1)),_.run(0)),Z(z.$$.fragment,d),Z(m),W=!1},d(d){d&&(v(i),v(S),v(R),v(b),v(T),v(U),v(D),v(Y),v(J)),d&&_&&_.end(),u0(z),m&&m.d(d),B=!1,De(x)}}}function T1(e){let i,t,l=w0(e[15]),n=[];for(let s=0;s<l.length;s+=1)n[s]=ue(fe(e,l,s));const r=s=>Z(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();i=n0()},l(s){for(let f=0;f<n.length;f+=1)n[f].l(s);i=n0()},m(s,f){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,f);V(s,i,f),t=!0},p(s,f){if(f[0]&262143){l=w0(s[15]);let a;for(a=0;a<l.length;a+=1){const o=fe(s,l,a);n[a]?(n[a].p(o,f),G(n[a],1)):(n[a]=ue(o),n[a].c(),G(n[a],1),n[a].m(i.parentNode,i))}for(C0(),a=l.length;a<n.length;a+=1)r(a);I0()}},i(s){if(!t){for(let f=0;f<l.length;f+=1)G(n[f]);t=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)Z(n[f]);t=!1},d(s){s&&v(i),J0(n,s)}}}function he(e,i,t,l,n){return((e==null?void 0:e.rank)||0)*i+t*((e==null?void 0:e.weight)||0)/l+n}function W1(e,i,t){let l,n,r,s,f,a,o,u,h,E,S,R,C,w,_,b,T,g,O,y,X,N,{qcSpec:U}=i,{attributeLabels:D}=i,{visibleTreeInfo:z}=i,{selectedTreeInfo:Y}=i,{levelVisuals:J=[]}=i,{levelMetrics:W=[]}=i,{rootMeta:B={}}=i,{pathInCompleteTree:x=[]}=i,{rootWidth:m=30}=i,{treeWidth:d=70}=i,{childRate:M=.2}=i,{overHangRate:j=.05}=i,{preStraightRate:k=.05}=i,{treeXOffset:I=0}=i,{childrenMargin:L=.2}=i,{minimumChildWidth:$=L*2+1}=i,{linkEdgePadding:Q=$/3}=i,{linkBetweenPadRate:s0=.2}=i,{width:r0=m}=i,{xOffset:p0=(d-m)/2+I}=i,{levelColorScaleMin:h0=0}=i,{levelColorScaleMax:z0=1}=i;const Te=Fe();function We(p,q,a0){return()=>{Te("tree-interaction",{path:[...x,q],action:p,metricValue:a0})}}const U0=g1().source(p=>p.start).target(p=>p.end),N0=p=>p===void 0?0:p;function Be(p,q){const a0=[...x,p],_0=Object.hasOwn((r==null?void 0:r.children)||{},p),V0=((q==null?void 0:q.weight)||0)/y,Le=((q==null?void 0:q.weight)||0)/X,x0=he(q==null?void 0:q.totalOffsetOnLevel,g,O,y,L)+I,$0=$+O*V0,k0={parent:_*Le,child:$0-2*Q},j0={start:[p0+Q+he(q==null?void 0:q.totalOffsetAmongSiblings,b,_,X,0),S],end:[x0+Q,h]},ze={start:[j0.end[0]+k0.child,h],end:[j0.start[0]+k0.parent,S]},ee=a+(_0?u:0),Ve=`${U0(j0)} v ${ee} h ${k0.child}`,je=`v ${-ee} ${U0(ze)} v ${-o} h ${-k0.parent}`,qe=Ve+je+` v ${o}`,q0=h0+((q==null?void 0:q.totalOffsetAmongSiblings.rank)||0)*w,te=q0+w,ie=(te+q0)/2,He=R(q==null?void 0:q.weight,p);return{cachedProps:{width:$0,xOffset:x0,pathInCompleteTree:a0,levelColorScaleMax:te,levelColorScaleMin:q0},linkPath:qe,isSelected:_0,colorRate:ie,specMetric:He,name:ke(p,D,U,l)||"",width:k0.child,colorStr:t1(ie),strId:a0.join("-")}}function Pe(p,q,a0){return Object.entries((p==null?void 0:p.children)||{}).map(([_0,V0])=>({id:_0,parsedChild:Be(_0,V0)}))}function Ae(p){Ge.call(this,e,p)}return e.$$set=p=>{"qcSpec"in p&&t(0,U=p.qcSpec),"attributeLabels"in p&&t(1,D=p.attributeLabels),"visibleTreeInfo"in p&&t(2,z=p.visibleTreeInfo),"selectedTreeInfo"in p&&t(3,Y=p.selectedTreeInfo),"levelVisuals"in p&&t(4,J=p.levelVisuals),"levelMetrics"in p&&t(5,W=p.levelMetrics),"rootMeta"in p&&t(6,B=p.rootMeta),"pathInCompleteTree"in p&&t(18,x=p.pathInCompleteTree),"rootWidth"in p&&t(19,m=p.rootWidth),"treeWidth"in p&&t(7,d=p.treeWidth),"childRate"in p&&t(8,M=p.childRate),"overHangRate"in p&&t(9,j=p.overHangRate),"preStraightRate"in p&&t(10,k=p.preStraightRate),"treeXOffset"in p&&t(11,I=p.treeXOffset),"childrenMargin"in p&&t(20,L=p.childrenMargin),"minimumChildWidth"in p&&t(21,$=p.minimumChildWidth),"linkEdgePadding"in p&&t(12,Q=p.linkEdgePadding),"linkBetweenPadRate"in p&&t(22,s0=p.linkBetweenPadRate),"width"in p&&t(23,r0=p.width),"xOffset"in p&&t(24,p0=p.xOffset),"levelColorScaleMin"in p&&t(25,h0=p.levelColorScaleMin),"levelColorScaleMax"in p&&t(26,z0=p.levelColorScaleMax)},e.$$.update=()=>{var p,q,a0;e.$$.dirty[0]&262144&&t(30,l=x.length),e.$$.dirty[0]&262148&&t(29,n=b0(x,z.tree)),e.$$.dirty[0]&262152&&(r=b0(x,Y.tree)),e.$$.dirty[0]&1073741840&&t(28,s=J[l]),e.$$.dirty[0]&268437248&&t(35,[f,a,o,u]=[s==null?void 0:s.topOffset,...[M,k,j].map(_0=>(s==null?void 0:s.totalSize)*_0)].map(N0),f,(t(13,a),t(28,s),t(8,M),t(10,k),t(9,j),t(4,J),t(30,l),t(18,x)),(t(31,o),t(28,s),t(8,M),t(10,k),t(9,j),t(4,J),t(30,l),t(18,x))),e.$$.dirty[0]&268436736|e.$$.dirty[1]&16&&t(14,h=f+N0((s==null?void 0:s.totalSize)*(1-M-k))),e.$$.dirty[0]&24576&&t(16,E=h+a),e.$$.dirty[1]&17&&(S=f+o),e.$$.dirty[0]&1610612833&&t(27,R=k1((p=W[l])==null?void 0:p.selectedMetric,U,l,n,B)),e.$$.dirty[0]&536870912&&t(34,C=Object.keys((n==null?void 0:n.children)||{}).length),e.$$.dirty[0]&100663296|e.$$.dirty[1]&8&&(w=(z0-h0)/(C||1)),e.$$.dirty[0]&12587008|e.$$.dirty[1]&8&&(_=(r0-2*Q)*(C>1?1-s0:1)),e.$$.dirty[0]&12587008|e.$$.dirty[1]&8&&(b=(r0-2*Q)*s0/(C>1?C-1:1)),e.$$.dirty[0]&1073741824&&t(33,T=l+1),e.$$.dirty[0]&3145728&&t(32,g=$+2*L),e.$$.dirty[0]&132|e.$$.dirty[1]&6&&(O=d-g*((q=z.meta[T])==null?void 0:q.totalNodes)),e.$$.dirty[0]&4|e.$$.dirty[1]&4&&(y=(a0=z.meta[T])==null?void 0:a0.totalWeight),e.$$.dirty[0]&536870912&&(X=(n==null?void 0:n.childrenSumWeight)||1),e.$$.dirty[0]&939524096&&t(15,N=Pe(n))},[U,D,z,Y,J,W,B,d,M,j,k,I,Q,a,h,N,E,We,x,m,L,$,s0,r0,p0,h0,z0,R,s,n,l,o,g,T,C,f,Ae]}class Ce extends A0{constructor(i){super(),L0(this,i,W1,T1,P0,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectedTreeInfo:3,levelVisuals:4,levelMetrics:5,rootMeta:6,pathInCompleteTree:18,rootWidth:19,treeWidth:7,childRate:8,overHangRate:9,preStraightRate:10,treeXOffset:11,childrenMargin:20,minimumChildWidth:21,linkEdgePadding:12,linkBetweenPadRate:22,width:23,xOffset:24,levelColorScaleMin:25,levelColorScaleMax:26},null,[-1,-1])}}function _e(e){var b,T;let i,t,l,n,r,s,f,a,o,u,h,E,S,R,C;u=new Q0({props:{text:((b=e[0])==null?void 0:b.name)||"",width:e[2]*.9,height:T0*.3,anchor:"middle"}});let w=((T=e[0].path)==null?void 0:T.length)&&ge(e),_=e[0].metricName&&de(e);return{c(){i=H("filter"),t=H("feGaussianBlur"),n=i0(),r=H("rect"),a=i0(),o=H("g"),o0(u.$$.fragment),E=i0(),w&&w.c(),S=i0(),_&&_.c(),R=n0(),this.h()},l(g){i=F(g,"filter",{id:!0});var O=A(i);t=F(O,"feGaussianBlur",{in:!0,stdDeviation:!0}),A(t).forEach(v),O.forEach(v),n=l0(g),r=F(g,"rect",{x:!0,y:!0,height:!0,width:!0,rx:!0,opacity:!0,filter:!0,class:!0}),A(r).forEach(v),a=l0(g),o=F(g,"g",{transform:!0});var y=A(o);f0(u.$$.fragment,y),y.forEach(v),E=l0(g),w&&w.l(g),S=l0(g),_&&_.l(g),R=n0(),this.h()},h(){c(t,"in","SourceGraphic"),c(t,"stdDeviation",l=e[1]*.008),c(i,"id","blurry"),c(r,"x",s=e[1]*.1),c(r,"y",F0),c(r,"height",T0),c(r,"width",e[2]),c(r,"rx",.3),c(r,"opacity",.95),c(r,"filter","url(#blurry)"),c(r,"class","svelte-12uigco"),c(o,"transform",h="translate("+e[1]*.5+", "+(F0+T0*.25)+")")},m(g,O){V(g,i,O),P(i,t),V(g,n,O),V(g,r,O),V(g,a,O),V(g,o,O),c0(u,o,null),V(g,E,O),w&&w.m(g,O),V(g,S,O),_&&_.m(g,O),V(g,R,O),C=!0},p(g,O){var X,N;(!C||O&2&&l!==(l=g[1]*.008))&&c(t,"stdDeviation",l),(!C||O&2&&s!==(s=g[1]*.1))&&c(r,"x",s),(!C||O&4)&&c(r,"width",g[2]);const y={};O&1&&(y.text=((X=g[0])==null?void 0:X.name)||""),O&4&&(y.width=g[2]*.9),u.$set(y),(!C||O&2&&h!==(h="translate("+g[1]*.5+", "+(F0+T0*.25)+")"))&&c(o,"transform",h),(N=g[0].path)!=null&&N.length?w?w.p(g,O):(w=ge(g),w.c(),w.m(S.parentNode,S)):w&&(w.d(1),w=null),g[0].metricName?_?_.p(g,O):(_=de(g),_.c(),_.m(R.parentNode,R)):_&&(_.d(1),_=null)},i(g){C||(g&&E0(()=>{C&&(f||(f=S0(r,y0,{duration:200},!0)),f.run(1))}),G(u.$$.fragment,g),C=!0)},o(g){g&&(f||(f=S0(r,y0,{duration:200},!1)),f.run(0)),Z(u.$$.fragment,g),C=!1},d(g){g&&(v(i),v(n),v(r),v(a),v(o),v(E),v(S),v(R)),g&&f&&f.end(),u0(u),w&&w.d(g),_&&_.d(g)}}}function ge(e){let i,t=se(e[3])+"",l,n,r,s=e[3]>1&&me();return{c(){i=H("text"),l=m0(t),n=m0(" citation"),s&&s.c(),this.h()},l(f){i=F(f,"text",{class:!0,x:!0,y:!0});var a=A(i);l=d0(a,t),n=d0(a," citation"),s&&s.l(a),a.forEach(v),this.h()},h(){c(i,"class","hover-inner svelte-12uigco"),c(i,"x",r=e[1]*.2),c(i,"y",7.5)},m(f,a){V(f,i,a),P(i,l),P(i,n),s&&s.m(i,null)},p(f,a){a&8&&t!==(t=se(f[3])+"")&&W0(l,t),f[3]>1?s||(s=me(),s.c(),s.m(i,null)):s&&(s.d(1),s=null),a&2&&r!==(r=f[1]*.2)&&c(i,"x",r)},d(f){f&&v(i),s&&s.d()}}}function me(e){let i;return{c(){i=m0("s")},l(t){i=d0(t,"s")},m(t,l){V(t,i,l)},d(t){t&&v(i)}}}function de(e){var o;let i,t,l=e[0].metricName+"",n,r,s=((o=e[0].metricValue)==null?void 0:o.toFixed(2))+"",f,a;return{c(){i=H("g"),t=H("text"),n=m0(l),r=H("text"),f=m0(s),this.h()},l(u){i=F(u,"g",{transform:!0});var h=A(i);t=F(h,"text",{class:!0});var E=A(t);n=d0(E,l),E.forEach(v),r=F(h,"text",{class:!0,y:!0});var S=A(r);f=d0(S,s),S.forEach(v),h.forEach(v),this.h()},h(){c(t,"class","hover-inner metric-value svelte-12uigco"),c(r,"class","hover-inner metric-value svelte-12uigco"),c(r,"y",.85),c(i,"transform",a="translate("+e[1]*.5+", "+6.65+")")},m(u,h){V(u,i,h),P(i,t),P(t,n),P(i,r),P(r,f)},p(u,h){var E;h&1&&l!==(l=u[0].metricName+"")&&W0(n,l),h&1&&s!==(s=((E=u[0].metricValue)==null?void 0:E.toFixed(2))+"")&&W0(f,s),h&2&&a!==(a="translate("+u[1]*.5+", "+6.65+")")&&c(i,"transform",a)},d(u){u&&v(i)}}}function B1(e){let i,t,l=e[0]!=null&&_e(e);return{c(){l&&l.c(),i=n0()},l(n){l&&l.l(n),i=n0()},m(n,r){l&&l.m(n,r),V(n,i,r),t=!0},p(n,[r]){n[0]!=null?l?(l.p(n,r),r&1&&G(l,1)):(l=_e(n),l.c(),G(l,1),l.m(i.parentNode,i)):l&&(C0(),Z(l,1,1,()=>{l=null}),I0())},i(n){t||(G(l),t=!0)},o(n){Z(l),t=!1},d(n){n&&v(i),l&&l.d(n)}}}let T0=5,F0=3;function P1(e,i,t){let l,n,{hInfo:r}=i,{sideBarWidth:s}=i;return e.$$set=f=>{"hInfo"in f&&t(0,r=f.hInfo),"sideBarWidth"in f&&t(1,s=f.sideBarWidth)},e.$$.update=()=>{e.$$.dirty&1&&t(3,l=(r==null?void 0:r.weight)||0),e.$$.dirty&2&&t(2,n=s*.8)},[r,s,n,l]}class A1 extends A0{constructor(i){super(),L0(this,i,P1,B1,P0,{hInfo:0,sideBarWidth:1})}}function pe(e,i,t){const l=e.slice();return l[19]=i[t],l}function be(e){var R,C,w;let i,t,l,n,r,s,f,a,o,u,h,E;n=new Q0({props:{text:((C=(R=e[5])==null?void 0:R.bifurcations[e[2]])==null?void 0:C.description)||"",width:e[3],height:e[8]*.22}});let S=((w=e[13].available_metrics)==null?void 0:w.length)&&ve(e);return{c(){i=H("g"),t=H("rect"),l=H("g"),o0(n.$$.fragment),S&&S.c(),r=H("g"),s=H("foreignObject"),f=e0("input"),this.h()},l(_){i=F(_,"g",{style:!0,class:!0});var b=A(i);t=F(b,"rect",{fill:!0,"fill-opacity":!0,height:!0,width:!0,class:!0}),A(t).forEach(v),l=F(b,"g",{style:!0,class:!0});var T=A(l);f0(n.$$.fragment,T),T.forEach(v),S&&S.l(b),r=F(b,"g",{style:!0,class:!0});var g=A(r);s=F(g,"foreignObject",{width:!0,height:!0,transform:!0});var O=A(s);f=t0(O,"INPUT",{type:!0,min:!0,max:!0,class:!0}),O.forEach(v),g.forEach(v),b.forEach(v),this.h()},h(){c(t,"fill","grey"),c(t,"fill-opacity","0.3"),c(t,"height",e[8]),c(t,"width",e[4]),c(t,"class","svelte-1wyfc2b"),K(l,"--y-off",e[8]*.25+"px"),K(l,"--x-off",e[11]+"px"),c(l,"class","svelte-1wyfc2b"),c(f,"type","number"),c(f,"min","1"),c(f,"max",e[7]),c(f,"class","svelte-1wyfc2b"),c(s,"width","60"),c(s,"height","35"),c(s,"transform",a="scale("+e[10]+","+e[10]+")"),K(r,"--y-off",e[8]*.72+"px"),K(r,"--x-off",e[11]+"px"),c(r,"class","svelte-1wyfc2b"),K(i,"--y-off",e[12]+"px"),K(i,"--x-off","0px"),c(i,"class","svelte-1wyfc2b")},m(_,b){V(_,i,b),P(i,t),P(i,l),c0(n,l,null),S&&S.m(i,null),P(i,r),P(r,s),P(s,f),B0(f,e[0][e[2]].top_n),u=!0,h||(E=M0(f,"input",e[18]),h=!0)},p(_,b){var g,O,y;(!u||b&256)&&c(t,"height",_[8]),(!u||b&16)&&c(t,"width",_[4]);const T={};b&36&&(T.text=((O=(g=_[5])==null?void 0:g.bifurcations[_[2]])==null?void 0:O.description)||""),b&8&&(T.width=_[3]),b&256&&(T.height=_[8]*.22),n.$set(T),(!u||b&256)&&K(l,"--y-off",_[8]*.25+"px"),(!u||b&2048)&&K(l,"--x-off",_[11]+"px"),(y=_[13].available_metrics)!=null&&y.length?S?S.p(_,b):(S=ve(_),S.c(),S.m(i,r)):S&&(S.d(1),S=null),(!u||b&128)&&c(f,"max",_[7]),b&5&&ye(f.value)!==_[0][_[2]].top_n&&B0(f,_[0][_[2]].top_n),(!u||b&1024&&a!==(a="scale("+_[10]+","+_[10]+")"))&&c(s,"transform",a),(!u||b&256)&&K(r,"--y-off",_[8]*.72+"px"),(!u||b&2048)&&K(r,"--x-off",_[11]+"px"),(!u||b&4096)&&K(i,"--y-off",_[12]+"px")},i(_){u||(G(n.$$.fragment,_),_&&E0(()=>{u&&(o||(o=S0(i,y0,{duration:1e3},!0)),o.run(1))}),u=!0)},o(_){Z(n.$$.fragment,_),_&&(o||(o=S0(i,y0,{duration:1e3},!1)),o.run(0)),u=!1},d(_){_&&v(i),u0(n),S&&S.d(),_&&o&&o.end(),h=!1,E()}}}function ve(e){let i,t,l,n,r,s,f=w0(e[6]),a=[];for(let o=0;o<f.length;o+=1)a[o]=Me(pe(e,f,o));return{c(){i=H("g"),t=H("foreignObject"),l=e0("select");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){i=F(o,"g",{style:!0,class:!0});var u=A(i);t=F(u,"foreignObject",{width:!0,height:!0,transform:!0});var h=A(t);l=t0(h,"SELECT",{class:!0});var E=A(l);for(let S=0;S<a.length;S+=1)a[S].l(E);E.forEach(v),h.forEach(v),u.forEach(v),this.h()},h(){c(l,"class","svelte-1wyfc2b"),e[1]===void 0&&E0(()=>e[17].call(l)),c(t,"width","500"),c(t,"height","200"),c(t,"transform",n="scale("+e[9]+","+e[9]+")"),K(i,"--y-off",e[8]*.4+"px"),K(i,"--x-off",e[11]+"px"),c(i,"class","svelte-1wyfc2b")},m(o,u){V(o,i,u),P(i,t),P(t,l);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(l,null);le(l,e[1],!0),r||(s=M0(l,"change",e[17]),r=!0)},p(o,u){if(u&64){f=w0(o[6]);let h;for(h=0;h<f.length;h+=1){const E=pe(o,f,h);a[h]?a[h].p(E,u):(a[h]=Me(E),a[h].c(),a[h].m(l,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=f.length}u&66&&le(l,o[1]),u&512&&n!==(n="scale("+o[9]+","+o[9]+")")&&c(t,"transform",n),u&256&&K(i,"--y-off",o[8]*.4+"px"),u&2048&&K(i,"--x-off",o[11]+"px")},d(o){o&&v(i),J0(a,o),r=!1,s()}}}function Me(e){let i,t=e[19]+"",l,n;return{c(){i=e0("option"),l=m0(t),this.h()},l(r){i=t0(r,"OPTION",{});var s=A(i);l=d0(s,t),s.forEach(v),this.h()},h(){i.__value=n=e[19],B0(i,i.__value)},m(r,s){V(r,i,s),P(i,l)},p(r,s){s&64&&t!==(t=r[19]+"")&&W0(l,t),s&64&&n!==(n=r[19])&&(i.__value=n,B0(i,i.__value))},d(r){r&&v(i)}}}function L1(e){let i,t,l=e[13]!=null&&be(e);return{c(){l&&l.c(),i=n0()},l(n){l&&l.l(n),i=n0()},m(n,r){l&&l.m(n,r),V(n,i,r),t=!0},p(n,[r]){n[13]!=null?l?(l.p(n,r),r&8192&&G(l,1)):(l=be(n),l.c(),G(l,1),l.m(i.parentNode,i)):l&&(C0(),Z(l,1,1,()=>{l=null}),I0())},i(n){t||(G(l),t=!0)},o(n){Z(l),t=!1},d(n){n&&v(i),l&&l.d(n)}}}function z1(e,i,t){let l,n,r,s,f,a,{lVis:o}=i,{index:u}=i,{childRate:h}=i,{overHangRate:E}=i,{sideBarWidth:S}=i,{svgWidth:R}=i,{currentQcSpec:C}=i,{filterSpecs:w}=i,{metricOptions:_=["RCA A","Another longer named thing"]}=i,{selectedMetric:b}=i,{maxOnOneLevel:T=15}=i;function g(){b=Ke(this),t(1,b),t(6,_)}function O(){w[u].top_n=ye(this.value),t(0,w)}return e.$$set=y=>{"lVis"in y&&t(14,o=y.lVis),"index"in y&&t(2,u=y.index),"childRate"in y&&t(15,h=y.childRate),"overHangRate"in y&&t(16,E=y.overHangRate),"sideBarWidth"in y&&t(3,S=y.sideBarWidth),"svgWidth"in y&&t(4,R=y.svgWidth),"currentQcSpec"in y&&t(5,C=y.currentQcSpec),"filterSpecs"in y&&t(0,w=y.filterSpecs),"metricOptions"in y&&t(6,_=y.metricOptions),"selectedMetric"in y&&t(1,b=y.selectedMetric),"maxOnOneLevel"in y&&t(7,T=y.maxOnOneLevel)},e.$$.update=()=>{e.$$.dirty&36&&t(13,l=C==null?void 0:C.bifurcations[u]),e.$$.dirty&114688&&t(12,n=o.topOffset+o.totalSize-o.totalSize*(h+E)),e.$$.dirty&49152&&t(8,r=o.totalSize*h),e.$$.dirty&8&&t(11,s=S*.02),e.$$.dirty&256&&t(10,f=r*.22/28),e.$$.dirty&328&&t(9,a=Math.min(r*.22/28,S/(18*.65*_.reduce((y,X)=>y>X.length?y:X.length,0))))},[w,b,u,S,R,C,_,T,r,a,f,s,n,l,o,h,E,g,O]}class V1 extends A0{constructor(i){super(),L0(this,i,z1,L1,P0,{lVis:14,index:2,childRate:15,overHangRate:16,sideBarWidth:3,svgWidth:4,currentQcSpec:5,filterSpecs:0,metricOptions:6,selectedMetric:1,maxOnOneLevel:7})}}function Se(e,i,t){const l=e.slice();return l[35]=i[t],l[36]=i,l[37]=t,l}function we(e){let i,t,l,n;function r(a){e[24](a)}function s(a){e[25](a,e[37])}let f={lVis:e[35],index:e[37],childRate:Ie,overHangRate:Re,sideBarWidth:O0,svgWidth:v0,currentQcSpec:e[11],metricOptions:e[9][e[37]].possibleMetrics};return e[3]!==void 0&&(f.filterSpecs=e[3]),e[9][e[37]].selectedMetric!==void 0&&(f.selectedMetric=e[9][e[37]].selectedMetric),i=new V1({props:f}),D0.push(()=>X0(i,"filterSpecs",r)),D0.push(()=>X0(i,"selectedMetric",s)),{c(){o0(i.$$.fragment)},l(a){f0(i.$$.fragment,a)},m(a,o){c0(i,a,o),n=!0},p(a,o){e=a;const u={};o[0]&4096&&(u.lVis=e[35]),o[0]&2048&&(u.currentQcSpec=e[11]),o[0]&512&&(u.metricOptions=e[9][e[37]].possibleMetrics),!t&&o[0]&8&&(t=!0,u.filterSpecs=e[3],G0(()=>t=!1)),!l&&o[0]&512&&(l=!0,u.selectedMetric=e[9][e[37]].selectedMetric,G0(()=>l=!1)),i.$set(u)},i(a){n||(G(i.$$.fragment,a),n=!0)},o(a){Z(i.$$.fragment,a),n=!1},d(a){u0(i,a)}}}function j1(e){let i,t,l,n,r='<b style="color: magenta;">TODO:</b>',s,f,a="control-panel here",o,u,h,E,S,R,C,w,_,b,T,g,O,y,X,N,U,D,z;E0(e[22]);function Y(m){e[23](m)}let J={items:e[6],labelFieldName:"name",valueFieldName:"id",hideArrow:!0,className:"inst-search"};e[2]!==void 0&&(J.selectedItem=e[2]),h=new Ne({props:J}),D0.push(()=>X0(h,"selectedItem",Y)),w=new A1({props:{hInfo:e[10],sideBarWidth:O0}});let W=w0(e[12]||[]),B=[];for(let m=0;m<W.length;m+=1)B[m]=we(Se(e,W,m));const x=m=>Z(B[m],1,1,()=>{B[m]=null});return b=new Ce({props:{qcSpec:e[11],attributeLabels:e[7],visibleTreeInfo:e[5],selectedTreeInfo:e[13],levelVisuals:e[12],levelMetrics:e[9],rootMeta:e[8],treeWidth:e[14],treeXOffset:e[15],childRate:Ie,overHangRate:Re}}),b.$on("tree-interaction",e[16]),{c(){i=e0("div"),t=e0("div"),l=e0("div"),n=e0("span"),n.innerHTML=r,s=i0(),f=e0("span"),f.textContent=a,o=i0(),u=e0("div"),o0(h.$$.fragment),S=i0(),R=e0("div"),C=H("svg"),o0(w.$$.fragment);for(let m=0;m<B.length;m+=1)B[m].c();_=n0(),o0(b.$$.fragment),g=i0(),O=e0("div"),y=e0("p"),X=e0("b"),N=m0(ae),this.h()},l(m){i=t0(m,"DIV",{class:!0});var d=A(i);t=t0(d,"DIV",{class:!0});var M=A(t);l=t0(M,"DIV",{class:!0,style:!0});var j=A(l);n=t0(j,"SPAN",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-1mkxjb0"&&(n.innerHTML=r),s=l0(j),f=t0(j,"SPAN",{class:!0,"data-svelte-h":!0}),ne(f)!=="svelte-rfes8a"&&(f.textContent=a),j.forEach(v),o=l0(M),u=t0(M,"DIV",{class:!0,style:!0});var k=A(u);f0(h.$$.fragment,k),k.forEach(v),M.forEach(v),S=l0(d),R=t0(d,"DIV",{class:!0});var I=A(R);C=F(I,"svg",{viewBox:!0,xmlns:!0,class:!0});var L=A(C);f0(w.$$.fragment,L);for(let r0=0;r0<B.length;r0+=1)B[r0].l(L);_=n0(),f0(b.$$.fragment,L),L.forEach(v),I.forEach(v),g=l0(d),O=t0(d,"DIV",{class:!0});var $=A(O);y=t0($,"P",{style:!0});var Q=A(y);X=t0(Q,"B",{});var s0=A(X);N=d0(s0,ae),s0.forEach(v),Q.forEach(v),$.forEach(v),d.forEach(v),this.h()},h(){c(n,"class","svelte-hxt9bt"),c(f,"class","svelte-hxt9bt"),c(l,"class","filt-side svelte-hxt9bt"),K(l,"--sb-size",100*O0/v0+"%"),c(u,"class","main-side svelte-hxt9bt"),K(u,"--tree-size",100*e[14]/v0+"%"),c(t,"class","treehead svelte-hxt9bt"),c(C,"viewBox",T="0 0 "+v0+" "+e[4]),c(C,"xmlns","http://www.w3.org/2000/svg"),c(C,"class","svelte-hxt9bt"),c(R,"class","treecontent svelte-hxt9bt"),K(y,"text-align","center"),c(O,"class","treefoot svelte-hxt9bt"),c(i,"class","treefix svelte-hxt9bt")},m(m,d){V(m,i,d),P(i,t),P(t,l),P(l,n),P(l,s),P(l,f),P(t,o),P(t,u),c0(h,u,null),P(i,S),P(i,R),P(R,C),c0(w,C,null);for(let M=0;M<B.length;M+=1)B[M]&&B[M].m(C,null);P(C,_),c0(b,C,null),P(i,g),P(i,O),P(O,y),P(y,X),P(X,N),U=!0,D||(z=M0(window,"resize",e[22]),D=!0)},p(m,d){const M={};d[0]&64&&(M.items=m[6]),!E&&d[0]&4&&(E=!0,M.selectedItem=m[2],G0(()=>E=!1)),h.$set(M);const j={};if(d[0]&1024&&(j.hInfo=m[10]),w.$set(j),d[0]&6664){W=w0(m[12]||[]);let I;for(I=0;I<W.length;I+=1){const L=Se(m,W,I);B[I]?(B[I].p(L,d),G(B[I],1)):(B[I]=we(L),B[I].c(),G(B[I],1),B[I].m(C,_))}for(C0(),I=W.length;I<B.length;I+=1)x(I);I0()}const k={};d[0]&2048&&(k.qcSpec=m[11]),d[0]&128&&(k.attributeLabels=m[7]),d[0]&32&&(k.visibleTreeInfo=m[5]),d[0]&8192&&(k.selectedTreeInfo=m[13]),d[0]&4096&&(k.levelVisuals=m[12]),d[0]&512&&(k.levelMetrics=m[9]),d[0]&256&&(k.rootMeta=m[8]),b.$set(k),(!U||d[0]&16&&T!==(T="0 0 "+v0+" "+m[4]))&&c(C,"viewBox",T)},i(m){if(!U){G(h.$$.fragment,m),G(w.$$.fragment,m);for(let d=0;d<W.length;d+=1)G(B[d]);G(b.$$.fragment,m),U=!0}},o(m){Z(h.$$.fragment,m),Z(w.$$.fragment,m),B=B.filter(Boolean);for(let d=0;d<B.length;d+=1)Z(B[d]);Z(b.$$.fragment,m),U=!1},d(m){m&&v(i),u0(h),u0(w),J0(B,m),u0(b),D=!1,z()}}}let v0=100,O0=17,Ie=.3,Re=.05;const q1=15;function H1(e,i){const t=[],l=Math.max((((e==null?void 0:e.meta)||[]).length||0)-1,1);let n=0;const r=i/l;for(let s=0;s<l;s++)t.push({totalSize:r,topOffset:n}),n+=r;return t}function F1(e,i){let t=new RegExp("\\{pc_id\\}","gi");return e.replace(t,i)}function D1(e,i,t){let l,n,r,s,f,a,o;Ye(e,Qe,k=>t(27,o=k));let u,h,E=v0-O0,S=O0,R={},C=[],w,_,b,T={};const g=k=>({id:k[0],name:k[1].title});Je(()=>{R0("root-descriptions",k=>{t(6,_=k[o.params.rootType]),t(2,b=_.filter(I=>I.id==o.params.rootId)[0])}),R0("attribute-statics",k=>{t(7,T=k)}),R0("qc-specs",k=>{t(17,R=Object.fromEntries(Object.entries(k).filter(([I,L])=>L.root_entity_type==o.params.rootType))),C=Object.entries(R).map(g),t(18,w=C[0])})});function O(k,I){[k,I].includes(void 0)||($e(`${e1}/view/${o.params.rootType}/${I}`),R0(`qc-builds/${k}/${I}`,L=>{U(),t(19,[J,z,Y,D]=[{name:"Selected!",...L},z,Y,y()],J,t(3,z),t(9,Y),t(8,D))}))}function y(){try{return JSON.parse(T[n.root_entity_type][(b==null?void 0:b.id)||""].meta)}catch{return{}}}function X(k){return(I,L,$)=>b0(L,k)===void 0?{}:I}function N(k){return(I,L,$)=>Object.fromEntries(Object.entries(I).filter(([Q,s0])=>b0([...L,Q],k)!=null))}function U(){const k=b==null?void 0:b.id;for(let L of[z,Y])for(;L.length>0;)L.pop();if(![n,k].includes(void 0))for(var I of n.bifurcations){z.push(JSON.parse(F1(I.filter_format_str,k)));const L=I.available_metrics||[];Y.push({possibleMetrics:L,selectedMetric:L[0]||""})}}let D={},z=[{include:[],exclude:[],top_n:q1}],Y=[{possibleMetrics:[""],selectedMetric:""}],J={name:"Root",weight:10},W={children:{}},B;function x(k){var r0,p0;const I=k.detail.path,L=I[I.length-1],$=k.detail.action;if($=="highlight"){const h0=b0(I,r.tree);if(h0===void 0)return;t(10,B={name:ke(L,T,n,I.length-1),path:I,weight:h0.weight,metricName:(r0=Y[I.length-1])==null?void 0:r0.selectedMetric,metricValue:k.detail.metricValue});return}else if($=="de-highlight")return;let Q=b0(I.slice(0,I.length-1),W);if(Q===void 0)return;Object.keys(Q.children).includes(L)?delete Q.children[L]:Q.children[L]={children:((p0=Q.children[L])==null?void 0:p0.children)||{}},t(20,W)}function m(){t(1,h=window.innerWidth),t(0,u=window.innerHeight)}function d(k){b=k,t(2,b)}function M(k){z=k,t(3,z)}function j(k,I){e.$$.not_equal(Y[I].selectedMetric,k)&&(Y[I].selectedMetric=k,t(9,Y))}return e.$$.update=()=>{e.$$.dirty[0]&3&&t(4,l=u*.8/h*100),e.$$.dirty[0]&393216&&t(11,n=R[(w==null?void 0:w.id)||""]),e.$$.dirty[0]&262148&&O(w==null?void 0:w.id,b==null?void 0:b.id),e.$$.dirty[0]&524296&&t(21,r=xe(J,z)),e.$$.dirty[0]&3145728&&t(5,s=re(r.tree,X(W))),e.$$.dirty[0]&1048608&&t(13,f=re(s.tree,N(W))),e.$$.dirty[0]&48&&t(12,a=H1(s,l))},[u,h,b,z,l,s,_,T,D,Y,B,n,a,f,E,S,x,R,w,J,W,r,m,d,M,j]}class N1 extends A0{constructor(i){super(),L0(this,i,D1,j1,P0,{},null,[-1,-1])}}export{N1 as component};

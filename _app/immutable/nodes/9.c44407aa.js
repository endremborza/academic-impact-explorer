import{s as Ye,e as ye,i as le,d as S,I as Et,E as Y,a as se,F as J,h as B,c as oe,j as r,k as re,y as I,G as me,J as Ve,H as Ge,K as It,L as Vt,M as qt,f as x,l as Le,g as $,m as Te,N as qe,n as Ht,O as yt,D as He,p as Ce,B as $e,P as Pe,Q as Ot,A as Dt,o as At,z as Gt}from"../chunks/scheduler.a7e79a28.js";import{S as Je,i as Ze,g as ve,c as we,a as A,t as N,b as ue,d as he,m as ce,f as Oe,e as _e,h as Be}from"../chunks/index.ef959f59.js";import{e as pe,u as Ft,o as Xt}from"../chunks/each.fd848201.js";import{p as Ut}from"../chunks/stores.854a7a0a.js";import{a as Yt,b as Jt,S as De,g as Zt}from"../chunks/SimpleAutocomplete.20fefd57.js";import{b as Ae}from"../chunks/paths.82637032.js";import{g as We,h as et,m as Kt,d as Nt,a as Qt,t as tt,D as it,b as xt}from"../chunks/tree-loading.aad54248.js";import{f as Me}from"../chunks/index.31d7d9a7.js";import{B as Ke,a as Mt,g as lt}from"../chunks/BrokenFittedText.91bc49b3.js";import{P as Lt}from"../chunks/PathLevelInfoBox.d6bcd07d.js";import{A as nt}from"../chunks/constants.30a985e8.js";function rt(t){return function(){return t}}const Xe=Math.PI,Ue=2*Xe,Se=1e-6,$t=Ue-Se;function Tt(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function ei(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Tt;const i=10**e;return function(l){this._+=l[0];for(let o=1,s=l.length;o<s;++o)this._+=Math.round(arguments[o]*i)/i+l[o]}}class ti{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Tt:ei(e)}moveTo(e,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,i){this._append`L${this._x1=+e},${this._y1=+i}`}quadraticCurveTo(e,i,l,o){this._append`Q${+e},${+i},${this._x1=+l},${this._y1=+o}`}bezierCurveTo(e,i,l,o,s,f){this._append`C${+e},${+i},${+l},${+o},${this._x1=+s},${this._y1=+f}`}arcTo(e,i,l,o,s){if(e=+e,i=+i,l=+l,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let f=this._x1,h=this._y1,a=l-e,u=o-i,_=f-e,b=h-i,d=_*_+b*b;if(this._x1===null)this._append`M${this._x1=e},${this._y1=i}`;else if(d>Se)if(!(Math.abs(b*a-u*_)>Se)||!s)this._append`L${this._x1=e},${this._y1=i}`;else{let y=l-f,O=o-h,k=a*a+u*u,V=y*y+O*O,g=Math.sqrt(k),E=Math.sqrt(d),R=s*Math.tan((Xe-Math.acos((k+d-V)/(2*g*E)))/2),P=R/E,W=R/g;Math.abs(P-1)>Se&&this._append`L${e+P*_},${i+P*b}`,this._append`A${s},${s},0,0,${+(b*y>_*O)},${this._x1=e+W*a},${this._y1=i+W*u}`}}arc(e,i,l,o,s,f){if(e=+e,i=+i,l=+l,f=!!f,l<0)throw new Error(`negative radius: ${l}`);let h=l*Math.cos(o),a=l*Math.sin(o),u=e+h,_=i+a,b=1^f,d=f?o-s:s-o;this._x1===null?this._append`M${u},${_}`:(Math.abs(this._x1-u)>Se||Math.abs(this._y1-_)>Se)&&this._append`L${u},${_}`,l&&(d<0&&(d=d%Ue+Ue),d>$t?this._append`A${l},${l},0,1,${b},${e-h},${i-a}A${l},${l},0,1,${b},${this._x1=u},${this._y1=_}`:d>Se&&this._append`A${l},${l},0,${+(d>=Xe)},${b},${this._x1=e+l*Math.cos(s)},${this._y1=i+l*Math.sin(s)}`)}rect(e,i,l,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${l=+l}v${+o}h${-l}Z`}toString(){return this._}}function ii(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(i==null)e=null;else{const l=Math.floor(i);if(!(l>=0))throw new RangeError(`invalid digits: ${i}`);e=l}return t},()=>new ti(e)}var li=Array.prototype.slice;function ni(t){return t[0]}function ri(t){return t[1]}class si{constructor(e,i){this._context=e,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,i){switch(e=+e,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,i,e,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,e,this._y0,e,i);break}}this._x0=e,this._y0=i}}function oi(t){return new si(t,!1)}function ai(t){return t.source}function fi(t){return t.target}function ui(t){let e=ai,i=fi,l=ni,o=ri,s=null,f=null,h=ii(a);function a(){let u;const _=li.call(arguments),b=e.apply(this,_),d=i.apply(this,_);if(s==null&&(f=t(u=h())),f.lineStart(),_[0]=b,f.point(+l.apply(this,_),+o.apply(this,_)),_[0]=d,f.point(+l.apply(this,_),+o.apply(this,_)),f.lineEnd(),u)return f=null,u+""||null}return a.source=function(u){return arguments.length?(e=u,a):e},a.target=function(u){return arguments.length?(i=u,a):i},a.x=function(u){return arguments.length?(l=typeof u=="function"?u:rt(+u),a):l},a.y=function(u){return arguments.length?(o=typeof u=="function"?u:rt(+u),a):o},a.context=function(u){return arguments.length?(u==null?s=f=null:f=t(s=u),a):s},a}function hi(){return ui(oi)}function st(t,e,i){const l=t.slice();return l[45]=e[i].id,l[46]=e[i].cachedProps,l[47]=e[i].vizInfo,l[48]=e[i].childNode,l}function ot(t){let e,i;const l=[t[46],{qcSpec:t[0]},{attributeLabels:t[1]},{visibleTreeInfo:t[2]},{selectionState:t[3]},{levelVisuals:t[4]},{rootMeta:t[5]},{treeWidth:t[6]},{treeXOffset:t[10]},{childRate:t[7]},{overHangRate:t[8]},{preStraightRate:t[9]}];let o={};for(let s=0;s<l.length;s+=1)o=qt(o,l[s]);return e=new Rt({props:o}),e.$on("tree-interaction",t[32]),{c(){ue(e.$$.fragment)},l(s){he(e.$$.fragment,s)},m(s,f){ce(e,s,f),i=!0},p(s,f){const h=f[0]&18431?Yt(l,[f[0]&16384&&Jt(s[46]),f[0]&1&&{qcSpec:s[0]},f[0]&2&&{attributeLabels:s[1]},f[0]&4&&{visibleTreeInfo:s[2]},f[0]&8&&{selectionState:s[3]},f[0]&16&&{levelVisuals:s[4]},f[0]&32&&{rootMeta:s[5]},f[0]&64&&{treeWidth:s[6]},f[0]&1024&&{treeXOffset:s[10]},f[0]&128&&{childRate:s[7]},f[0]&256&&{overHangRate:s[8]},f[0]&512&&{preStraightRate:s[9]}]):{};e.$set(h)},i(s){i||(A(e.$$.fragment,s),i=!0)},o(s){N(e.$$.fragment,s),i=!1},d(s){_e(e,s)}}}function at(t,e){let i,l,o,s,f,h,a,u,_,b,d,y,O,k,V,g,E,R,P,W,L,z,M,Z,K,p,G,D,F,U,ee,w,T,v,q,j;G=new Ke({props:{text:e[48].name,width:e[47].width,height:e[12]}});let H=e[48].children&&ot(e);return{key:t,first:null,c(){i=Y("defs"),l=Y("linearGradient"),o=Y("stop"),h=Y("stop"),_=Y("stop"),O=se(),k=Y("path"),R=se(),P=Y("rect"),K=se(),p=Y("g"),ue(G.$$.fragment),D=se(),F=Y("rect"),w=se(),H&&H.c(),T=ye(),this.h()},l(n){i=J(n,"defs",{});var c=B(i);l=J(c,"linearGradient",{id:!0,gradientTransform:!0});var X=B(l);o=J(X,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),B(o).forEach(S),h=J(X,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),B(h).forEach(S),_=J(X,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),B(_).forEach(S),X.forEach(S),c.forEach(S),O=oe(n),k=J(n,"path",{d:!0,fill:!0,class:!0}),B(k).forEach(S),R=oe(n),P=J(n,"rect",{"fill-opacity":!0,x:!0,y:!0,height:!0,width:!0,class:!0}),B(P).forEach(S),K=oe(n),p=J(n,"g",{style:!0,class:!0});var ne=B(p);he(G.$$.fragment,ne),ne.forEach(S),D=oe(n),F=J(n,"rect",{x:!0,y:!0,"fill-opacity":!0,height:!0,width:!0,class:!0}),B(F).forEach(S),w=oe(n),H&&H.l(n),T=ye(),this.h()},h(){r(o,"offset","0%"),r(o,"stop-opacity",s=e[48].isSelected?"80%":"5%"),r(o,"stop-color",f=e[47].colorStr),r(o,"class","svelte-ww90no"),r(h,"offset","20%"),r(h,"stop-opacity",a=e[48].isSelected?"80%":"15%"),r(h,"stop-color",u=e[47].colorStr),r(h,"class","svelte-ww90no"),r(_,"offset","50%"),r(_,"stop-opacity",b=e[48].isSelected?"80%":"25%"),r(_,"stop-color",d=e[47].colorStr),r(_,"class","svelte-ww90no"),r(l,"id",y="path-grad-"+e[47].strId),r(l,"gradientTransform","rotate(90)"),r(k,"d",V=e[47].linkPath),r(k,"fill",g="url('#path-grad-"+e[47].strId+"')"),r(k,"class","svelte-ww90no"),r(P,"fill-opacity",W=.25+Math.abs(e[48].specMetric.normalizedMetric)/1.5),r(P,"x",L=e[46].xOffset+e[11]/4),r(P,"y",z=e[13]+e[12]/2-(e[48].specMetric.normalizedMetric<0?0:e[48].specMetric.normalizedMetric*e[12]/2)),r(P,"height",M=Math.abs(e[48].specMetric.normalizedMetric)*e[12]/2),r(P,"width",Z=e[6]/200),r(P,"class","svelte-ww90no"),re(p,"--y-off",e[15]+"px"),re(p,"--x-off",e[46].xOffset+.5+"px"),r(p,"class","svelte-ww90no"),r(F,"x",U=e[46].xOffset+e[11]),r(F,"y",e[13]),r(F,"fill-opacity","0"),r(F,"height",e[12]),r(F,"width",ee=e[47].width),r(F,"class","svelte-ww90no"),this.first=i},m(n,c){le(n,i,c),I(i,l),I(l,o),I(l,h),I(l,_),le(n,O,c),le(n,k,c),le(n,R,c),le(n,P,c),le(n,K,c),le(n,p,c),ce(G,p,null),le(n,D,c),le(n,F,c),le(n,w,c),H&&H.m(n,c),le(n,T,c),v=!0,q||(j=[me(F,"mouseover",function(){Ve(e[16]("highlight",e[45],e[46].xOffset,e[13]))&&e[16]("highlight",e[45],e[46].xOffset,e[13]).apply(this,arguments)}),me(F,"mouseleave",function(){Ve(e[16]("de-highlight",e[45],0,0))&&e[16]("de-highlight",e[45],0,0).apply(this,arguments)}),me(F,"click",function(){Ve(e[16]("toggle-select",e[45],0,0))&&e[16]("toggle-select",e[45],0,0).apply(this,arguments)})],q=!0)},p(n,c){e=n,(!v||c[0]&16384&&s!==(s=e[48].isSelected?"80%":"5%"))&&r(o,"stop-opacity",s),(!v||c[0]&16384&&f!==(f=e[47].colorStr))&&r(o,"stop-color",f),(!v||c[0]&16384&&a!==(a=e[48].isSelected?"80%":"15%"))&&r(h,"stop-opacity",a),(!v||c[0]&16384&&u!==(u=e[47].colorStr))&&r(h,"stop-color",u),(!v||c[0]&16384&&b!==(b=e[48].isSelected?"80%":"25%"))&&r(_,"stop-opacity",b),(!v||c[0]&16384&&d!==(d=e[47].colorStr))&&r(_,"stop-color",d),(!v||c[0]&16384&&y!==(y="path-grad-"+e[47].strId))&&r(l,"id",y),(!v||c[0]&16384&&V!==(V=e[47].linkPath))&&r(k,"d",V),(!v||c[0]&16384&&g!==(g="url('#path-grad-"+e[47].strId+"')"))&&r(k,"fill",g),(!v||c[0]&16384&&W!==(W=.25+Math.abs(e[48].specMetric.normalizedMetric)/1.5))&&r(P,"fill-opacity",W),(!v||c[0]&18432&&L!==(L=e[46].xOffset+e[11]/4))&&r(P,"x",L),(!v||c[0]&28672&&z!==(z=e[13]+e[12]/2-(e[48].specMetric.normalizedMetric<0?0:e[48].specMetric.normalizedMetric*e[12]/2)))&&r(P,"y",z),(!v||c[0]&20480&&M!==(M=Math.abs(e[48].specMetric.normalizedMetric)*e[12]/2))&&r(P,"height",M),(!v||c[0]&64&&Z!==(Z=e[6]/200))&&r(P,"width",Z);const X={};c[0]&16384&&(X.text=e[48].name),c[0]&16384&&(X.width=e[47].width),c[0]&4096&&(X.height=e[12]),G.$set(X),(!v||c[0]&32768)&&re(p,"--y-off",e[15]+"px"),(!v||c[0]&16384)&&re(p,"--x-off",e[46].xOffset+.5+"px"),(!v||c[0]&18432&&U!==(U=e[46].xOffset+e[11]))&&r(F,"x",U),(!v||c[0]&8192)&&r(F,"y",e[13]),(!v||c[0]&4096)&&r(F,"height",e[12]),(!v||c[0]&16384&&ee!==(ee=e[47].width))&&r(F,"width",ee),e[48].children?H?(H.p(e,c),c[0]&16384&&A(H,1)):(H=ot(e),H.c(),A(H,1),H.m(T.parentNode,T)):H&&(ve(),N(H,1,1,()=>{H=null}),we())},i(n){v||(n&&Ge(()=>{v&&(E||(E=Oe(k,Me,{duration:300},!0)),E.run(1))}),A(G.$$.fragment,n),A(H),v=!0)},o(n){n&&(E||(E=Oe(k,Me,{duration:300},!1)),E.run(0)),N(G.$$.fragment,n),N(H),v=!1},d(n){n&&(S(i),S(O),S(k),S(R),S(P),S(K),S(p),S(D),S(F),S(w),S(T)),n&&E&&E.end(),_e(G),H&&H.d(n),q=!1,It(j)}}}function ci(t){let e=[],i=new Map,l,o,s=pe(t[14]);const f=h=>h[45];for(let h=0;h<s.length;h+=1){let a=st(t,s,h),u=f(a);i.set(u,e[h]=at(u,a))}return{c(){for(let h=0;h<e.length;h+=1)e[h].c();l=ye()},l(h){for(let a=0;a<e.length;a+=1)e[a].l(h);l=ye()},m(h,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(h,a);le(h,l,a),o=!0},p(h,a){a[0]&131071&&(s=pe(h[14]),ve(),e=Ft(e,a,f,1,h,s,i,l.parentNode,Xt,at,l,st),we())},i(h){if(!o){for(let a=0;a<s.length;a+=1)A(e[a]);o=!0}},o(h){for(let a=0;a<e.length;a+=1)N(e[a]);o=!1},d(h){h&&S(l);for(let a=0;a<e.length;a+=1)e[a].d(h)}}}function ft(t,e,i,l,o){return((t==null?void 0:t.rank)||0)*e+i*((t==null?void 0:t.weight)||0)/l+o}function _i(t,e,i){let l,o,s,f,h,a,u,_,b,d,y,O,k,V,g,E,R,P,W,{qcSpec:L}=e,{attributeLabels:z}=e,{visibleTreeInfo:M}=e,{selectionState:Z}=e,{levelVisuals:K=[]}=e,{rootMeta:p={}}=e,{pathInCompleteTree:G=[]}=e,{rootWidth:D=30}=e,{treeWidth:F=70}=e,{childRate:U=.2}=e,{overHangRate:ee=.05}=e,{preStraightRate:w=.05}=e,{treeXOffset:T=0}=e,{childrenMargin:v=.2}=e,{minimumChildWidth:q=v*2+1}=e,{linkEdgePadding:j=q/3}=e,{linkBetweenPadRate:H=.2}=e,{width:n=D}=e,{xOffset:c=(F-D)/2+T}=e;const X=Et();function ne(m,te,ae,ke){return()=>{X("tree-interaction",{path:[...G,te],action:m,topLeftCorner:{x:ae,y:ke}})}}const ie=hi().source(m=>m.start).target(m=>m.end),de=m=>m===void 0?0:m;function ge(m,te){const ae=[...G,m],ke=((te==null?void 0:te.weight)||0)/R,je=((te==null?void 0:te.weight)||0)/P,Ne=ft(te==null?void 0:te.totalOffsetOnLevel,g,E,R,v)+T,Qe=q+E*ke,Re={parent:O*je,child:Qe-2*j},Fe={start:[c+j+ft(te==null?void 0:te.totalOffsetAmongSiblings,k,O,P,0),d],end:[Ne+j,_]},Bt={start:[Fe.end[0]+Re.child,_],end:[Fe.start[0]+Re.parent,d]},xe=h+(te.isSelected?u:0),Wt=`${ie(Fe)} v ${xe} h ${Re.child}`,jt=`v ${-xe} ${ie(Bt)} v ${-a} h ${-Re.parent}`,zt=Wt+jt+` v ${a}`;return{id:m,cachedProps:{width:Qe,xOffset:Ne,pathInCompleteTree:ae},vizInfo:{linkPath:zt,width:Re.child,colorStr:Mt(te.scaleEnds.mid),strId:ae.join("-")},childNode:te}}function C(m,te){return Object.entries((m==null?void 0:m.children)||{}).map(([ae,ke])=>ge(ae,ke))}function Q(m){Vt.call(this,t,m)}return t.$$set=m=>{"qcSpec"in m&&i(0,L=m.qcSpec),"attributeLabels"in m&&i(1,z=m.attributeLabels),"visibleTreeInfo"in m&&i(2,M=m.visibleTreeInfo),"selectionState"in m&&i(3,Z=m.selectionState),"levelVisuals"in m&&i(4,K=m.levelVisuals),"rootMeta"in m&&i(5,p=m.rootMeta),"pathInCompleteTree"in m&&i(17,G=m.pathInCompleteTree),"rootWidth"in m&&i(18,D=m.rootWidth),"treeWidth"in m&&i(6,F=m.treeWidth),"childRate"in m&&i(7,U=m.childRate),"overHangRate"in m&&i(8,ee=m.overHangRate),"preStraightRate"in m&&i(9,w=m.preStraightRate),"treeXOffset"in m&&i(10,T=m.treeXOffset),"childrenMargin"in m&&i(19,v=m.childrenMargin),"minimumChildWidth"in m&&i(20,q=m.minimumChildWidth),"linkEdgePadding"in m&&i(11,j=m.linkEdgePadding),"linkBetweenPadRate"in m&&i(21,H=m.linkBetweenPadRate),"width"in m&&i(22,n=m.width),"xOffset"in m&&i(23,c=m.xOffset)},t.$$.update=()=>{var m,te;t.$$.dirty[0]&131072&&i(29,l=G.length),t.$$.dirty[0]&131076&&i(25,o=We(G,M.tree)),t.$$.dirty[0]&536870928&&i(24,s=K[l]),t.$$.dirty[0]&16778112&&i(31,[f,h,a,u]=[s==null?void 0:s.topOffset,...[U,w,ee].map(ae=>(s==null?void 0:s.totalSize)*ae)].map(de),f,(i(12,h),i(24,s),i(7,U),i(9,w),i(8,ee),i(4,K),i(29,l),i(17,G)),(i(26,a),i(24,s),i(7,U),i(9,w),i(8,ee),i(4,K),i(29,l),i(17,G))),t.$$.dirty[0]&16777856|t.$$.dirty[1]&1&&i(13,_=f+de((s==null?void 0:s.totalSize)*(1-U-w))),t.$$.dirty[0]&12288&&i(15,b=_+h),t.$$.dirty[0]&67108864|t.$$.dirty[1]&1&&(d=f+a),t.$$.dirty[0]&33554432&&i(30,y=Object.keys((o==null?void 0:o.children)||{}).length),t.$$.dirty[0]&1080035328&&(O=(n-2*j)*(y>1?1-H:1)),t.$$.dirty[0]&1080035328&&(k=(n-2*j)*H/(y>1?y-1:1)),t.$$.dirty[0]&536870912&&i(28,V=l+1),t.$$.dirty[0]&1572864&&i(27,g=q+2*v),t.$$.dirty[0]&402653252&&(E=F-g*((m=M.meta[V])==null?void 0:m.totalNodes)),t.$$.dirty[0]&268435460&&(R=(te=M.meta[V])==null?void 0:te.totalWeight),t.$$.dirty[0]&33554432&&(P=(o==null?void 0:o.childrenSumWeight)||1),t.$$.dirty[0]&50331648&&i(14,W=C(o))},[L,z,M,Z,K,p,F,U,ee,w,T,j,h,_,W,b,ne,G,D,v,q,H,n,c,s,o,a,g,V,l,y,f,Q]}class Rt extends Je{constructor(e){super(),Ze(this,e,_i,ci,Ye,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectionState:3,levelVisuals:4,rootMeta:5,pathInCompleteTree:17,rootWidth:18,treeWidth:6,childRate:7,overHangRate:8,preStraightRate:9,treeXOffset:10,childrenMargin:19,minimumChildWidth:20,linkEdgePadding:11,linkBetweenPadRate:21,width:22,xOffset:23},null,[-1,-1])}}function ut(t,e,i){const l=t.slice();return l[30]=e[i],l}function ht(t,e,i){const l=t.slice();return l[33]=e[i],l}function ct(t){var ee,w;let e,i,l,o,s,f,h,a,u,_,b,d=t[7]?"Collapse":"Expand",y,O,k,V,g,E,R,P,W,L,z,M,Z,K;f=new Ke({props:{text:((w=(ee=t[4])==null?void 0:ee.bifurcations[t[1]])==null?void 0:w.description)||"",width:t[2]*.9,height:t[10]*.12}});let p=t[7]&&_t(t),G=pe(t[17]),D=[];for(let T=0;T<G.length;T+=1)D[T]=dt(ht(t,G,T));let F=pe([!0,!1]),U=[];for(let T=0;T<2;T+=1)U[T]=gt(ut(t,F,T));return{c(){e=Y("g"),i=Y("rect"),s=Y("g"),ue(f.$$.fragment),h=Y("g"),a=Y("foreignObject"),u=x("div"),p&&p.c(),_=se(),b=x("button"),y=Le(d),O=se(),k=x("input"),V=se(),g=x("div");for(let T=0;T<D.length;T+=1)D[T].c();E=se(),R=x("div");for(let T=0;T<2;T+=1)U[T].c();this.h()},l(T){e=J(T,"g",{style:!0,class:!0});var v=B(e);i=J(v,"rect",{fill:!0,"fill-opacity":!0,x:!0,height:!0,width:!0,class:!0}),B(i).forEach(S),s=J(v,"g",{style:!0,class:!0});var q=B(s);he(f.$$.fragment,q),q.forEach(S),h=J(v,"g",{style:!0,class:!0});var j=B(h);a=J(j,"foreignObject",{width:!0,height:!0,transform:!0});var H=B(a);u=$(H,"DIV",{class:!0});var n=B(u);p&&p.l(n),_=oe(n),b=$(n,"BUTTON",{class:!0});var c=B(b);y=Te(c,d),c.forEach(S),O=oe(n),k=$(n,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),V=oe(n),g=$(n,"DIV",{class:!0});var X=B(g);for(let ie=0;ie<D.length;ie+=1)D[ie].l(X);X.forEach(S),E=oe(n),R=$(n,"DIV",{class:!0});var ne=B(R);for(let ie=0;ie<2;ie+=1)U[ie].l(ne);ne.forEach(S),n.forEach(S),H.forEach(S),j.forEach(S),v.forEach(S),this.h()},h(){r(i,"fill","grey"),r(i,"fill-opacity",l=t[7]?.5:.3),r(i,"x",o=-t[14]),r(i,"height",t[10]),r(i,"width",t[3]),r(i,"class","svelte-223hvc"),re(s,"--y-off",t[10]*.15+"px"),r(s,"class","svelte-223hvc"),r(b,"class","svelte-223hvc"),r(k,"id","top-limit"),r(k,"type","number"),r(k,"min","1"),r(k,"max",t[5]),r(k,"class","svelte-223hvc"),r(g,"class","svelte-223hvc"),r(R,"class","svelte-223hvc"),r(u,"class","main-controls svelte-223hvc"),r(a,"width",P=t[8]/t[12]),r(a,"height",W=t[9]/t[12]),r(a,"transform",L="scale("+t[12]+","+t[12]+")"),re(h,"--y-off",t[10]*t[13]+"px"),r(h,"class","svelte-223hvc"),re(e,"--y-off",t[15]+"px"),re(e,"--x-off",t[14]+"px"),r(e,"class","svelte-223hvc")},m(T,v){le(T,e,v),I(e,i),I(e,s),ce(f,s,null),I(e,h),I(h,a),I(a,u),p&&p.m(u,null),I(u,_),I(u,b),I(b,y),I(u,O),I(u,k),qe(k,t[0][t[1]].limit_n),I(u,V),I(u,g);for(let q=0;q<D.length;q+=1)D[q]&&D[q].m(g,null);I(u,E),I(u,R);for(let q=0;q<2;q+=1)U[q]&&U[q].m(R,null);M=!0,Z||(K=[me(b,"click",function(){Ve(t[16](t[1]))&&t[16](t[1]).apply(this,arguments)}),me(k,"input",t[25])],Z=!0)},p(T,v){var j,H;t=T,(!M||v[0]&128&&l!==(l=t[7]?.5:.3))&&r(i,"fill-opacity",l),(!M||v[0]&16384&&o!==(o=-t[14]))&&r(i,"x",o),(!M||v[0]&1024)&&r(i,"height",t[10]),(!M||v[0]&8)&&r(i,"width",t[3]);const q={};if(v[0]&18&&(q.text=((H=(j=t[4])==null?void 0:j.bifurcations[t[1]])==null?void 0:H.description)||""),v[0]&4&&(q.width=t[2]*.9),v[0]&1024&&(q.height=t[10]*.12),f.$set(q),(!M||v[0]&1024)&&re(s,"--y-off",t[10]*.15+"px"),t[7]?p?(p.p(t,v),v[0]&128&&A(p,1)):(p=_t(t),p.c(),A(p,1),p.m(u,_)):p&&(ve(),N(p,1,1,()=>{p=null}),we()),(!M||v[0]&128)&&d!==(d=t[7]?"Collapse":"Expand")&&Ht(y,d),(!M||v[0]&32)&&r(k,"max",t[5]),v[0]&3&&yt(k.value)!==t[0][t[1]].limit_n&&qe(k,t[0][t[1]].limit_n),v[0]&131075){G=pe(t[17]);let n;for(n=0;n<G.length;n+=1){const c=ht(t,G,n);D[n]?D[n].p(c,v):(D[n]=dt(c),D[n].c(),D[n].m(g,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=G.length}if(v[0]&3){F=pe([!0,!1]);let n;for(n=0;n<2;n+=1){const c=ut(t,F,n);U[n]?U[n].p(c,v):(U[n]=gt(c),U[n].c(),U[n].m(R,null))}for(;n<2;n+=1)U[n].d(1)}(!M||v[0]&4352&&P!==(P=t[8]/t[12]))&&r(a,"width",P),(!M||v[0]&4608&&W!==(W=t[9]/t[12]))&&r(a,"height",W),(!M||v[0]&4096&&L!==(L="scale("+t[12]+","+t[12]+")"))&&r(a,"transform",L),(!M||v[0]&9216)&&re(h,"--y-off",t[10]*t[13]+"px"),(!M||v[0]&32768)&&re(e,"--y-off",t[15]+"px"),(!M||v[0]&16384)&&re(e,"--x-off",t[14]+"px")},i(T){M||(A(f.$$.fragment,T),A(p),T&&Ge(()=>{M&&(z||(z=Oe(e,Me,{duration:1e3},!0)),z.run(1))}),M=!0)},o(T){N(f.$$.fragment,T),N(p),T&&(z||(z=Oe(e,Me,{duration:1e3},!1)),z.run(0)),M=!1},d(T){T&&S(e),_e(f),p&&p.d(),He(D,T),He(U,T),T&&z&&z.end(),Z=!1,It(K)}}}function _t(t){let e,i,l,o="Must include",s,f,h,a,u,_,b,d="Must exclude",y,O,k,V,g;function E(L){t[23](L)}let R={items:t[11],multiple:!0,hideArrow:!0,labelFieldName:"name",valueFieldName:"id",maxItemsToShowInList:3};t[0][t[1]].include!==void 0&&(R.value=t[0][t[1]].include),h=new De({props:R}),Ce.push(()=>Be(h,"value",E));function P(L){t[24](L)}let W={items:t[11],multiple:!0,hideArrow:!0,labelFieldName:"name",valueFieldName:"id",maxItemsToShowInList:3};return t[0][t[1]].exclude!==void 0&&(W.value=t[0][t[1]].exclude),k=new De({props:W}),Ce.push(()=>Be(k,"value",P)),{c(){e=x("div"),i=x("div"),l=x("div"),l.textContent=o,s=se(),f=x("div"),ue(h.$$.fragment),u=se(),_=x("div"),b=x("div"),b.textContent=d,y=se(),O=x("div"),ue(k.$$.fragment),this.h()},l(L){e=$(L,"DIV",{class:!0});var z=B(e);i=$(z,"DIV",{class:!0});var M=B(i);l=$(M,"DIV",{class:!0,"data-svelte-h":!0}),$e(l)!=="svelte-1d751ud"&&(l.textContent=o),s=oe(M),f=$(M,"DIV",{});var Z=B(f);he(h.$$.fragment,Z),Z.forEach(S),M.forEach(S),u=oe(z),_=$(z,"DIV",{class:!0});var K=B(_);b=$(K,"DIV",{class:!0,"data-svelte-h":!0}),$e(b)!=="svelte-1pf1t0n"&&(b.textContent=d),y=oe(K),O=$(K,"DIV",{});var p=B(O);he(k.$$.fragment,p),p.forEach(S),K.forEach(S),z.forEach(S),this.h()},h(){r(l,"class","sub-label svelte-223hvc"),r(i,"class","sub-input svelte-223hvc"),r(b,"class","sub-label svelte-223hvc"),r(_,"class","sub-input svelte-223hvc"),r(e,"class","sub-controls svelte-223hvc")},m(L,z){le(L,e,z),I(e,i),I(i,l),I(i,s),I(i,f),ce(h,f,null),I(e,u),I(e,_),I(_,b),I(_,y),I(_,O),ce(k,O,null),g=!0},p(L,z){const M={};z[0]&2048&&(M.items=L[11]),!a&&z[0]&3&&(a=!0,M.value=L[0][L[1]].include,Pe(()=>a=!1)),h.$set(M);const Z={};z[0]&2048&&(Z.items=L[11]),!V&&z[0]&3&&(V=!0,Z.value=L[0][L[1]].exclude,Pe(()=>V=!1)),k.$set(Z)},i(L){g||(A(h.$$.fragment,L),A(k.$$.fragment,L),g=!0)},o(L){N(h.$$.fragment,L),N(k.$$.fragment,L),g=!1},d(L){L&&S(e),_e(h),_e(k)}}}function dt(t){let e,i,l,o,s=t[33]+"",f,h,a,u,_;return a=Ot(t[27][1]),{c(){e=x("label"),i=x("input"),o=se(),f=Le(s),h=se(),this.h()},l(b){e=$(b,"LABEL",{});var d=B(e);i=$(d,"INPUT",{type:!0,name:!0}),o=oe(d),f=Te(d,s),h=oe(d),d.forEach(S),this.h()},h(){r(i,"type","radio"),r(i,"name",l="basis-"+t[1]),i.__value=t[33],qe(i,i.__value),a.p(i)},m(b,d){le(b,e,d),I(e,i),i.checked=i.__value===t[0][t[1]].size_base,I(e,o),I(e,f),I(e,h),u||(_=me(i,"change",t[26]),u=!0)},p(b,d){d[0]&2&&l!==(l="basis-"+b[1])&&r(i,"name",l),d[0]&3&&(i.checked=i.__value===b[0][b[1]].size_base)},d(b){b&&S(e),a.r(),u=!1,_()}}}function gt(t){let e,i,l,o,s=t[30]?"highest":"lowest",f,h,a,u,_;return a=Ot(t[27][0]),{c(){e=x("label"),i=x("input"),o=se(),f=Le(s),h=se(),this.h()},l(b){e=$(b,"LABEL",{});var d=B(e);i=$(d,"INPUT",{type:!0,name:!0}),o=oe(d),f=Te(d,s),h=oe(d),d.forEach(S),this.h()},h(){r(i,"type","radio"),r(i,"name",l="end-"+t[1]),i.__value=t[30],qe(i,i.__value),a.p(i)},m(b,d){le(b,e,d),I(e,i),i.checked=i.__value===t[0][t[1]].show_top,I(e,o),I(e,f),I(e,h),u||(_=me(i,"change",t[28]),u=!0)},p(b,d){d[0]&2&&l!==(l="end-"+b[1])&&r(i,"name",l),d[0]&3&&(i.checked=i.__value===b[0][b[1]].show_top)},d(b){b&&S(e),a.r(),u=!1,_()}}}function di(t){let e,i,l=t[6]!=null&&ct(t);return{c(){l&&l.c(),e=ye()},l(o){l&&l.l(o),e=ye()},m(o,s){l&&l.m(o,s),le(o,e,s),i=!0},p(o,s){o[6]!=null?l?(l.p(o,s),s[0]&64&&A(l,1)):(l=ct(o),l.c(),A(l,1),l.m(e.parentNode,e)):l&&(ve(),N(l,1,1,()=>{l=null}),we())},i(o){i||(A(l),i=!0)},o(o){N(l),i=!1},d(o){o&&S(e),l&&l.d(o)}}}function gi(t,e,i){let l,o,s,f,h,a,u,_,b,d,{lVis:y}=e,{index:O}=e,{expandedIndex:k}=e,{childRate:V}=e,{overHangRate:g}=e,{sideBarWidth:E}=e,{svgWidth:R}=e,{currentQcSpec:P}=e,{controlSpecs:W}=e,{attributeLabels:L}=e,{maxOnOneLevel:z=15}=e;const M=Et();function Z(w){return()=>{M("control-expand",{ind:w})}}let K=["volume","specialization"];const p=[[],[]];function G(w){t.$$.not_equal(W[O].include,w)&&(W[O].include=w,i(0,W))}function D(w){t.$$.not_equal(W[O].exclude,w)&&(W[O].exclude=w,i(0,W))}function F(){W[O].limit_n=yt(this.value),i(0,W)}function U(){W[O].size_base=this.__value,i(0,W)}function ee(){W[O].show_top=this.__value,i(0,W)}return t.$$set=w=>{"lVis"in w&&i(18,y=w.lVis),"index"in w&&i(1,O=w.index),"expandedIndex"in w&&i(19,k=w.expandedIndex),"childRate"in w&&i(20,V=w.childRate),"overHangRate"in w&&i(21,g=w.overHangRate),"sideBarWidth"in w&&i(2,E=w.sideBarWidth),"svgWidth"in w&&i(3,R=w.svgWidth),"currentQcSpec"in w&&i(4,P=w.currentQcSpec),"controlSpecs"in w&&i(0,W=w.controlSpecs),"attributeLabels"in w&&i(22,L=w.attributeLabels),"maxOnOneLevel"in w&&i(5,z=w.maxOnOneLevel)},t.$$.update=()=>{t.$$.dirty[0]&524290&&i(7,l=O==k),t.$$.dirty[0]&18&&i(6,o=P==null?void 0:P.bifurcations[O]),t.$$.dirty[0]&3407872&&i(15,s=y.topOffset+y.totalSize-y.totalSize*(V+g)),t.$$.dirty[0]&1310720&&i(10,f=y.totalSize*V),t.$$.dirty[0]&4&&i(14,h=E*.02),t.$$.dirty[0]&128&&i(13,a=l?.23:.32),t.$$.dirty[0]&1152&&i(9,u=f*(l?.75:.65)),t.$$.dirty[0]&4&&i(8,_=E*.85),t.$$.dirty[0]&896&&i(12,b=Math.min(u/(l?160:90),_/(l?320:220))),t.$$.dirty[0]&4194368&&i(11,d=Object.entries(L[o==null?void 0:o.attribute_kind]||{}).map(([w,T])=>({id:w,name:T.name})))},[W,O,E,R,P,z,o,l,_,u,f,d,b,a,h,s,Z,K,y,k,V,g,L,G,D,F,U,p,ee]}class pi extends Je{constructor(e){super(),Ze(this,e,gi,di,Ye,{lVis:18,index:1,expandedIndex:19,childRate:20,overHangRate:21,sideBarWidth:2,svgWidth:3,currentQcSpec:4,controlSpecs:0,attributeLabels:22,maxOnOneLevel:5},null,[-1,-1])}}function mi(t,e,i){const l=t.slice();return l[43]=e[i],l}function pt(t,e,i){const l=t.slice();return l[46]=e[i],l[48]=i,l}function mt(t){var H;let e,i,l,o,s,f,h,a,u,_,b,d,y,O,k,V,g,E,R,P,W,L,z,M,Z,K,p=t[15].length>0&&bt(t);function G(n){t[33](n)}let D={items:t[17],labelFieldName:"name",valueFieldName:"id",hideArrow:!0};t[5]!==void 0&&(D.selectedItem=t[5]),s=new De({props:D}),Ce.push(()=>Be(s,"selectedItem",G));function F(n){t[34](n)}let U={items:t[18],labelFieldName:"name",valueFieldName:"id",hideArrow:!0,maxItemsToShowInList:3};t[7]!==void 0&&(U.selectedItem=t[7]),u=new De({props:U}),Ce.push(()=>Be(u,"selectedItem",F));let ee=pe(t[21]||[]),w=[];for(let n=0;n<ee.length;n+=1)w[n]=vt(pt(t,ee,n));const T=n=>N(w[n],1,1,()=>{w[n]=null});let v=pe([0,.25,.5,.75,1]),q=[];for(let n=0;n<5;n+=1)q[n]=bi(mi(t,v,n));E=new Rt({props:{qcSpec:t[13],xOffset:t[26],rootWidth:Ie,attributeLabels:t[8],visibleTreeInfo:t[12],selectionState:t[11],levelVisuals:t[21],rootMeta:t[19],treeWidth:t[24],treeXOffset:t[25],childRate:t[16],overHangRate:Pt}}),E.$on("tree-interaction",t[28]),L=new Ke({props:{height:t[22],width:Ie,text:((H=t[7])==null?void 0:H.name)||""}});let j=t[20]!=null&&wt(t);return{c(){e=Y("svg"),p&&p.c(),i=Y("foreignObject"),l=x("div"),o=x("div"),ue(s.$$.fragment),h=se(),a=x("div"),ue(u.$$.fragment),b=se(),d=x("div"),y=x("input"),O=Le(" Show Infobox on Hover"),k=se();for(let n=0;n<w.length;n+=1)w[n].c();g=Y("linearGradient");for(let n=0;n<5;n+=1)q[n].c();ue(E.$$.fragment),R=Y("rect"),W=Y("g"),ue(L.$$.fragment),j&&j.c(),this.h()},l(n){e=J(n,"svg",{viewBox:!0,xmlns:!0});var c=B(e);p&&p.l(c),i=J(c,"foreignObject",{y:!0,width:!0,height:!0,transform:!0});var X=B(i);l=$(X,"DIV",{style:!0});var ne=B(l);o=$(ne,"DIV",{style:!0});var ie=B(o);he(s.$$.fragment,ie),ie.forEach(S),h=oe(ne),a=$(ne,"DIV",{style:!0});var de=B(a);he(u.$$.fragment,de),de.forEach(S),b=oe(ne),d=$(ne,"DIV",{style:!0});var ge=B(d);y=$(ge,"INPUT",{type:!0}),O=Te(ge," Show Infobox on Hover"),ge.forEach(S),k=oe(ne),ne.forEach(S),X.forEach(S);for(let m=0;m<w.length;m+=1)w[m].l(c);g=J(c,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0});var C=B(g);for(let m=0;m<5;m+=1)q[m].l(C);C.forEach(S),he(E.$$.fragment,c),R=J(c,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),B(R).forEach(S),W=J(c,"g",{transform:!0});var Q=B(W);he(L.$$.fragment,Q),Q.forEach(S),j&&j.l(c),c.forEach(S),this.h()},h(){re(o,"margin-bottom","17px"),re(a,"margin-top","17px"),r(y,"type","checkbox"),re(d,"margin-top","8px"),re(l,"padding","20px"),r(i,"y",V=-t[22]/fe),r(i,"width",Ee/fe),r(i,"height",500),r(i,"transform","scale("+fe+","+fe+")"),r(g,"id","hbow"),r(g,"x1","0%"),r(g,"y1","0%"),r(g,"x2","100%"),r(g,"y2","0%"),r(R,"x",t[26]),r(R,"y",P=-t[22]),r(R,"width",Ie),r(R,"height",t[22]),r(R,"fill","url(#hbow)"),r(W,"transform","translate("+t[26]+", 0)"),r(e,"viewBox",z="0 "+-t[22]+" "+be+" "+t[14]),r(e,"xmlns","http://www.w3.org/2000/svg")},m(n,c){le(n,e,c),p&&p.m(e,null),I(e,i),I(i,l),I(l,o),ce(s,o,null),I(l,h),I(l,a),ce(u,a,null),I(l,b),I(l,d),I(d,y),y.checked=t[4],I(d,O),I(l,k);for(let X=0;X<w.length;X+=1)w[X]&&w[X].m(e,null);I(e,g);for(let X=0;X<5;X+=1)q[X]&&q[X].m(g,null);ce(E,e,null),I(e,R),I(e,W),ce(L,W,null),j&&j.m(e,null),M=!0,Z||(K=me(y,"change",t[35]),Z=!0)},p(n,c){var ge;n[15].length>0?p?(p.p(n,c),c[0]&32768&&A(p,1)):(p=bt(n),p.c(),A(p,1),p.m(e,i)):p&&(ve(),N(p,1,1,()=>{p=null}),we());const X={};c[0]&131072&&(X.items=n[17]),!f&&c[0]&32&&(f=!0,X.selectedItem=n[5],Pe(()=>f=!1)),s.$set(X);const ne={};if(c[0]&262144&&(ne.items=n[18]),!_&&c[0]&128&&(_=!0,ne.selectedItem=n[7],Pe(()=>_=!1)),u.$set(ne),c[0]&16&&(y.checked=n[4]),(!M||c[0]&4194304&&V!==(V=-n[22]/fe))&&r(i,"y",V),c[0]&136389384){ee=pe(n[21]||[]);let C;for(C=0;C<ee.length;C+=1){const Q=pt(n,ee,C);w[C]?(w[C].p(Q,c),A(w[C],1)):(w[C]=vt(Q),w[C].c(),A(w[C],1),w[C].m(e,g))}for(ve(),C=ee.length;C<w.length;C+=1)T(C);we()}const ie={};c[0]&8192&&(ie.qcSpec=n[13]),c[0]&256&&(ie.attributeLabels=n[8]),c[0]&4096&&(ie.visibleTreeInfo=n[12]),c[0]&2048&&(ie.selectionState=n[11]),c[0]&2097152&&(ie.levelVisuals=n[21]),c[0]&524288&&(ie.rootMeta=n[19]),c[0]&65536&&(ie.childRate=n[16]),E.$set(ie),(!M||c[0]&4194304&&P!==(P=-n[22]))&&r(R,"y",P),(!M||c[0]&4194304)&&r(R,"height",n[22]);const de={};c[0]&4194304&&(de.height=n[22]),c[0]&128&&(de.text=((ge=n[7])==null?void 0:ge.name)||""),L.$set(de),n[20]!=null?j?(j.p(n,c),c[0]&1048576&&A(j,1)):(j=wt(n),j.c(),A(j,1),j.m(e,null)):j&&(ve(),N(j,1,1,()=>{j=null}),we()),(!M||c[0]&4210688&&z!==(z="0 "+-n[22]+" "+be+" "+n[14]))&&r(e,"viewBox",z)},i(n){if(!M){A(p),A(s.$$.fragment,n),A(u.$$.fragment,n);for(let c=0;c<ee.length;c+=1)A(w[c]);A(E.$$.fragment,n),A(L.$$.fragment,n),A(j),M=!0}},o(n){N(p),N(s.$$.fragment,n),N(u.$$.fragment,n),w=w.filter(Boolean);for(let c=0;c<w.length;c+=1)N(w[c]);N(E.$$.fragment,n),N(L.$$.fragment,n),N(j),M=!1},d(n){n&&S(e),p&&p.d(),_e(s),_e(u),He(w,n),He(q,n),_e(E),_e(L),j&&j.d(),Z=!1,K()}}}function bt(t){var V;let e,i,l,o,s,f,h,a,u,_,b,d,y,O,k;return h=new Lt({props:{path:t[15],weightedRoot:t[10],specBaselineOptions:t[6],attributeLabels:t[8],qcSpec:t[13],rootId:(V=t[7])==null?void 0:V.id}}),{c(){e=Y("g"),i=Y("filter"),l=Y("feGaussianBlur"),o=Y("rect"),f=Y("foreignObject"),ue(h.$$.fragment),u=Y("a"),_=Y("text"),b=Le("Open"),this.h()},l(g){e=J(g,"g",{transform:!0});var E=B(e);i=J(E,"filter",{id:!0});var R=B(i);l=J(R,"feGaussianBlur",{in:!0,stdDeviation:!0}),B(l).forEach(S),R.forEach(S),o=J(E,"rect",{id:!0,style:!0,height:!0,width:!0,rx:!0,opacity:!0,filter:!0,class:!0}),B(o).forEach(S),f=J(E,"foreignObject",{width:!0,height:!0,transform:!0});var P=B(f);he(h.$$.fragment,P),P.forEach(S),u=J(E,"a",{href:!0,target:!0});var W=B(u);_=J(W,"text",{y:!0,"font-size":!0,href:!0});var L=B(_);b=Te(L,"Open"),L.forEach(S),W.forEach(S),E.forEach(S),this.h()},h(){var g,E;r(l,"in","SourceGraphic"),r(l,"stdDeviation",Ie*1.3*.008),r(i,"id","blurry"),r(o,"id","info-bg"),re(o,"--selected-color",lt(((E=We(t[15],((g=t[12])==null?void 0:g.tree)||{}))==null?void 0:E.scaleEnds.mid)||.5)),r(o,"height",s=t[22]*1.2),r(o,"width",Ie*1.3),r(o,"rx",.3),r(o,"opacity",.95),r(o,"filter","url(#blurry)"),r(o,"class","svelte-i4ytz6"),r(f,"width",Ie*1.3/fe),r(f,"height",a=t[22]*1.2/fe),r(f,"transform","scale("+fe+","+fe+")"),r(_,"y",1.8),r(_,"font-size","1.2px"),r(_,"href","/"),r(u,"href",d=`${Ae}/path-profile/${t[5].id}?r=${t[7].id}&p=${tt(t[15])}`),r(u,"target","_blank"),r(e,"transform",y="translate("+be*.6+", "+-t[22]*.9+")")},m(g,E){le(g,e,E),I(e,i),I(i,l),I(e,o),I(e,f),ce(h,f,null),I(e,u),I(u,_),I(_,b),k=!0},p(g,E){var P,W,L;(!k||E[0]&36864)&&re(o,"--selected-color",lt(((W=We(g[15],((P=g[12])==null?void 0:P.tree)||{}))==null?void 0:W.scaleEnds.mid)||.5)),(!k||E[0]&4194304&&s!==(s=g[22]*1.2))&&r(o,"height",s);const R={};E[0]&32768&&(R.path=g[15]),E[0]&1024&&(R.weightedRoot=g[10]),E[0]&64&&(R.specBaselineOptions=g[6]),E[0]&256&&(R.attributeLabels=g[8]),E[0]&8192&&(R.qcSpec=g[13]),E[0]&128&&(R.rootId=(L=g[7])==null?void 0:L.id),h.$set(R),(!k||E[0]&4194304&&a!==(a=g[22]*1.2/fe))&&r(f,"height",a),(!k||E[0]&32928&&d!==(d=`${Ae}/path-profile/${g[5].id}?r=${g[7].id}&p=${tt(g[15])}`))&&r(u,"href",d),(!k||E[0]&4194304&&y!==(y="translate("+be*.6+", "+-g[22]*.9+")"))&&r(e,"transform",y)},i(g){k||(A(h.$$.fragment,g),g&&Ge(()=>{k&&(O||(O=Oe(e,Me,{duration:300},!0)),O.run(1))}),k=!0)},o(g){N(h.$$.fragment,g),g&&(O||(O=Oe(e,Me,{duration:300},!1)),O.run(0)),k=!1},d(g){g&&S(e),_e(h),g&&O&&O.end()}}}function vt(t){let e,i,l;function o(f){t[36](f)}let s={lVis:t[46],index:t[48],childRate:t[16],overHangRate:Pt,sideBarWidth:Ee,svgWidth:be,currentQcSpec:t[13],expandedIndex:t[3],attributeLabels:t[8]};return t[9]!==void 0&&(s.controlSpecs=t[9]),e=new pi({props:s}),Ce.push(()=>Be(e,"controlSpecs",o)),e.$on("control-expand",t[27]),{c(){ue(e.$$.fragment)},l(f){he(e.$$.fragment,f)},m(f,h){ce(e,f,h),l=!0},p(f,h){const a={};h[0]&2097152&&(a.lVis=f[46]),h[0]&65536&&(a.childRate=f[16]),h[0]&8192&&(a.currentQcSpec=f[13]),h[0]&8&&(a.expandedIndex=f[3]),h[0]&256&&(a.attributeLabels=f[8]),!i&&h[0]&512&&(i=!0,a.controlSpecs=f[9],Pe(()=>i=!1)),e.$set(a)},i(f){l||(A(e.$$.fragment,f),l=!0)},o(f){N(e.$$.fragment,f),l=!1},d(f){_e(e,f)}}}function bi(t){let e;return{c(){e=Y("stop"),this.h()},l(i){e=J(i,"stop",{offset:!0,style:!0}),B(e).forEach(S),this.h()},h(){r(e,"offset",t[43]*100+"%"),re(e,"stop-color",Mt(t[43])),re(e,"stop-opacity","0.35")},m(i,l){le(i,e,l)},p:Gt,d(i){i&&S(e)}}}function wt(t){var h;let e,i,l,o,s,f;return o=new Lt({props:{path:t[2],weightedRoot:t[10],specBaselineOptions:t[6],attributeLabels:t[8],qcSpec:t[13],rootId:(h=t[7])==null?void 0:h.id}}),{c(){e=Y("g"),i=Y("rect"),l=Y("foreignObject"),ue(o.$$.fragment),this.h()},l(a){e=J(a,"g",{transform:!0});var u=B(e);i=J(u,"rect",{height:!0,width:!0,fill:!0,"fill-opacity":!0}),B(i).forEach(S),l=J(u,"foreignObject",{height:!0,width:!0,transform:!0});var _=B(l);he(o.$$.fragment,_),_.forEach(S),u.forEach(S),this.h()},h(){r(i,"height",ze),r(i,"width",t[23]),r(i,"fill","pink"),r(i,"fill-opacity","0.85"),r(l,"height",ze/fe),r(l,"width",t[23]/fe),r(l,"transform","scale("+fe+","+fe+")"),r(e,"transform",s="translate("+(t[20].position.x-t[23])+", "+(t[20].position.y-ze)+")")},m(a,u){le(a,e,u),I(e,i),I(e,l),ce(o,l,null),f=!0},p(a,u){var b;const _={};u[0]&4&&(_.path=a[2]),u[0]&1024&&(_.weightedRoot=a[10]),u[0]&64&&(_.specBaselineOptions=a[6]),u[0]&256&&(_.attributeLabels=a[8]),u[0]&8192&&(_.qcSpec=a[13]),u[0]&128&&(_.rootId=(b=a[7])==null?void 0:b.id),o.$set(_),(!f||u[0]&1048576&&s!==(s="translate("+(a[20].position.x-a[23])+", "+(a[20].position.y-ze)+")"))&&r(e,"transform",s)},i(a){f||(A(o.$$.fragment,a),f=!0)},o(a){N(o.$$.fragment,a),f=!1},d(a){a&&S(e),_e(o)}}}function vi(t){let e,i,l=![t[22],be,t[14]].includes(NaN),o,s,f,h,a,u,_,b;Ge(t[32]);let d=l&&mt(t);return{c(){e=x("div"),i=x("div"),d&&d.c(),o=se(),s=x("div"),f=x("a"),h=x("b"),a=Le(nt),this.h()},l(y){e=$(y,"DIV",{class:!0});var O=B(e);i=$(O,"DIV",{class:!0});var k=B(i);d&&d.l(k),k.forEach(S),o=oe(O),s=$(O,"DIV",{class:!0,style:!0});var V=B(s);f=$(V,"A",{href:!0});var g=B(f);h=$(g,"B",{});var E=B(h);a=Te(E,nt),E.forEach(S),g.forEach(S),V.forEach(S),O.forEach(S),this.h()},h(){r(i,"class","treecontent svelte-i4ytz6"),r(f,"href",`${Ae}/`),r(s,"class","treefoot svelte-i4ytz6"),re(s,"--foot-height",Ct+"px"),r(e,"class","treefix svelte-i4ytz6")},m(y,O){le(y,e,O),I(e,i),d&&d.m(i,null),I(e,o),I(e,s),I(s,f),I(f,h),I(h,a),u=!0,_||(b=me(window,"resize",t[32]),_=!0)},p(y,O){O[0]&4210688&&(l=![y[22],be,y[14]].includes(NaN)),l?d?(d.p(y,O),O[0]&4210688&&A(d,1)):(d=mt(y),d.c(),A(d,1),d.m(i,null)):d&&(ve(),N(d,1,1,()=>{d=null}),we())},i(y){u||(A(d),u=!0)},o(y){N(d),u=!1},d(y){y&&S(e),d&&d.d(),_=!1,b()}}}const St=.3;let Ct=50,be=100,Ie=25,Ee=17,Pt=.05,kt=.12,wi=.9,ze=10,fe=.035;function Si(t,e){let i=new RegExp("\\{pc_id\\}","gi");return t.replace(i,e)}function ki(t,e,i){let l,o,s,f,h,a,u,_;Dt(t,Ut,C=>i(37,_=C));let b,d,y=[],O=[],k,V=St,g=!0,E=Ee*.85,R=be-Ee,P=Ee,W=R*.1+Ee,L={},z=[],M,Z={},K,p,G={};const D=C=>({id:C[0],name:C[1].title});At(()=>{et("root-descriptions",C=>{i(18,K=C[_.params.rootType]),i(7,p=K.filter(Q=>Q.id==_.params.rootId)[0])}),Kt().then(([C,Q,m])=>{i(29,L=Object.fromEntries(Object.entries(Q).filter(([te,ae])=>ae.root_entity_type==_.params.rootType))),i(17,z=Object.entries(L).map(D)),i(5,M=z[0]),i(8,G=C),i(6,Z=m)})});function F(C,Q){[C,Q].includes(void 0)||(Zt(`${Ae}/view/${_.params.rootType}/${Q}`),et(`qc-builds/${C}/${Q}`,m=>{w(),i(10,[q,v,T]=[m,v,U()],q,i(9,v),i(19,T))}))}function U(){try{return G[f.root_entity_type][(p==null?void 0:p.id)||""].meta}catch{return{}}}function ee(C,Q,m){return Q&&C.length>0?{node:We(C,h.tree),position:m}:void 0}function w(){const C=p==null?void 0:p.id;for(;v.length>0;)v.pop();if(![f,C].includes(void 0))for(var Q of f.bifurcations)v.push({...it,...JSON.parse(Si(Q.control_format_str,C))})}let T={},v=[it],q={weight:1},j={children:{}},H={x:0,y:0};function n(C){C.detail.ind==k?(i(3,k=void 0),i(16,V=St)):(i(3,k=C.detail.ind),i(16,V=.5))}function c(C){var je;const Q=C.detail.path,m=Q[Q.length-1],te=C.detail.action;if(te=="highlight"){i(30,[H,y]=[C.detail.topLeftCorner,Q],H,i(2,y));return}else if(te=="de-highlight"){i(2,y=[]);return}let ae=We(Q.slice(0,Q.length-1),j);if((ae==null?void 0:ae.children)===void 0)return;Object.keys(ae.children).includes(m)?(delete ae.children[m],i(15,O=xt(j))):(i(15,O=Q),ae.children[m]={children:((je=ae.children[m])==null?void 0:je.children)||{}}),i(11,j)}function X(){i(1,d=window.innerWidth),i(0,b=window.innerHeight)}function ne(C){M=C,i(5,M)}function ie(C){p=C,i(7,p)}function de(){g=this.checked,i(4,g)}function ge(C){v=C,i(9,v)}return t.$$.update=()=>{t.$$.dirty[0]&3&&i(14,l=(b-Ct)/d*be-5),t.$$.dirty[0]&16384&&i(22,o=l*kt),t.$$.dirty[0]&16384&&i(31,s=l*(1-kt)*wi),t.$$.dirty[0]&536870944&&i(13,f=L[(M==null?void 0:M.id)||""]),t.$$.dirty[0]&160&&F(M==null?void 0:M.id,p==null?void 0:p.id),t.$$.dirty[0]&12224&&i(12,h=Nt(p==null?void 0:p.id,q,v,j,G,f,Z)),t.$$.dirty[0]&4104|t.$$.dirty[1]&1&&i(21,a=Qt(h,s,k)),t.$$.dirty[0]&1073741844&&i(20,u=ee(y,g,H))},[b,d,y,k,g,M,Z,p,G,v,q,j,h,f,l,O,V,z,K,T,u,a,o,E,R,P,W,n,c,L,H,s,X,ne,ie,de,ge]}class Wi extends Je{constructor(e){super(),Ze(this,e,ki,vi,Ye,{},null,[-1,-1])}}export{Wi as component};

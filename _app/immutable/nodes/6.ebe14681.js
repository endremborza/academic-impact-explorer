import{s as F,a as q,e as h,B as w,d as u,c as y,i as S,K as P,o as A,p as E,D as L}from"../chunks/scheduler.2d1c82f4.js";import{S as R,i as Y,a as m,t as _,c as M,f as j,b as B,d as C,m as D,e as H,g as K}from"../chunks/index.bf293594.js";import{p as O}from"../chunks/stores.807d2e61.js";import{a as U}from"../chunks/navigation.179435f7.js";import{h as z}from"../chunks/tree-functions.2607c0ac.js";import{f as d,F as G}from"../chunks/FullQc.57cc0cce.js";import{A as I}from"../chunks/constants.8d8a1d0f.js";import{r as J}from"../chunks/root-basics.0d5934b7.js";function N(o){let n,a,l;function s(e){o[8](e)}let f={selectedQcRootId:o[2],rootType:o[3],attributeLabels:o[4],fullQcSpecs:d,defaultQcSpecId:o[1],specFilterYear:o[5],startSentence:o[6],removeHighlightUnhover:!1};return o[0]!==void 0&&(f.rootName=o[0]),n=new G({props:f}),E.push(()=>j(n,"rootName",s)),{c(){B(n.$$.fragment)},l(e){C(n.$$.fragment,e)},m(e,t){D(n,e,t),l=!0},p(e,t){const r={};t&4&&(r.selectedQcRootId=e[2]),t&8&&(r.rootType=e[3]),t&16&&(r.attributeLabels=e[4]),t&2&&(r.defaultQcSpecId=e[1]),t&32&&(r.specFilterYear=e[5]),t&64&&(r.startSentence=e[6]),!a&&t&1&&(a=!0,r.rootName=e[0],L(()=>a=!1)),n.$set(r)},i(e){l||(m(n.$$.fragment,e),l=!0)},o(e){_(n.$$.fragment,e),l=!1},d(e){H(n,e)}}}function V(o){let n,a,l=![o[2],o[3],o[4],d,o[1],o[6]].includes(void 0),s,f;document.title=n=""+(I+o[7]);let e=l&&N(o);return{c(){a=q(),e&&e.c(),s=h()},l(t){w("svelte-19w079w",document.head).forEach(u),a=y(t),e&&e.l(t),s=h()},m(t,r){S(t,a,r),e&&e.m(t,r),S(t,s,r),f=!0},p(t,[r]){(!f||r&128)&&n!==(n=""+(I+t[7]))&&(document.title=n),r&94&&(l=![t[2],t[3],t[4],d,t[1],t[6]].includes(void 0)),l?e?(e.p(t,r),r&94&&m(e,1)):(e=N(t),e.c(),m(e,1),e.m(s.parentNode,s)):e&&(K(),_(e,1,1,()=>{e=null}),M())},i(t){f||(m(e),f=!0)},o(t){_(e),f=!1},d(t){t&&(u(a),u(s)),e&&e.d(t)}}}function Q(o,n,a){for(const[l,s]of Object.entries(o[n]||{}))if(a==s.meta.semantic_id)return l;return"0"}function W(o,n,a){let l,s;P(o,O,i=>a(9,s=i));let f,e,t,r,g=2019,b,p="";A(()=>{z(i=>{a(4,[r,e,t]=[i||{},Q(i||{},s.params.rootType,s.params.rootId),s.params.rootType],r,a(2,e),a(3,t));let c=J.filter(k=>k.entity_type==t)[0];a(1,f=c.default_tree),a(6,b=c.start_sentence)})}),U(()=>{console.log("navigate");let i=Q(r||{},s.params.rootType,s.params.rootId);(e!=i||t!=s.params.rootType)&&a(2,[e,t]=[i,s.params.rootType],e,a(3,t)),console.log("refreshed",t);const c=s.url.searchParams.get("filter");c&&a(5,g=parseInt(c))});function T(i){p=i,a(0,p)}return o.$$.update=()=>{o.$$.dirty&1&&a(7,l=p.length>0?` - ${p}`:"")},[p,f,e,t,r,g,b,l,T]}class re extends R{constructor(n){super(),Y(this,n,W,V,F,{})}}export{re as component};

import{s as qe,f as $,a as ne,g as ee,h as B,c as se,d as b,j as f,k as T,i as Q,w as C,G as ve,A as Ve,C as je,l as Te,m as Le,n as Pe,I as Dt,e as Me,D as K,E as x,J as He,H as ye,K as lt,L as Nt,M as Xt,p as Ae,N as De,O as Ye,P as Qt,v as zt,B as Ft,o as Gt,Q as ot,R as Zt}from"../chunks/scheduler.1836b3fe.js";import{S as Ne,i as Xe,g as Se,c as ke,a as A,t as Y,b as _e,d as de,m as ge,f as he,e as pe,h as Qe}from"../chunks/index.7ef31ebf.js";import{e as ue,u as Ut,o as Yt}from"../chunks/each.11058b4e.js";import{p as Jt}from"../chunks/stores.4f3e766e.js";import{a as Kt,b as xt,S as $t,g as ei}from"../chunks/Checkbox.svelte_svelte_type_style_lang.0b29cc8b.js";import{b as ti}from"../chunks/paths.e6248879.js";import{g as Ke,h as at,m as ii,d as li,a as ni,D as ft,b as si}from"../chunks/tree-loading.c61db980.js";import{f as ce}from"../chunks/index.a3ef60df.js";import{B as nt,a as ri}from"../chunks/BrokenFittedText.18e569ca.js";import{P as oi}from"../chunks/PathLevelInfoBox.a6d1fa8c.js";function ht(t,e,i){const l=t.slice();return l[11]=e[i],l}function ut(t){let e,i=t[11]+"",l,a;return{c(){e=$("div"),l=Te(i),a=ne(),this.h()},l(s){e=ee(s,"DIV",{class:!0});var n=B(e);l=Le(n,i),n.forEach(b),a=se(s),this.h()},h(){f(e,"class","svelte-6fgk1b")},m(s,n){Q(s,e,n),C(e,l),Q(s,a,n)},p(s,n){n&1&&i!==(i=s[11]+"")&&Pe(l,i)},d(s){s&&(b(e),b(a))}}}function ai(t){let e,i,l,a,s,n,o=ue(t[0]),r=[];for(let u=0;u<o.length;u+=1)r[u]=ut(ht(t,o,u));return{c(){e=$("label"),i=$("input"),l=ne(),a=$("span");for(let u=0;u<r.length;u+=1)r[u].c();this.h()},l(u){e=ee(u,"LABEL",{class:!0,style:!0});var c=B(e);i=ee(c,"INPUT",{type:!0,class:!0}),l=se(c),a=ee(c,"SPAN",{class:!0});var h=B(a);for(let _=0;_<r.length;_+=1)r[_].l(h);h.forEach(b),c.forEach(b),this.h()},h(){f(i,"type","checkbox"),f(i,"class","svelte-6fgk1b"),f(a,"class","slider round svelte-6fgk1b"),f(e,"class","switch svelte-6fgk1b"),T(e,"--pad",t[1]+"px"),T(e,"--fw",t[4]+"px"),T(e,"--w",t[4]/2+"px"),T(e,"--tw",t[4]/2-2*t[1]+"px"),T(e,"--height",t[2]+"px"),T(e,"--full-height",t[2]+2*t[1]+"px"),T(e,"--label","'"+t[5]+"'")},m(u,c){Q(u,e,c),C(e,i),i.checked=t[3],C(e,l),C(e,a);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(a,null);s||(n=ve(i,"change",t[9]),s=!0)},p(u,[c]){if(c&8&&(i.checked=u[3]),c&1){o=ue(u[0]);let h;for(h=0;h<o.length;h+=1){const _=ht(u,o,h);r[h]?r[h].p(_,c):(r[h]=ut(_),r[h].c(),r[h].m(a,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=o.length}c&2&&T(e,"--pad",u[1]+"px"),c&16&&T(e,"--fw",u[4]+"px"),c&16&&T(e,"--w",u[4]/2+"px"),c&18&&T(e,"--tw",u[4]/2-2*u[1]+"px"),c&4&&T(e,"--height",u[2]+"px"),c&6&&T(e,"--full-height",u[2]+2*u[1]+"px"),c&32&&T(e,"--label","'"+u[5]+"'")},i:Ve,o:Ve,d(u){u&&b(e),je(r,u),s=!1,n()}}}function fi(t){return((t[0].length>t[1].length?t[0].length:t[1].length)*.8+2)*20}function hi(t,e,i){let l,a,{values:s=["On","Off"]}=e,{labels:n=s}=e,{value:o=s[0]}=e,{pad:r=5}=e,{height:u=26}=e,{width:c=void 0}=e,h=o==s[1];const _=g=>{i(6,o=g?s[1]:s[0])};function M(){h=this.checked,i(3,h)}return t.$$set=g=>{"values"in g&&i(7,s=g.values),"labels"in g&&i(0,n=g.labels),"value"in g&&i(6,o=g.value),"pad"in g&&i(1,r=g.pad),"height"in g&&i(2,u=g.height),"width"in g&&i(8,c=g.width)},t.$$.update=()=>{t.$$.dirty&9&&i(5,l=h?n[1]:n[0]),t.$$.dirty&8&&_(h),t.$$.dirty&257&&i(4,a=c||fi(n))},[n,r,u,h,a,l,o,s,c,M]}class st extends Ne{constructor(e){super(),Xe(this,e,hi,ai,qe,{values:7,labels:0,value:6,pad:1,height:2,width:8})}}function ct(t){return function(){return t}}const xe=Math.PI,$e=2*xe,Re=1e-6,ui=$e-Re;function Pt(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function ci(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Pt;const i=10**e;return function(l){this._+=l[0];for(let a=1,s=l.length;a<s;++a)this._+=Math.round(arguments[a]*i)/i+l[a]}}class _i{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Pt:ci(e)}moveTo(e,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,i){this._append`L${this._x1=+e},${this._y1=+i}`}quadraticCurveTo(e,i,l,a){this._append`Q${+e},${+i},${this._x1=+l},${this._y1=+a}`}bezierCurveTo(e,i,l,a,s,n){this._append`C${+e},${+i},${+l},${+a},${this._x1=+s},${this._y1=+n}`}arcTo(e,i,l,a,s){if(e=+e,i=+i,l=+l,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let n=this._x1,o=this._y1,r=l-e,u=a-i,c=n-e,h=o-i,_=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=i}`;else if(_>Re)if(!(Math.abs(h*r-u*c)>Re)||!s)this._append`L${this._x1=e},${this._y1=i}`;else{let M=l-n,g=a-o,m=r*r+u*u,k=M*M+g*g,L=Math.sqrt(m),V=Math.sqrt(_),W=s*Math.tan((xe-Math.acos((m+_-k)/(2*L*V)))/2),v=W/V,D=W/L;Math.abs(v-1)>Re&&this._append`L${e+v*c},${i+v*h}`,this._append`A${s},${s},0,0,${+(h*M>c*g)},${this._x1=e+D*r},${this._y1=i+D*u}`}}arc(e,i,l,a,s,n){if(e=+e,i=+i,l=+l,n=!!n,l<0)throw new Error(`negative radius: ${l}`);let o=l*Math.cos(a),r=l*Math.sin(a),u=e+o,c=i+r,h=1^n,_=n?a-s:s-a;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Re||Math.abs(this._y1-c)>Re)&&this._append`L${u},${c}`,l&&(_<0&&(_=_%$e+$e),_>ui?this._append`A${l},${l},0,1,${h},${e-o},${i-r}A${l},${l},0,1,${h},${this._x1=u},${this._y1=c}`:_>Re&&this._append`A${l},${l},0,${+(_>=xe)},${h},${this._x1=e+l*Math.cos(s)},${this._y1=i+l*Math.sin(s)}`)}rect(e,i,l,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${l=+l}v${+a}h${-l}Z`}toString(){return this._}}function di(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(i==null)e=null;else{const l=Math.floor(i);if(!(l>=0))throw new RangeError(`invalid digits: ${i}`);e=l}return t},()=>new _i(e)}var gi=Array.prototype.slice;function pi(t){return t[0]}function mi(t){return t[1]}class bi{constructor(e,i){this._context=e,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,i){switch(e=+e,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,i,e,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,e,this._y0,e,i);break}}this._x0=e,this._y0=i}}function vi(t){return new bi(t,!1)}function wi(t){return t.source}function Si(t){return t.target}function ki(t){let e=wi,i=Si,l=pi,a=mi,s=null,n=null,o=di(r);function r(){let u;const c=gi.call(arguments),h=e.apply(this,c),_=i.apply(this,c);if(s==null&&(n=t(u=o())),n.lineStart(),c[0]=h,n.point(+l.apply(this,c),+a.apply(this,c)),c[0]=_,n.point(+l.apply(this,c),+a.apply(this,c)),n.lineEnd(),u)return n=null,u+""||null}return r.source=function(u){return arguments.length?(e=u,r):e},r.target=function(u){return arguments.length?(i=u,r):i},r.x=function(u){return arguments.length?(l=typeof u=="function"?u:ct(+u),r):l},r.y=function(u){return arguments.length?(a=typeof u=="function"?u:ct(+u),r):a},r.context=function(u){return arguments.length?(u==null?s=n=null:n=t(s=u),r):s},r}function Ii(){return ki(vi)}function Ht(){return Dt()}function Be(t,e,i,l,a){return()=>{t("ti",{path:i,action:e,topLeftCorner:{x:l,y:a}})}}function _t(t,e){return()=>{t("ce",{ind:e})}}function dt(t,e,i){const l=t.slice();return l[44]=e[i].id,l[45]=e[i].cachedProps,l[46]=e[i].vizInfo,l[47]=e[i].childNode,l}function gt(t){let e,i;const l=[t[45],{qcSpec:t[0]},{attributeLabels:t[1]},{visibleTreeInfo:t[2]},{selectionState:t[3]},{levelVisuals:t[4]},{treeWidth:t[5]},{treeXOffset:t[9]},{childRate:t[6]},{overHangRate:t[7]},{preStraightRate:t[8]},{childBaseSize:t[10]},{linkSurfaceRate:t[11]},{childrenInternalMargin:t[12]},{parentSideMargin:0}];let a={};for(let s=0;s<l.length;s+=1)a=Xt(a,l[s]);return e=new Vt({props:a}),e.$on("ti",t[33]),{c(){_e(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,n){ge(e,s,n),i=!0},p(s,n){const o=n[0]&40959?Kt(l,[n[0]&32768&&xt(s[45]),n[0]&1&&{qcSpec:s[0]},n[0]&2&&{attributeLabels:s[1]},n[0]&4&&{visibleTreeInfo:s[2]},n[0]&8&&{selectionState:s[3]},n[0]&16&&{levelVisuals:s[4]},n[0]&32&&{treeWidth:s[5]},n[0]&512&&{treeXOffset:s[9]},n[0]&64&&{childRate:s[6]},n[0]&128&&{overHangRate:s[7]},n[0]&256&&{preStraightRate:s[8]},n[0]&1024&&{childBaseSize:s[10]},n[0]&2048&&{linkSurfaceRate:s[11]},n[0]&4096&&{childrenInternalMargin:s[12]},l[14]]):{};e.$set(o)},i(s){i||(A(e.$$.fragment,s),i=!0)},o(s){Y(e.$$.fragment,s),i=!1},d(s){pe(e,s)}}}function pt(t,e){let i,l,a,s,n,o,r,u,c,h,_,M,g,m,k,L,V,W,v,D,U,H,Z,j,z,J,F,R,I,X,q,P,ie,E,re,p;F=new nt({props:{text:e[47].name,width:e[46].width*.8,height:e[13]}});let w=e[47].children&&gt(e);return{key:t,first:null,c(){i=K("defs"),l=K("linearGradient"),a=K("stop"),o=K("stop"),c=K("stop"),g=ne(),m=K("path"),W=ne(),v=K("rect"),z=ne(),J=K("g"),_e(F.$$.fragment),R=ne(),I=K("rect"),P=ne(),w&&w.c(),ie=Me(),this.h()},l(d){i=x(d,"defs",{});var S=B(i);l=x(S,"linearGradient",{id:!0,gradientTransform:!0});var te=B(l);a=x(te,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),B(a).forEach(b),o=x(te,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),B(o).forEach(b),c=x(te,"stop",{offset:!0,"stop-opacity":!0,"stop-color":!0,class:!0}),B(c).forEach(b),te.forEach(b),S.forEach(b),g=se(d),m=x(d,"path",{d:!0,fill:!0,class:!0}),B(m).forEach(b),W=se(d),v=x(d,"rect",{"fill-opacity":!0,x:!0,y:!0,height:!0,width:!0,class:!0}),B(v).forEach(b),z=se(d),J=x(d,"g",{style:!0});var ae=B(J);de(F.$$.fragment,ae),ae.forEach(b),R=se(d),I=x(d,"rect",{x:!0,y:!0,"fill-opacity":!0,height:!0,width:!0,class:!0}),B(I).forEach(b),P=se(d),w&&w.l(d),ie=Me(),this.h()},h(){f(a,"offset","0%"),f(a,"stop-opacity",s=e[47].isSelected?"80%":"5%"),f(a,"stop-color",n=e[46].colorStr),f(a,"class","svelte-1cwbp37"),f(o,"offset","20%"),f(o,"stop-opacity",r=e[47].isSelected?"80%":"15%"),f(o,"stop-color",u=e[46].colorStr),f(o,"class","svelte-1cwbp37"),f(c,"offset","50%"),f(c,"stop-opacity",h=e[47].isSelected?"80%":"25%"),f(c,"stop-color",_=e[46].colorStr),f(c,"class","svelte-1cwbp37"),f(l,"id",M="path-grad-"+e[46].strId),f(l,"gradientTransform","rotate(90)"),f(m,"d",k=e[46].linkPath),f(m,"fill",L="url('#path-grad-"+e[46].strId+"')"),f(m,"class","svelte-1cwbp37"),f(v,"fill-opacity",D=.25+Math.abs(e[47].specMetric.normalizedMetric)/1.5),f(v,"x",U=e[45].xOffset),f(v,"y",H=e[14]+e[13]/2-(e[47].specMetric.normalizedMetric<0?0:e[47].specMetric.normalizedMetric*e[13]/2)),f(v,"height",Z=Math.abs(e[47].specMetric.normalizedMetric)*e[13]/2),f(v,"width",j=e[5]/20),f(v,"class","svelte-1cwbp37"),T(J,"--y-off",e[16]+"px"),T(J,"--x-off",e[45].xOffset+e[46].width*.1+"px"),f(I,"x",X=e[45].xOffset),f(I,"y",e[14]),f(I,"fill-opacity","0"),f(I,"height",e[13]),f(I,"width",q=e[46].width),f(I,"class","svelte-1cwbp37"),this.first=i},m(d,S){Q(d,i,S),C(i,l),C(l,a),C(l,o),C(l,c),Q(d,g,S),Q(d,m,S),Q(d,W,S),Q(d,v,S),Q(d,z,S),Q(d,J,S),ge(F,J,null),Q(d,R,S),Q(d,I,S),Q(d,P,S),w&&w.m(d,S),Q(d,ie,S),E=!0,re||(p=[ve(I,"mouseover",function(){He(Be(e[17],"highlight",e[45].pathInCompleteTree,e[45].xOffset+e[45].width/2,e[14]))&&Be(e[17],"highlight",e[45].pathInCompleteTree,e[45].xOffset+e[45].width/2,e[14]).apply(this,arguments)}),ve(I,"mouseleave",function(){He(Be(e[17],"de-highlight",e[45].pathInCompleteTree,0,0))&&Be(e[17],"de-highlight",e[45].pathInCompleteTree,0,0).apply(this,arguments)}),ve(I,"click",function(){He(Be(e[17],"toggle-select",e[45].pathInCompleteTree,0,0))&&Be(e[17],"toggle-select",e[45].pathInCompleteTree,0,0).apply(this,arguments)})],re=!0)},p(d,S){e=d,(!E||S[0]&32768&&s!==(s=e[47].isSelected?"80%":"5%"))&&f(a,"stop-opacity",s),(!E||S[0]&32768&&n!==(n=e[46].colorStr))&&f(a,"stop-color",n),(!E||S[0]&32768&&r!==(r=e[47].isSelected?"80%":"15%"))&&f(o,"stop-opacity",r),(!E||S[0]&32768&&u!==(u=e[46].colorStr))&&f(o,"stop-color",u),(!E||S[0]&32768&&h!==(h=e[47].isSelected?"80%":"25%"))&&f(c,"stop-opacity",h),(!E||S[0]&32768&&_!==(_=e[46].colorStr))&&f(c,"stop-color",_),(!E||S[0]&32768&&M!==(M="path-grad-"+e[46].strId))&&f(l,"id",M),(!E||S[0]&32768&&k!==(k=e[46].linkPath))&&f(m,"d",k),(!E||S[0]&32768&&L!==(L="url('#path-grad-"+e[46].strId+"')"))&&f(m,"fill",L),(!E||S[0]&32768&&D!==(D=.25+Math.abs(e[47].specMetric.normalizedMetric)/1.5))&&f(v,"fill-opacity",D),(!E||S[0]&32768&&U!==(U=e[45].xOffset))&&f(v,"x",U),(!E||S[0]&57344&&H!==(H=e[14]+e[13]/2-(e[47].specMetric.normalizedMetric<0?0:e[47].specMetric.normalizedMetric*e[13]/2)))&&f(v,"y",H),(!E||S[0]&40960&&Z!==(Z=Math.abs(e[47].specMetric.normalizedMetric)*e[13]/2))&&f(v,"height",Z),(!E||S[0]&32&&j!==(j=e[5]/20))&&f(v,"width",j);const te={};S[0]&32768&&(te.text=e[47].name),S[0]&32768&&(te.width=e[46].width*.8),S[0]&8192&&(te.height=e[13]),F.$set(te),(!E||S[0]&65536)&&T(J,"--y-off",e[16]+"px"),(!E||S[0]&32768)&&T(J,"--x-off",e[45].xOffset+e[46].width*.1+"px"),(!E||S[0]&32768&&X!==(X=e[45].xOffset))&&f(I,"x",X),(!E||S[0]&16384)&&f(I,"y",e[14]),(!E||S[0]&8192)&&f(I,"height",e[13]),(!E||S[0]&32768&&q!==(q=e[46].width))&&f(I,"width",q),e[47].children?w?(w.p(e,S),S[0]&32768&&A(w,1)):(w=gt(e),w.c(),A(w,1),w.m(ie.parentNode,ie)):w&&(Se(),Y(w,1,1,()=>{w=null}),ke())},i(d){E||(d&&ye(()=>{E&&(V||(V=he(m,ce,{duration:300},!0)),V.run(1))}),A(F.$$.fragment,d),A(w),E=!0)},o(d){d&&(V||(V=he(m,ce,{duration:300},!1)),V.run(0)),Y(F.$$.fragment,d),Y(w),E=!1},d(d){d&&(b(i),b(g),b(m),b(W),b(v),b(z),b(J),b(R),b(I),b(P),b(ie)),d&&V&&V.end(),pe(F),w&&w.d(d),re=!1,lt(p)}}}function Ei(t){let e=[],i=new Map,l,a,s=ue(t[15]);const n=o=>o[44];for(let o=0;o<s.length;o+=1){let r=dt(t,s,o),u=n(r);i.set(u,e[o]=pt(u,r))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();l=Me()},l(o){for(let r=0;r<e.length;r+=1)e[r].l(o);l=Me()},m(o,r){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(o,r);Q(o,l,r),a=!0},p(o,r){r[0]&262143&&(s=ue(o[15]),Se(),e=Ut(e,r,n,1,o,s,i,l.parentNode,Yt,pt,l,dt),ke())},i(o){if(!a){for(let r=0;r<s.length;r+=1)A(e[r]);a=!0}},o(o){for(let r=0;r<e.length;r+=1)Y(e[r]);a=!1},d(o){o&&b(l);for(let r=0;r<e.length;r+=1)e[r].d(o)}}}function mt(t,e,i,l,a,s,n){const o=c=>a*(c||0)/s,r=l+o(e),u=t+((i==null?void 0:i.rank)||0)*(l+n)+o(i==null?void 0:i.weight);return{width:r,xOffset:u}}function Oi(t,e,i){let l,a,s,n,o,r,u,c,h,_,M,g,m,k,L,V,W,v,{qcSpec:D}=e,{attributeLabels:U}=e,{visibleTreeInfo:H}=e,{selectionState:Z}=e,{levelVisuals:j=[]}=e,{pathInCompleteTree:z=[]}=e,{branchReachBack:J=0}=e,{rootWidth:F=30}=e,{treeWidth:R=70}=e,{childRate:I=.2}=e,{overHangRate:X=.05}=e,{preStraightRate:q=.05}=e,{treeXOffset:P=0}=e,{childBaseSize:ie=2.9}=e,{linkSurfaceRate:E=.8}=e,{childrenInternalMargin:re=.9}=e,{parentSideMargin:p=.8}=e,{width:w=F}=e,{xOffset:d=(R-F)/2+P}=e;const S=Ht(),te=Ii().source(O=>O.start).target(O=>O.end),ae=O=>O===void 0?0:O;function N(O,oe){var rt;const Ie={pathInCompleteTree:[...z,O],...mt(P,oe.weight,oe==null?void 0:oe.totalOffsetOnLevel,ie,W,((rt=H.meta[a])==null?void 0:rt.totalWeight)||1,re)},Ce=mt(d+p,oe.weight,oe==null?void 0:oe.totalOffsetAmongSiblings,V,k*(n>1?E:1)-V*n,(s==null?void 0:s.childrenSumWeight)||1,L),y={parent:Ce.width,child:Ie.width},G={start:[Ce.xOffset,m],end:[Ie.xOffset,M]},le={start:[G.end[0]+y.child,M],end:[G.start[0]+y.parent,m]},Ee=c+(oe.isSelected?_:0),be=`${te(G)} v ${Ee} h ${y.child}`,qt=`v ${-Ee} ${te(le)} v ${-h-J} h ${-y.parent}`,At=be+qt+` v ${h+J}`;return{id:O,cachedProps:Ie,vizInfo:{linkPath:At,width:y.child,colorStr:ri(oe.scaleEnds.mid),strId:Ie.pathInCompleteTree.join("-")},childNode:oe}}function fe(O,oe){return Object.entries((O==null?void 0:O.children)||{}).map(([Ie,Ce])=>N(Ie,Ce))}function me(O){Nt.call(this,t,O)}return t.$$set=O=>{"qcSpec"in O&&i(0,D=O.qcSpec),"attributeLabels"in O&&i(1,U=O.attributeLabels),"visibleTreeInfo"in O&&i(2,H=O.visibleTreeInfo),"selectionState"in O&&i(3,Z=O.selectionState),"levelVisuals"in O&&i(4,j=O.levelVisuals),"pathInCompleteTree"in O&&i(18,z=O.pathInCompleteTree),"branchReachBack"in O&&i(19,J=O.branchReachBack),"rootWidth"in O&&i(20,F=O.rootWidth),"treeWidth"in O&&i(5,R=O.treeWidth),"childRate"in O&&i(6,I=O.childRate),"overHangRate"in O&&i(7,X=O.overHangRate),"preStraightRate"in O&&i(8,q=O.preStraightRate),"treeXOffset"in O&&i(9,P=O.treeXOffset),"childBaseSize"in O&&i(10,ie=O.childBaseSize),"linkSurfaceRate"in O&&i(11,E=O.linkSurfaceRate),"childrenInternalMargin"in O&&i(12,re=O.childrenInternalMargin),"parentSideMargin"in O&&i(21,p=O.parentSideMargin),"width"in O&&i(22,w=O.width),"xOffset"in O&&i(23,d=O.xOffset)},t.$$.update=()=>{var O;t.$$.dirty[0]&262144&&i(32,l=z.length),t.$$.dirty[1]&2&&i(29,a=l+1),t.$$.dirty[0]&262148&&i(25,s=Ke(z,H.tree)),t.$$.dirty[0]&33554432&&i(27,n=Object.keys((s==null?void 0:s.children)||{}).length),t.$$.dirty[0]&16|t.$$.dirty[1]&2&&i(24,o=j[l]),t.$$.dirty[0]&4|t.$$.dirty[1]&2&&H.meta[l].totalNodes,t.$$.dirty[0]&536870916&&i(30,r=((O=H.meta[a])==null?void 0:O.totalNodes)||0),t.$$.dirty[0]&16777664&&i(31,[u,c,h,_]=[o==null?void 0:o.topOffset,...[I,q,X].map(oe=>(o==null?void 0:o.totalSize)*oe)].map(ae),u,(i(13,c),i(24,o),i(6,I),i(8,q),i(7,X),i(4,j),i(32,l),i(18,z)),(i(26,h),i(24,o),i(6,I),i(8,q),i(7,X),i(4,j),i(32,l),i(18,z))),t.$$.dirty[0]&16777536|t.$$.dirty[1]&1&&i(14,M=u+ae((o==null?void 0:o.totalSize)*(1-I-q))),t.$$.dirty[0]&24576&&i(16,g=M+c),t.$$.dirty[0]&67108864|t.$$.dirty[1]&1&&(m=u+h),t.$$.dirty[0]&6291456&&i(28,k=w-2*p),t.$$.dirty[0]&402655232&&(L=k*(1-E)/(n>1?n-1:1)),t.$$.dirty[0]&402655232&&(V=k*E/(n*1.8)),t.$$.dirty[0]&1073746976&&(W=R-ie*r-re*(r-1)),t.$$.dirty[0]&50331648&&i(15,v=fe(s))},[D,U,H,Z,j,R,I,X,q,P,ie,E,re,c,M,v,g,S,z,J,F,p,w,d,o,s,h,n,k,a,r,u,l,me]}class Vt extends Ne{constructor(e){super(),Xe(this,e,Oi,Ei,qe,{qcSpec:0,attributeLabels:1,visibleTreeInfo:2,selectionState:3,levelVisuals:4,pathInCompleteTree:18,branchReachBack:19,rootWidth:20,treeWidth:5,childRate:6,overHangRate:7,preStraightRate:8,treeXOffset:9,childBaseSize:10,linkSurfaceRate:11,childrenInternalMargin:12,parentSideMargin:21,width:22,xOffset:23},null,[-1,-1])}}function Mi(t){let e,i,l,a,s,n,o,r,u,c;return{c(){e=K("path"),l=ne(),a=K("path"),n=ne(),o=K("g"),r=K("path"),this.h()},l(h){e=x(h,"path",{d:!0,fill:!0,"fill-opacity":!0,class:!0}),B(e).forEach(b),l=se(h),a=x(h,"path",{d:!0,fill:!0,class:!0}),B(a).forEach(b),n=se(h),o=x(h,"g",{style:!0,class:!0});var _=B(o);r=x(_,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,fill:!0,class:!0}),B(r).forEach(b),_.forEach(b),this.h()},h(){f(e,"d",i="M0 0 H"+t[0]+" V"+t[0]+" H0 V0 Z"),f(e,"fill","var(--color-theme-blue)"),f(e,"fill-opacity","0.7"),f(e,"class","svelte-12wtsp1"),f(a,"d",s="M0 "+t[2]+" H"+t[0]+" V0 H0 V0 Z"),f(a,"fill","var(--color-theme-lightblue)"),f(a,"class","svelte-12wtsp1"),f(r,"d",u="M"+t[0]*Fe+" "+t[3]+" L"+t[0]*.5+" "+t[0]*Ge+" L"+t[0]*(1-Fe)+" "+t[3]),f(r,"stroke","var(--color-theme-white)"),f(r,"stroke-width",c=bt*t[0]),f(r,"stroke-linecap","round"),f(r,"stroke-linejoin","round"),f(r,"fill","none"),f(r,"class","svelte-12wtsp1"),T(o,"--rot",t[1]+"deg"),T(o,"--rx",t[0]/2+"px"),T(o,"--ry",t[0]*(et+Ge)/2+"px"),f(o,"class","svelte-12wtsp1")},m(h,_){Q(h,e,_),Q(h,l,_),Q(h,a,_),Q(h,n,_),Q(h,o,_),C(o,r)},p(h,[_]){_&1&&i!==(i="M0 0 H"+h[0]+" V"+h[0]+" H0 V0 Z")&&f(e,"d",i),_&5&&s!==(s="M0 "+h[2]+" H"+h[0]+" V0 H0 V0 Z")&&f(a,"d",s),_&9&&u!==(u="M"+h[0]*Fe+" "+h[3]+" L"+h[0]*.5+" "+h[0]*Ge+" L"+h[0]*(1-Fe)+" "+h[3])&&f(r,"d",u),_&1&&c!==(c=bt*h[0])&&f(r,"stroke-width",c),_&2&&T(o,"--rot",h[1]+"deg"),_&1&&T(o,"--rx",h[0]/2+"px"),_&1&&T(o,"--ry",h[0]*(et+Ge)/2+"px")},i:Ve,o:Ve,d(h){h&&(b(e),b(l),b(a),b(n),b(o))}}}let yi=.13,Fe=.15,Ge=.78,et=.34,bt=.08;function Ri(t,e,i){let l,a,{size:s=3}=e,{rotated:n=0}=e,{text:o="expand"}=e;return t.$$set=r=>{"size"in r&&i(0,s=r.size),"rotated"in r&&i(1,n=r.rotated),"text"in r&&i(4,o=r.text)},t.$$.update=()=>{t.$$.dirty&1&&i(3,l=s*et),t.$$.dirty&1&&i(2,a=s*yi)},[s,n,a,l,o]}class Ti extends Ne{constructor(e){super(),Xe(this,e,Ri,Mi,qe,{size:0,rotated:1,text:4})}}function vt(t,e,i){const l=t.slice();return l[36]=e[i],l[37]=e,l[38]=i,l}function wt(t,e,i){const l=t.slice();return l[39]=e[i],l}function St(t){var J,F;let e,i,l,a,s,n,o,r,u,c,h,_,M,g,m,k,L,V,W,v,D,U;n=new nt({props:{text:((F=(J=t[4])==null?void 0:J.bifurcations[t[1]])==null?void 0:F.description)||"",width:t[2]*.9,height:t[10]*2}}),r=new Ti({props:{size:t[10],text:t[18]?"collapse":"expand",rotated:t[18]?180:0}});function H(R){t[32](R)}let Z={values:t[22],width:t[19]};t[0][t[1]].size_base!==void 0&&(Z.value=t[0][t[1]].size_base),M=new st({props:Z}),Ae.push(()=>Qe(M,"value",H));let j=t[14]>2.8&&kt(t),z=t[18]&&It(t);return{c(){e=K("g"),i=K("rect"),s=K("g"),_e(n.$$.fragment),o=K("g"),_e(r.$$.fragment),u=K("g"),c=K("foreignObject"),h=$("div"),_=$("div"),_e(M.$$.fragment),m=ne(),j&&j.c(),k=ne(),z&&z.c(),this.h()},l(R){e=x(R,"g",{style:!0});var I=B(e);i=x(I,"rect",{fill:!0,"fill-opacity":!0,x:!0,height:!0,width:!0,class:!0}),B(i).forEach(b),s=x(I,"g",{style:!0});var X=B(s);de(n.$$.fragment,X),X.forEach(b),o=x(I,"g",{style:!0});var q=B(o);de(r.$$.fragment,q),q.forEach(b),u=x(I,"g",{style:!0});var P=B(u);c=x(P,"foreignObject",{width:!0,height:!0,transform:!0});var ie=B(c);h=ee(ie,"DIV",{class:!0,style:!0});var E=B(h);_=ee(E,"DIV",{id:!0,class:!0});var re=B(_);de(M.$$.fragment,re),re.forEach(b),m=se(E),j&&j.l(E),k=se(E),z&&z.l(E),E.forEach(b),ie.forEach(b),P.forEach(b),I.forEach(b),this.h()},h(){f(i,"fill","grey"),f(i,"fill-opacity",l=t[18]?.5:.3),f(i,"x",a=-t[16]),f(i,"height",t[11]),f(i,"width",t[3]),f(i,"class","svelte-o245wa"),T(s,"--x-off",t[2]*.1+"px"),T(s,"--y-off",-.5+"px"),T(o,"--x-off",t[2]*.85+"px"),T(o,"--y-off",t[15]+"px"),f(_,"id","spec-checkbox"),f(_,"class","svelte-o245wa"),f(h,"class","main-controls svelte-o245wa"),T(h,"--full-width",t[7]+"px"),T(h,"--slider-width",t[19]+"px"),T(h,"--label-width",Je+"px"),T(h,"--thumb-width",it+"px"),T(h,"--slider-height",tt+"px"),T(h,"--thumb-height",t[20]+"px"),f(c,"width",t[7]),f(c,"height",L=t[11]/t[12]*1.5),f(c,"transform",V="scale("+t[12]+","+t[12]+")"),T(u,"--y-off",t[15]+"px"),T(e,"--y-off",t[17]+"px"),T(e,"--x-off",t[16]+"px")},m(R,I){Q(R,e,I),C(e,i),C(e,s),ge(n,s,null),C(e,o),ge(r,o,null),C(e,u),C(u,c),C(c,h),C(h,_),ge(M,_,null),C(h,m),j&&j.m(h,null),C(h,k),z&&z.m(h,null),v=!0,D||(U=ve(o,"click",function(){He(_t(t[21],t[1]))&&_t(t[21],t[1]).apply(this,arguments)}),D=!0)},p(R,I){var ie,E;t=R,(!v||I[0]&262144&&l!==(l=t[18]?.5:.3))&&f(i,"fill-opacity",l),(!v||I[0]&65536&&a!==(a=-t[16]))&&f(i,"x",a),(!v||I[0]&2048)&&f(i,"height",t[11]),(!v||I[0]&8)&&f(i,"width",t[3]);const X={};I[0]&18&&(X.text=((E=(ie=t[4])==null?void 0:ie.bifurcations[t[1]])==null?void 0:E.description)||""),I[0]&4&&(X.width=t[2]*.9),I[0]&1024&&(X.height=t[10]*2),n.$set(X),(!v||I[0]&4)&&T(s,"--x-off",t[2]*.1+"px");const q={};I[0]&1024&&(q.size=t[10]),I[0]&262144&&(q.text=t[18]?"collapse":"expand"),I[0]&262144&&(q.rotated=t[18]?180:0),r.$set(q),(!v||I[0]&4)&&T(o,"--x-off",t[2]*.85+"px"),(!v||I[0]&32768)&&T(o,"--y-off",t[15]+"px");const P={};I[0]&524288&&(P.width=t[19]),!g&&I[0]&3&&(g=!0,P.value=t[0][t[1]].size_base,De(()=>g=!1)),M.$set(P),t[14]>2.8?j?(j.p(t,I),I[0]&16384&&A(j,1)):(j=kt(t),j.c(),A(j,1),j.m(h,k)):j&&(Se(),Y(j,1,1,()=>{j=null}),ke()),t[18]?z?(z.p(t,I),I[0]&262144&&A(z,1)):(z=It(t),z.c(),A(z,1),z.m(h,null)):z&&(Se(),Y(z,1,1,()=>{z=null}),ke()),(!v||I[0]&128)&&T(h,"--full-width",t[7]+"px"),(!v||I[0]&524288)&&T(h,"--slider-width",t[19]+"px"),(!v||I[0]&128)&&f(c,"width",t[7]),(!v||I[0]&6144&&L!==(L=t[11]/t[12]*1.5))&&f(c,"height",L),(!v||I[0]&4096&&V!==(V="scale("+t[12]+","+t[12]+")"))&&f(c,"transform",V),(!v||I[0]&32768)&&T(u,"--y-off",t[15]+"px"),(!v||I[0]&131072)&&T(e,"--y-off",t[17]+"px"),(!v||I[0]&65536)&&T(e,"--x-off",t[16]+"px")},i(R){v||(A(n.$$.fragment,R),A(r.$$.fragment,R),A(M.$$.fragment,R),A(j),A(z),R&&ye(()=>{v&&(W||(W=he(e,ce,{duration:1e3},!0)),W.run(1))}),v=!0)},o(R){Y(n.$$.fragment,R),Y(r.$$.fragment,R),Y(M.$$.fragment,R),Y(j),Y(z),R&&(W||(W=he(e,ce,{duration:1e3},!1)),W.run(0)),v=!1},d(R){R&&b(e),pe(n),pe(r),pe(M),j&&j.d(),z&&z.d(),R&&W&&W.end(),D=!1,U()}}}function kt(t){let e,i,l,a,s,n,o,r,u,c,h,_,M=t[0][t[1]].limit_n+"",g,m,k,L,V;return{c(){e=$("div"),i=$("div"),l=$("span"),a=Te(t[6]),s=ne(),n=$("input"),o=ne(),r=$("span"),u=Te(t[5]),c=ne(),h=$("label"),_=Te("show "),g=Te(M),this.h()},l(W){e=ee(W,"DIV",{id:!0,style:!0,class:!0});var v=B(e);i=ee(v,"DIV",{id:!0,class:!0});var D=B(i);l=ee(D,"SPAN",{class:!0});var U=B(l);a=Le(U,t[6]),U.forEach(b),s=se(D),n=ee(D,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),o=se(D),r=ee(D,"SPAN",{class:!0});var H=B(r);u=Le(H,t[5]),H.forEach(b),D.forEach(b),c=se(v),h=ee(v,"LABEL",{for:!0,class:!0});var Z=B(h);_=Le(Z,"show "),g=Le(Z,M),Z.forEach(b),v.forEach(b),this.h()},h(){f(l,"class","svelte-o245wa"),f(n,"id","topn-input"),f(n,"type","range"),f(n,"min",t[6]),f(n,"max",t[5]),f(n,"class","svelte-o245wa"),f(r,"class","svelte-o245wa"),f(i,"id","topn-slider"),f(i,"class","svelte-o245wa"),f(h,"for","topn-input"),f(h,"class","svelte-o245wa"),f(e,"id","topn-control"),T(e,"--r",Je+(t[19]-it)*(t[0][t[1]].limit_n-t[6])/(t[5]-t[6])+"px"),f(e,"class","svelte-o245wa")},m(W,v){Q(W,e,v),C(e,i),C(i,l),C(l,a),C(i,s),C(i,n),Ye(n,t[0][t[1]].limit_n),C(i,o),C(i,r),C(r,u),C(e,c),C(e,h),C(h,_),C(h,g),k=!0,L||(V=[ve(n,"change",t[33]),ve(n,"input",t[33])],L=!0)},p(W,v){t=W,(!k||v[0]&64)&&Pe(a,t[6]),(!k||v[0]&64)&&f(n,"min",t[6]),(!k||v[0]&32)&&f(n,"max",t[5]),v[0]&3&&Ye(n,t[0][t[1]].limit_n),(!k||v[0]&32)&&Pe(u,t[5]),(!k||v[0]&3)&&M!==(M=t[0][t[1]].limit_n+"")&&Pe(g,M),(!k||v[0]&524387)&&T(e,"--r",Je+(t[19]-it)*(t[0][t[1]].limit_n-t[6])/(t[5]-t[6])+"px")},i(W){k||(W&&ye(()=>{k&&(m||(m=he(e,ce,{duration:We},!0)),m.run(1))}),k=!0)},o(W){W&&(m||(m=he(e,ce,{duration:We},!1)),m.run(0)),k=!1},d(W){W&&b(e),W&&m&&m.end(),L=!1,lt(V)}}}function It(t){let e,i,l,a,s,n,o,r;function u(g){t[34](g)}let c={values:t[23],width:t[19]};t[8]!==void 0&&(c.value=t[8]),i=new st({props:c}),Ae.push(()=>Qe(i,"value",u));let h=ue(["include","exclude"]),_=[];for(let g=0;g<2;g+=1)_[g]=Ot(vt(t,h,g));const M=g=>Y(_[g],1,1,()=>{_[g]=null});return{c(){e=$("div"),_e(i.$$.fragment),s=ne(),n=$("div");for(let g=0;g<2;g+=1)_[g].c();this.h()},l(g){e=ee(g,"DIV",{id:!0,class:!0});var m=B(e);de(i.$$.fragment,m),m.forEach(b),s=se(g),n=ee(g,"DIV",{class:!0});var k=B(n);for(let L=0;L<2;L+=1)_[L].l(k);k.forEach(b),this.h()},h(){f(e,"id","side-checkbox"),f(e,"class","svelte-o245wa"),f(n,"class","sub-controls")},m(g,m){Q(g,e,m),ge(i,e,null),Q(g,s,m),Q(g,n,m);for(let k=0;k<2;k+=1)_[k]&&_[k].m(n,null);r=!0},p(g,m){t=g;const k={};if(m[0]&524288&&(k.width=t[19]),!l&&m[0]&256&&(l=!0,k.value=t[8],De(()=>l=!1)),i.$set(k),m[0]&50339843){h=ue(["include","exclude"]);let L;for(L=0;L<2;L+=1){const V=vt(t,h,L);_[L]?(_[L].p(V,m),A(_[L],1)):(_[L]=Ot(V),_[L].c(),A(_[L],1),_[L].m(n,null))}for(Se(),L=2;L<2;L+=1)M(L);ke()}},i(g){if(!r){A(i.$$.fragment,g),g&&ye(()=>{r&&(a||(a=he(e,ce,{duration:We},!0)),a.run(1))});for(let m=0;m<2;m+=1)A(_[m]);g&&ye(()=>{r&&(o||(o=he(n,ce,{duration:We},!0)),o.run(1))}),r=!0}},o(g){Y(i.$$.fragment,g),g&&(a||(a=he(e,ce,{duration:We},!1)),a.run(0)),_=_.filter(Boolean);for(let m=0;m<2;m+=1)Y(_[m]);g&&(o||(o=he(n,ce,{duration:We},!1)),o.run(0)),r=!1},d(g){g&&(b(e),b(s),b(n)),pe(i),g&&a&&a.end(),je(_,g),g&&o&&o.end()}}}function Li(t){let e;return{c(){e=$("span"),this.h()},l(i){e=ee(i,"SPAN",{slot:!0}),B(e).forEach(b),this.h()},h(){f(e,"slot","tag")},m(i,l){Q(i,e,l)},p:Ve,d(i){i&&b(e)}}}function Et(t){let e,i=t[25](t[39])+"",l,a,s,n="âœ–",o,r;return{c(){e=$("span"),l=Te(i),a=ne(),s=$("span"),s.textContent=n,this.h()},l(u){e=ee(u,"SPAN",{class:!0});var c=B(e);l=Le(c,i),a=se(c),s=ee(c,"SPAN",{class:!0,"data-svelte-h":!0}),zt(s)!=="svelte-1se0onn"&&(s.textContent=n),c.forEach(b),this.h()},h(){f(s,"class","clear-button svelte-o245wa"),f(e,"class","selected-card svelte-o245wa")},m(u,c){Q(u,e,c),C(e,l),C(e,a),C(e,s),o||(r=ve(s,"click",function(){He(t[24](t[39],t[36]))&&t[24](t[39],t[36]).apply(this,arguments)}),o=!0)},p(u,c){t=u,c[0]&3&&i!==(i=t[25](t[39])+"")&&Pe(l,i)},d(u){u&&b(e),o=!1,r()}}}function Ot(t){let e,i,l,a,s,n,o;function r(_){t[35](_,t[36])}let u={items:t[13],className:"sub-input-selector",inputClassName:"sub-input-box",multiple:!0,hideArrow:!0,labelFunction:t[25],maxItemsToShowInList:5,placeholder:t[36],$$slots:{tag:[Li]},$$scope:{ctx:t}};t[0][t[1]][t[36]]!==void 0&&(u.value=t[0][t[1]][t[36]]),i=new $t({props:u}),Ae.push(()=>Qe(i,"value",r));let c=ue(t[0][t[1]][t[36]]),h=[];for(let _=0;_<c.length;_+=1)h[_]=Et(wt(t,c,_));return{c(){e=$("div"),_e(i.$$.fragment),a=ne(),s=$("div");for(let _=0;_<h.length;_+=1)h[_].c();n=ne(),this.h()},l(_){e=ee(_,"DIV",{class:!0});var M=B(e);de(i.$$.fragment,M),M.forEach(b),a=se(_),s=ee(_,"DIV",{class:!0});var g=B(s);for(let m=0;m<h.length;m+=1)h[m].l(g);n=se(g),g.forEach(b),this.h()},h(){f(e,"class","sub-input svelte-o245wa"),f(s,"class","card-set svelte-o245wa")},m(_,M){Q(_,e,M),ge(i,e,null),Q(_,a,M),Q(_,s,M);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(s,null);C(s,n),o=!0},p(_,M){t=_;const g={};if(M[0]&8192&&(g.items=t[13]),M[1]&2048&&(g.$$scope={dirty:M,ctx:t}),!l&&M[0]&3&&(l=!0,g.value=t[0][t[1]][t[36]],De(()=>l=!1)),i.$set(g),M[0]&50331651){c=ue(t[0][t[1]][t[36]]);let m;for(m=0;m<c.length;m+=1){const k=wt(t,c,m);h[m]?h[m].p(k,M):(h[m]=Et(k),h[m].c(),h[m].m(s,n))}for(;m<h.length;m+=1)h[m].d(1);h.length=c.length}},i(_){o||(A(i.$$.fragment,_),o=!0)},o(_){Y(i.$$.fragment,_),o=!1},d(_){_&&(b(e),b(a),b(s)),pe(i),je(h,_)}}}function Ci(t){let e,i,l=t[9]!=null&&St(t);return{c(){l&&l.c(),e=Me()},l(a){l&&l.l(a),e=Me()},m(a,s){l&&l.m(a,s),Q(a,e,s),i=!0},p(a,s){a[9]!=null?l?(l.p(a,s),s[0]&512&&A(l,1)):(l=St(a),l.c(),A(l,1),l.m(e.parentNode,e)):l&&(Se(),Y(l,1,1,()=>{l=null}),ke())},i(a){i||(A(l),i=!0)},o(a){Y(l),i=!1},d(a){a&&b(e),l&&l.d(a)}}}let We=200,Je=30,tt=30,it=80;function Bi(t,e,i){let l,a,s,n,o,r,u,c,h,_,M,g,{lVis:m}=e,{index:k}=e,{expandedIndex:L}=e,{childRate:V}=e,{overHangRate:W}=e,{sideBarWidth:v}=e,{svgWidth:D}=e,{currentQcSpec:U}=e,{controlSpecs:H}=e,{attributeLabels:Z}=e,{maxOnOneLevel:j=15}=e,{minShow:z=1}=e,{controlHtmlWidth:J=320}=e,F=tt-4;const R=Ht();let I=["volume","specialization"],X=["highest","lowest"],q=H[k].show_top?"highest":"lowest";function P(d,S){return()=>{i(0,H[k][S]=H[k][S].filter(te=>te!=d),H)}}function ie(d){var S;return((S=M[d])==null?void 0:S.name)||"Unknown"}function E(d){t.$$.not_equal(H[k].size_base,d)&&(H[k].size_base=d,i(0,H),i(1,k),i(8,q))}function re(){H[k].limit_n=Qt(this.value),i(0,H),i(1,k),i(8,q)}function p(d){q=d,i(8,q)}function w(d,S){t.$$.not_equal(H[k][S],d)&&(H[k][S]=d,i(0,H),i(1,k),i(8,q))}return t.$$set=d=>{"lVis"in d&&i(26,m=d.lVis),"index"in d&&i(1,k=d.index),"expandedIndex"in d&&i(27,L=d.expandedIndex),"childRate"in d&&i(28,V=d.childRate),"overHangRate"in d&&i(29,W=d.overHangRate),"sideBarWidth"in d&&i(2,v=d.sideBarWidth),"svgWidth"in d&&i(3,D=d.svgWidth),"currentQcSpec"in d&&i(4,U=d.currentQcSpec),"controlSpecs"in d&&i(0,H=d.controlSpecs),"attributeLabels"in d&&i(30,Z=d.attributeLabels),"maxOnOneLevel"in d&&i(5,j=d.maxOnOneLevel),"minShow"in d&&i(6,z=d.minShow),"controlHtmlWidth"in d&&i(7,J=d.controlHtmlWidth)},t.$$.update=()=>{t.$$.dirty[0]&128&&i(19,l=J-Je*2),t.$$.dirty[0]&134217730&&i(18,a=k==L),t.$$.dirty[0]&18&&i(9,s=U==null?void 0:U.bifurcations[k]),t.$$.dirty[0]&872415232&&i(17,n=m.topOffset+m.totalSize-m.totalSize*(V+W)),t.$$.dirty[0]&335544320&&i(11,o=m.totalSize*V),t.$$.dirty[0]&4&&i(16,r=v*.02),t.$$.dirty[0]&2048&&i(15,u=o*.03),t.$$.dirty[0]&132&&i(12,c=v*.85/J),t.$$.dirty[0]&4096&&i(10,h=tt*c),t.$$.dirty[0]&3072&&i(14,_=o/h),t.$$.dirty[0]&1073742336&&i(31,M=Z[s==null?void 0:s.attribute_kind]||{}),t.$$.dirty[1]&1&&i(13,g=Object.keys(M)),t.$$.dirty[0]&258&&(d=>{i(0,H[k].show_top=d=="highest",H)})(q)},[H,k,v,D,U,j,z,J,q,s,h,o,c,g,_,u,r,n,a,l,F,R,I,X,P,ie,m,L,V,W,Z,M,E,re,p,w]}class Wi extends Ne{constructor(e){super(),Xe(this,e,Bi,Ci,qe,{lVis:26,index:1,expandedIndex:27,childRate:28,overHangRate:29,sideBarWidth:2,svgWidth:3,currentQcSpec:4,controlSpecs:0,attributeLabels:30,maxOnOneLevel:5,minShow:6,controlHtmlWidth:7},null,[-1,-1])}}function Mt(t,e,i){const l=t.slice();return l[47]=e[i],l[49]=i,l}function yt(t,e,i){const l=t.slice();return l[50]=e[i][0],l[51]=e[i][1],l}function Rt(t){var re;let e,i,l,a,s,n,o,r,u,c,h,_,M="Infobox on Hover",g,m,k,L,V,W,v,D,U,H,Z,j,z,J=!1,F=ue(Object.entries(t[5])),R=[];for(let p=0;p<F.length;p+=1)R[p]=Tt(yt(t,F,p));function I(p){t[33](p)}let X={values:[!0,!1],labels:["On","Off"]};t[4]!==void 0&&(X.value=t[4]),m=new st({props:X}),Ae.push(()=>Qe(m,"value",I));let q=ue(t[19]||[]),P=[];for(let p=0;p<q.length;p+=1)P[p]=Lt(Mt(t,q,p));const ie=p=>Y(P[p],1,1,()=>{P[p]=null});v=new Vt({props:{qcSpec:t[14],branchReachBack:t[20],xOffset:t[25],rootWidth:Ze,attributeLabels:t[9],visibleTreeInfo:t[13],selectionState:t[12],levelVisuals:t[19],treeWidth:t[23],treeXOffset:t[24],childRate:t[17],overHangRate:jt,childBaseSize:Vi}}),v.$on("ti",t[27]),U=new nt({props:{height:t[20]-2,width:Ze,text:((re=t[8])==null?void 0:re.name)||"",anchor:"middle"}});let E=t[18]!=null&&Ct(t);return{c(){e=K("svg"),i=K("rect"),a=K("rect"),n=K("foreignObject"),o=$("div"),r=$("div"),u=$("select");for(let p=0;p<R.length;p+=1)R[p].c();c=ne(),h=$("div"),_=$("span"),_.textContent=M,g=ne(),_e(m.$$.fragment),L=ne();for(let p=0;p<P.length;p+=1)P[p].c();W=Me(),_e(v.$$.fragment),D=K("g"),_e(U.$$.fragment),E&&E.c(),this.h()},l(p){e=x(p,"svg",{viewBox:!0,xmlns:!0});var w=B(e);i=x(w,"rect",{fill:!0,"fill-opacity":!0,x:!0,y:!0,height:!0,width:!0}),B(i).forEach(b),a=x(w,"rect",{id:!0,y:!0,x:!0,width:!0,height:!0,class:!0}),B(a).forEach(b),n=x(w,"foreignObject",{y:!0,width:!0,height:!0,transform:!0});var d=B(n);o=ee(d,"DIV",{style:!0});var S=B(o);r=ee(S,"DIV",{id:!0,class:!0});var te=B(r);u=ee(te,"SELECT",{class:!0});var ae=B(u);for(let me=0;me<R.length;me+=1)R[me].l(ae);ae.forEach(b),te.forEach(b),c=se(S),h=ee(S,"DIV",{id:!0,class:!0});var N=B(h);_=ee(N,"SPAN",{class:!0,"data-svelte-h":!0}),zt(_)!=="svelte-1amfah6"&&(_.textContent=M),g=se(N),de(m.$$.fragment,N),N.forEach(b),L=se(S),S.forEach(b),d.forEach(b);for(let me=0;me<P.length;me+=1)P[me].l(w);W=Me(),de(v.$$.fragment,w),D=x(w,"g",{style:!0});var fe=B(D);de(U.$$.fragment,fe),fe.forEach(b),E&&E.l(w),w.forEach(b),this.h()},h(){f(i,"fill","grey"),f(i,"fill-opacity",.3),f(i,"x",0),f(i,"y",l=-t[20]),f(i,"height",t[20]),f(i,"width",Oe),f(a,"id","qc-header"),f(a,"y",s=-t[20]),f(a,"x",t[25]),f(a,"width",Ze),f(a,"height",t[20]),f(a,"class","svelte-14evmle"),f(u,"class","svelte-14evmle"),t[6]===void 0&&ye(()=>t[31].call(u)),f(r,"id","qc-type-selector"),f(r,"class","svelte-14evmle"),f(_,"class","svelte-14evmle"),f(h,"id","hover-check"),f(h,"class","svelte-14evmle"),T(o,"padding","20px"),f(n,"y",V=-t[20]/we),f(n,"width",ze/we),f(n,"height",500),f(n,"transform","scale("+we+","+we+")"),T(D,"--x-off",t[25]+Ze/2+"px"),T(D,"--y-off","-1px"),f(e,"viewBox",H="0 "+(-t[20]-t[21])+" "+Oe+" "+t[15]),f(e,"xmlns","http://www.w3.org/2000/svg")},m(p,w){Q(p,e,w),C(e,i),C(e,a),C(e,n),C(n,o),C(o,r),C(r,u);for(let d=0;d<R.length;d+=1)R[d]&&R[d].m(u,null);ot(u,t[6],!0),C(o,c),C(o,h),C(h,_),C(h,g),ge(m,h,null),C(o,L);for(let d=0;d<P.length;d+=1)P[d]&&P[d].m(e,null);C(e,W),ge(v,e,null),C(e,D),ge(U,D,null),E&&E.m(e,null),Z=!0,j||(z=[ve(u,"change",t[31]),ve(u,"change",t[32])],j=!0)},p(p,w){var ae;if((!Z||w[0]&1048576&&l!==(l=-p[20]))&&f(i,"y",l),(!Z||w[0]&1048576)&&f(i,"height",p[20]),(!Z||w[0]&1048576&&s!==(s=-p[20]))&&f(a,"y",s),(!Z||w[0]&1048576)&&f(a,"height",p[20]),w[0]&32){F=ue(Object.entries(p[5]));let N;for(N=0;N<F.length;N+=1){const fe=yt(p,F,N);R[N]?R[N].p(fe,w):(R[N]=Tt(fe),R[N].c(),R[N].m(u,null))}for(;N<R.length;N+=1)R[N].d(1);R.length=F.length}w[0]&96&&ot(u,p[6]);const d={};if(!k&&w[0]&16&&(k=!0,d.value=p[4],De(()=>k=!1)),m.$set(d),(!Z||w[0]&1048576&&V!==(V=-p[20]/we))&&f(n,"y",V),w[0]&67782152){q=ue(p[19]||[]);let N;for(N=0;N<q.length;N+=1){const fe=Mt(p,q,N);P[N]?(P[N].p(fe,w),A(P[N],1)):(P[N]=Lt(fe),P[N].c(),A(P[N],1),P[N].m(e,W))}for(Se(),N=q.length;N<P.length;N+=1)ie(N);ke()}const S={};w[0]&16384&&(S.qcSpec=p[14]),w[0]&1048576&&(S.branchReachBack=p[20]),w[0]&512&&(S.attributeLabels=p[9]),w[0]&8192&&(S.visibleTreeInfo=p[13]),w[0]&4096&&(S.selectionState=p[12]),w[0]&524288&&(S.levelVisuals=p[19]),w[0]&131072&&(S.childRate=p[17]),v.$set(S);const te={};w[0]&1048576&&(te.height=p[20]-2),w[0]&256&&(te.text=((ae=p[8])==null?void 0:ae.name)||""),U.$set(te),p[18]!=null?E?(E.p(p,w),w[0]&262144&&A(E,1)):(E=Ct(p),E.c(),A(E,1),E.m(e,null)):E&&(Se(),Y(E,1,1,()=>{E=null}),ke()),(!Z||w[0]&3178496&&H!==(H="0 "+(-p[20]-p[21])+" "+Oe+" "+p[15]))&&f(e,"viewBox",H)},i(p){if(!Z){A(J),A(m.$$.fragment,p);for(let w=0;w<q.length;w+=1)A(P[w]);A(v.$$.fragment,p),A(U.$$.fragment,p),A(E),Z=!0}},o(p){Y(J),Y(m.$$.fragment,p),P=P.filter(Boolean);for(let w=0;w<P.length;w+=1)Y(P[w]);Y(v.$$.fragment,p),Y(U.$$.fragment,p),Y(E),Z=!1},d(p){p&&b(e),je(R,p),pe(m),je(P,p),pe(v),pe(U),E&&E.d(),j=!1,lt(z)}}}function Tt(t){let e,i=t[51].title+"",l,a,s;return{c(){e=$("option"),l=Te(i),a=ne(),this.h()},l(n){e=ee(n,"OPTION",{class:!0});var o=B(e);l=Le(o,i),a=se(o),o.forEach(b),this.h()},h(){e.__value=s=t[50],Ye(e,e.__value),f(e,"class","svelte-14evmle")},m(n,o){Q(n,e,o),C(e,l),C(e,a)},p(n,o){o[0]&32&&i!==(i=n[51].title+"")&&Pe(l,i),o[0]&32&&s!==(s=n[50])&&(e.__value=s,Ye(e,e.__value))},d(n){n&&b(e)}}}function Lt(t){let e,i,l;function a(n){t[34](n)}let s={lVis:t[47],index:t[49],childRate:t[17],overHangRate:jt,sideBarWidth:ze,svgWidth:Oe,currentQcSpec:t[14],expandedIndex:t[3],attributeLabels:t[9]};return t[10]!==void 0&&(s.controlSpecs=t[10]),e=new Wi({props:s}),Ae.push(()=>Qe(e,"controlSpecs",a)),e.$on("ce",t[26]),{c(){_e(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,o){ge(e,n,o),l=!0},p(n,o){const r={};o[0]&524288&&(r.lVis=n[47]),o[0]&131072&&(r.childRate=n[17]),o[0]&16384&&(r.currentQcSpec=n[14]),o[0]&8&&(r.expandedIndex=n[3]),o[0]&512&&(r.attributeLabels=n[9]),!i&&o[0]&1024&&(i=!0,r.controlSpecs=n[10],De(()=>i=!1)),e.$set(r)},i(n){l||(A(e.$$.fragment,n),l=!0)},o(n){Y(e.$$.fragment,n),l=!1},d(n){pe(e,n)}}}function Ct(t){var o;let e,i,l,a,s,n;return a=new oi({props:{path:t[2],weightedRoot:t[11],specBaselineOptions:t[7],attributeLabels:t[9],qcSpec:t[14],rootId:(o=t[8])==null?void 0:o.id}}),{c(){e=K("g"),i=K("rect"),l=K("foreignObject"),_e(a.$$.fragment),this.h()},l(r){e=x(r,"g",{style:!0});var u=B(e);i=x(u,"rect",{id:!0,height:!0,width:!0,fill:!0,"fill-opacity":!0,stroke:!0,"stroke-width":!0,rx:!0,class:!0}),B(i).forEach(b),l=x(u,"foreignObject",{height:!0,width:!0,transform:!0});var c=B(l);de(a.$$.fragment,c),c.forEach(b),u.forEach(b),this.h()},h(){f(i,"id","hover-rect"),f(i,"height",Ue),f(i,"width",t[22]),f(i,"fill","var(--color-theme-white)"),f(i,"fill-opacity","0.85"),f(i,"stroke","black"),f(i,"stroke-width","0.1px"),f(i,"rx","0.2"),f(i,"class","svelte-14evmle"),f(l,"height",Ue/we),f(l,"width",t[22]/we),f(l,"transform","scale("+we+","+we+")"),T(e,"--x-off",t[18].position.x-t[22]+"px"),T(e,"--y-off",t[18].position.y-Ue+"px")},m(r,u){Q(r,e,u),C(e,i),C(e,l),ge(a,l,null),n=!0},p(r,u){var h;const c={};u[0]&4&&(c.path=r[2]),u[0]&2048&&(c.weightedRoot=r[11]),u[0]&128&&(c.specBaselineOptions=r[7]),u[0]&512&&(c.attributeLabels=r[9]),u[0]&16384&&(c.qcSpec=r[14]),u[0]&256&&(c.rootId=(h=r[8])==null?void 0:h.id),a.$set(c),(!n||u[0]&262144)&&T(e,"--x-off",r[18].position.x-r[22]+"px"),(!n||u[0]&262144)&&T(e,"--y-off",r[18].position.y-Ue+"px")},i(r){n||(A(a.$$.fragment,r),r&&ye(()=>{n&&(s||(s=he(e,ce,{duration:100},!0)),s.run(1))}),n=!0)},o(r){Y(a.$$.fragment,r),r&&(s||(s=he(e,ce,{duration:100},!1)),s.run(0)),n=!1},d(r){r&&b(e),pe(a),r&&s&&s.end()}}}function zi(t){let e,i=![t[20],Oe,t[15]].includes(NaN),l,a,s;ye(t[30]);let n=i&&Rt(t);return{c(){e=$("div"),n&&n.c(),this.h()},l(o){e=ee(o,"DIV",{class:!0});var r=B(e);n&&n.l(r),r.forEach(b),this.h()},h(){f(e,"class","treefix svelte-14evmle")},m(o,r){Q(o,e,r),n&&n.m(e,null),l=!0,a||(s=ve(window,"resize",t[30]),a=!0)},p(o,r){r[0]&1081344&&(i=![o[20],Oe,o[15]].includes(NaN)),i?n?(n.p(o,r),r[0]&1081344&&A(n,1)):(n=Rt(o),n.c(),A(n,1),n.m(e,null)):n&&(Se(),Y(n,1,1,()=>{n=null}),ke())},i(o){l||(A(n),l=!0)},o(o){Y(n),l=!1},d(o){o&&b(e),n&&n.d(),a=!1,s()}}}const Bt=.3;let Oe=100,Ze=25,ze=17,jt=.05,Pi=.03,Wt=.12,Hi=.85,Vi=2.5,Ue=10,we=.035;function ji(t,e){let i=new RegExp("\\{pc_id\\}","gi");return t.replace(i,e)}function qi(t,e,i){let l,a,s,n,o,r,u,c,h;Ft(t,Jt,y=>i(37,h=y));const _={ce:y=>te(parseInt(y)),se:y=>ae(y.split("-")),sp:y=>{const G=parseInt(y);G<p.length&&i(10,p[G].size_base="specialization",p)},qc:y=>{Object.keys(z).includes(y)&&i(6,F=y)},mi:y=>{const G=parseInt(y.slice(0,1));G<p.length&&i(10,p[G].include=y.slice(1).split(","),p)}};async function M(y){if(y.length!=0)for(const G of y.split(";")){const le=G.slice(0,2),Ee=G.slice(2);if(console.log("parsed comm",le,Ee),le=="sl")await new Promise(be=>setTimeout(be,parseFloat(Ee)*1e3));else{const be=_[le];be!=null&&be(Ee)}}}let g=[],m,k,L=[],V=[],W,v=Bt,D=!0,U=ze*.85,H=Oe-ze-2,Z=ze+1,j=H*.15+ze,z={},J=[],F,R={},I,X,q={};const P=y=>({id:y[0],name:y[1].title});Gt(()=>{at("root-descriptions",y=>{I=y[h.params.rootType],i(8,X=I.filter(G=>G.id==h.params.rootId)[0])}),ii().then(([y,G,le])=>{i(5,z=Object.fromEntries(Object.entries(G).filter(([Ee,be])=>be.root_entity_type==h.params.rootType))),J=Object.entries(z).map(P),i(6,F=J[0].id),i(9,q=y),i(7,R=le),M(h.url.searchParams.get("e")||"")})});function ie(y,G){y==null||G==null||(ei(`${ti}/view/${h.params.rootType}/${G}${h.url.search}`),at(`qc-builds/${y}/${G}`,le=>{re(),i(11,[w,p,d]=[le,p,{children:{}}],w,i(10,p),i(12,d))}))}function E(y,G,le){return G&&y.length>0?{node:Ke(y,r.tree),position:le}:void 0}function re(){const y=X==null?void 0:X.id;for(;p.length>0;)p.pop();if(o!=null&&y!=null)for(var G of o.bifurcations)p.push({...ft,...JSON.parse(ji(G.control_format_str,y))})}let p=[ft],w={weight:1},d={children:{}},S={x:0,y:0};function te(y){y==W?(i(3,W=void 0),i(17,v=Bt)):(i(3,W=y),i(17,v=.5))}function ae(y){var be;g.push(`se${y.join("-")}`),console.log(g.join(";"));const G=y[y.length-1];let le=Ke(y.slice(0,y.length-1),d);if((le==null?void 0:le.children)===void 0)return;Object.keys(le.children).includes(G)?(delete le.children[G],i(16,V=si(d))):(i(16,V=y),le.children[G]={children:((be=le.children[G])==null?void 0:be.children)||{}}),i(12,d)}const N=y=>te(y.detail.ind);function fe(y){const G=y.detail.path,le=y.detail.action;if(le=="highlight"){i(28,[S,L]=[y.detail.topLeftCorner,G],S,i(2,L));return}else if(le=="de-highlight"){i(2,L=[]);return}ae(G)}function me(){i(1,k=window.innerWidth),i(0,m=window.innerHeight)}function O(){F=Zt(this),i(6,F),i(5,z)}const oe=()=>console.log("changed");function Ie(y){D=y,i(4,D)}function Ce(y){p=y,i(10,p)}return t.$$.update=()=>{t.$$.dirty[0]&3&&i(15,l=m/k*Oe-5),t.$$.dirty[0]&32768&&i(21,a=l*Pi),t.$$.dirty[0]&32768&&i(20,s=l*Wt),t.$$.dirty[0]&32768&&i(29,n=l*(1-Wt)*Hi),t.$$.dirty[0]&96&&i(14,o=z[F||""]),t.$$.dirty[0]&320&&ie(F,X==null?void 0:X.id),t.$$.dirty[0]&24448&&i(13,r=li(X==null?void 0:X.id,w,p,d,q,o,R)),t.$$.dirty[0]&536879112&&i(19,u=ni(r,n,W)),t.$$.dirty[0]&268435476&&i(18,c=E(L,D,S))},[m,k,L,W,D,z,F,R,X,q,p,w,d,r,o,l,V,v,c,u,s,a,U,H,Z,j,N,fe,S,n,me,O,oe,Ie,Ce]}class Ji extends Ne{constructor(e){super(),Xe(this,e,qi,zi,qe,{},null,[-1,-1])}}export{Ji as component};
